parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function e(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Va,Za;const bb="*";const l=Symbol();var Ib;(function($){$[$.U8=0]="U8",$[$.U8C=1]="U8C",$[$.I8=2]="I8",$[$.U16=3]="U16",$[$.I16=4]="I16",$[$.U32=5]="U32",$[$.I32=6]="I32",$[$.F32=7]="F32",$[$.F64=8]="F64"})(Ib||(Va=Ib={},Va));var Wa;(function($){$[$.FINE=0]="FINE",$[$.DEBUG=1]="DEBUG",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.SEVERE=4]="SEVERE",$[$.NONE=5]="NONE"})(Wa||(Za=Wa={},Za));const ca=(e,t={})=>{const r=Reflect.ownKeys(e),o=Reflect.ownKeys(t),n=Symbol("isa");function p(t){for(let o of r){const r=Object.getOwnPropertyDescriptor(t.prototype,o);!r||r.configurable?Object.defineProperty(t.prototype,o,{value:e[o],writable:!0}):console.log(`not patching: ${t.name}.${o.toString()}`)}return Object.defineProperty(t.prototype,n,{value:!0}),t}for(let i of o)Object.defineProperty(p,i,{value:t[i],enumerable:t.propertyIsEnumerable(i)});return Object.defineProperty(p,Symbol.hasInstance,{value:e=>!!e[n]}),p};class ab extends Error{constructor(r){super("illegal argument(s)"+(void 0!==r?": "+r:""))}}const J=r=>{throw new ab(r)};class db extends Error{constructor(r){super(`illegal arity: ${r}`)}}const q=r=>{throw new db(r)};class jb extends Error{constructor(t){super("illegal state"+(void 0!==t?": "+t:""))}}const lb=t=>{throw new jb(t)};const ha=(t,i)=>{if(t)for(let e,r=0,s=t.length;r<s;r++)if((e=t[r])[0].call(e[1],i),i.canceled)return};const Ka=ca({addListener(t,i,e){let r=(this._listeners=this._listeners||{})[t];return r||(r=this._listeners[t]=[]),-1===this.__listener(r,i,e)&&(r.push([i,e]),!0)},removeListener(t,i,e){if(!this._listeners)return!1;const r=this._listeners[t];if(r){const t=this.__listener(r,i,e);if(-1!==t)return r.splice(t,1),!0}return!1},notify(t){this._listeners&&(void 0===t.target&&(t.target=this),ha(this._listeners[t.id],t),ha(this._listeners[bb],t))},__listener(t,i,e){let r=t.length;for(;--r>=0;){const s=t[r];if(s[0]===i&&s[1]===e)break}return r}});const Oa=ca({addWatch(t,h){return this._watches=this._watches||{},!this._watches[t]&&(this._watches[t]=h,!0)},removeWatch(t){if(this._watches)return!!this._watches[t]&&(delete this._watches[t],!0)},notifyWatches(t,h){if(!this._watches)return;const e=this._watches;for(let i in e)e[i](i,t,h)}});let t,E;const ea=Object.getPrototypeOf({}),j=(e,t)=>{let $;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=($=Object.getPrototypeOf(e))&&$!==ea||null!=($=Object.getPrototypeOf(t))&&$!==ea?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?la(e,t):e instanceof Set&&t instanceof Set?na(e,t):e instanceof Map&&t instanceof Map?ua(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:T(e,t)))};const la=(e,t,$=j)=>{let o=e.length;if(o===t.length)for(;--o>=0&&$(e[o],t[o]););return o<0};const na=(e,t,$=j)=>e.size===t.size&&$([...e.keys()].sort(),[...t.keys()].sort());const ua=(e,t,$=j)=>e.size===t.size&&$([...e].sort(),[...t].sort());const T=(e,t,$=j)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let o in e)if(!t.hasOwnProperty(o)||!$(e[o],t[o]))return!1;return!0};let mb=[],rb=[];const Ab=$=>t&&t.length>=$?t:t=new Int32Array($),Eb=$=>E&&E.length>=$?E:E=new Int32Array($),U=($,e,s,a,r)=>{const t=e.length,c=$.linear;if($.distance=t,0!==r){for(let $=0,s=0;$<t;$++,s+=3)c[s]=a,c[s+1]=$,c[s+2]=e[$];if(3===r){const a=$[s];for(let $=0;$<t;$++)a[$]=e[$]}}return $},Jb=($,e,s=3,a=j)=>{const r={distance:0,adds:{},dels:{},const:{},linear:[]};if($===e||null==$&&null==e)return r;if(null==$||0===$.length)return U(r,e,"adds",1,s);if(null==e||0===e.length)return U(r,$,"dels",-1,s);const t=$.length>=e.length;let c,l,n,h;t?(c=e,l=$):(c=$,l=e),n=c.length,h=l.length;const d=n+1,o=h-n,i=o+d,q=n+h+3,O=Eb(q).fill(-1,0,q),f=Ab(q).fill(-1,0,q),v=mb,u=rb;v.length=0,u.length=0;const P=($,e,s)=>{const r=$+d;let t,o;e>s?(t=O[r-1],o=e):(t=O[r+1],o=s);let i=o-$;for(;i<n&&o<h&&a(c[i],l[o]);)i++,o++;return O[r]=u.length/3,u.push(i,o,t),o};let g,p,_=-1;do{for(p=(g=-++_)+d;g<o;g++,p++)f[p]=P(g,f[p-1]+1,f[p+1]);for(p=(g=o+_)+d;g>o;g--,p--)f[p]=P(g,f[p-1]+1,f[p+1]);f[i]=P(o,f[i-1]+1,f[i+1])}while(f[i]!==h);if(r.distance=o+2*_,0!==s){for(_=3*O[i];_>=0;)v.push(_),_=3*u[_+2];3===s?Lb(v,u,r,c,l,t):bc(v,u,r,c,l,t,1===s)}return r};const Lb=($,e,s,a,r,t)=>{const c=s.linear,l=s.const;let n,h,d,o,i=$.length,q=0,O=0;for(t?(n=s.dels,h=s.adds,d=-1,o=1):(n=s.adds,h=s.dels,d=1,o=-1);--i>=0;){const s=$[i],t=e[s],f=e[s+1],v=f-t;for(;q<t||O<f;){const $=O-q;v>$?(c.push(d,O,n[O]=r[O]),O++):v<$?(c.push(o,q,h[q]=a[q]),q++):(c.push(0,q,l[q]=a[q]),q++,O++)}}},bc=($,e,s,a,r,t,c)=>{const l=s.linear,n=t?-1:1,h=t?1:-1;let d=$.length,o=0,i=0;for(;--d>=0;){const s=$[d],t=e[s],q=e[s+1],O=q-t;for(;o<t||i<q;){const $=i-o;O>$?(l.push(n,i,r[i]),i++):O<$?(l.push(h,o,a[o]),o++):(c&&l.push(0,o,a[o]),o++,i++)}}};const Dc=(t,e,n=3,$=j)=>t===e?{distance:0}:0===n?Ba(t,e,$):Ga(t,e,$);const Ba=(t,e,n)=>{let $=0;for(let i in t){const r=e[i];(void 0===r||!n(t[i],r))&&$++}for(let i in e)!(i in t)&&$++;return{distance:$}},Ga=(t,e,n)=>{let $=0;const i=[],r=[],a=[];for(let f in t){const i=e[f];void 0===i?(r.push(f),$++):n(t[f],i)||(a.push(f,i),$++)}for(let f in e)f in t||(i.push(f),$++);return{distance:$,adds:i,dels:r,edits:a}};const B=Array.isArray,Ma=Math.max,X=(()=>{const e=new Array(2048);for(let t=2,r=e.length;t<r;t++)e[t]=t-2;return e})(),Ta=e=>{if(e<=X.length)return X.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t},Z=(e,t,r,$,i,p=0)=>{const o=i[1];if(o.__skip)return;if(!1===o.__diff)return z($),void t.replaceChild(e,r,p,i);let n=o.__impl;if(n&&n!==t)return n.diffTree(e,n,r,$,i,p);const a=Jb($,i,1,w);if(0===a.distance)return;const f=a.linear,s=t.getChild(r,p);let l,H,v,u,c,d,x,_;if(0!==f[0]||$[1].key!==o.key)return z($),void t.replaceChild(e,r,p,i);if((_=$.__release)&&_!==i.__release&&z($),0!==f[3]&&(Xa(t,s,$[1],i[1]),2===a.distance))return;const g=f.length,y=$.length-1,q=_a(f),A=Ta(y+1);for(l=2,H=6;H<g;l++,H+=3)if(x=f[H])if(-1===x){if(_=f[H+2],B(_)){if(void 0!==(c=_[1].key)&&void 0!==q[c][2])c=(d=q[c])[0],Z(e,t,s,$[c],i[d[2]],A[c]);else for(u=f[H+1],z(_),t.removeChild(s,A[u]),v=y;v>u;v--)A[v]=Ma(A[v]-1,0);}else"string"==typeof _&&t.setContent(s,"");}else if("string"==typeof(_=f[H+2]))t.setContent(s,_);else if(B(_)&&(void 0===(c=_[1].key)||void 0===q[c][0]))for(u=f[H+1],t.createTree(e,s,_,A[u]),v=y;v>=u;v--)A[v]++;(_=i.__init)&&_!=$.__init&&_.apply(i,[s,...i.__args])};const Xa=(e,t,r,$)=>{const i=Dc(r,$,3,j);e.removeAttribs(t,i.dels,r);let p,o,n,a=l;for(p=(n=i.edits).length;(p-=2)>=0;){const i=n[p];0===i.indexOf("on")&&e.removeAttribs(t,[i],r),"value"!==i?e.setAttrib(t,i,n[p+1],$):a=n[p+1]}for(p=(n=i.adds).length;--p>=0;)"value"!==(o=n[p])?e.setAttrib(t,o,$[o],$):a=$[o];a!==l&&e.setAttrib(t,"value",a,$)};const z=e=>{if(B(e)){let t;if((t=e[1])&&!1===t.__release)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)z(e[t])}};const _a=e=>{let t,r,$;const i={};for(let p=e.length;(p-=3)>=0;)r=e[p+2],B(r)&&void 0!==(t=r[1].key)&&(!($=i[t])&&(i[t]=$=[,,]),$[e[p]+1]=e[p+1]);return i},da=Object.getPrototypeOf({}),w=(e,t)=>{let r;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=(r=Object.getPrototypeOf(e))&&r!==da||null!=(r=Object.getPrototypeOf(t))&&r!==da?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?la(e,t,w):e instanceof Set&&t instanceof Set?na(e,t,w):e instanceof Map&&t instanceof Map?ua(e,t,w):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:!(!1===e.__diff||!1===t.__diff)&&T(e,t,w)))};const K=o=>"function"==typeof o;const N=(n,t)=>null!=n&&"function"==typeof n[t];const f=Array.isArray;const kb=r=>null!=r&&"function"!=typeof r&&void 0!==r.length;const pa=t=>null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator];const sa=Object.getPrototypeOf,pb=e=>{let $;return null!=e&&"object"==typeof e&&(null===($=sa(e))||null===sa($))};const qb=e=>e instanceof Promise;const g=s=>"string"==typeof s;const tb="http://www.w3.org/2000/svg";const ub=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;const wb="animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view".split(" ").reduce((e,o)=>(e[o]=1,e),{});const Nc="area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr ?xml".split(" ").reduce((e,o)=>(e[o]=1,e),{});const Bb={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&apos;"};const Db={button:1,option:1,text:1,textarea:1};const Mc=new RegExp(`[${Object.keys(Bb)}]`,"g");const Fb=$=>{let n,r="";for(let e in $)n=$[e],K(n)&&(n=n($)),null!=n&&(r+=`${e}:${n};`);return r};const Gb=(e,t)=>{if(null==e||!t||!t.length)return e;const r=Object.assign({},e);for(let n of t){const e=r[n];N(e,"deref")&&(r[n]=e.deref())}return r};const y=f,W=pa,x=(e,t,r,s,$)=>{if(y(s)){const o=s[0];if("function"==typeof o)return x(e,t,r,o.apply(null,[e.ctx,...s.slice(1)]),$);const n=s[1];if(n.__impl)return n.__impl.createTree(e,r,s,$);const i=t.createElement(r,o,n,$);if(s.length>2){const r=s.length;for(let $=2;$<r;$++)x(e,t,i,s[$])}return s.__init&&s.__init.apply(s.__this,[i,...s.__args]),i}if(W(s)){const $=[];for(let o of s)$.push(x(e,t,r,o));return $}return null==s?r:t.createTextElement(r,s)};const v=(e,t,r,s,$=0)=>{if(y(s)){const o=t.getChild(r,$);"function"==typeof s[0]&&v(e,t,r,s[0].apply(null,[e.ctx,...s.slice(1)]),$);const n=s[1];if(n.__impl)return n.__impl.hydrateTree(e,r,s,$);s.__init&&s.__init.apply(s.__this,[o,...s.__args]);for(let e in n)0===e.indexOf("on")&&t.setAttrib(o,e,n[e]);for(let r=s.length,$=2;$<r;$++)v(e,t,o,s[$],$-2)}else if(W(s))for(let o of s)v(e,t,r,o,$),$++};const dc=(e,t,r,s)=>{const $=wb[t]?document.createElementNS(tb,t):document.createElement(t);return e&&(null==s?e.appendChild($):e.insertBefore($,e.children[s])),r&&Ac($,r),$};const fc=(e,t,r)=>{const s=document.createTextNode(t);return e&&(void 0===r?e.appendChild(s):e.insertBefore(s,e.children[r])),s};const gc=(e,t)=>e.children[t];const ic=(e,t,r,s,$)=>(t.removeChild(r,s),t.createTree(e,r,$,s));const mc=(e,t)=>e.textContent=t;const Ac=(e,t)=>{for(let r in t)ba(e,r,t[r],t);return e};const ba=(e,t,r,s)=>{if(t.startsWith("__"))return;const $=0===t.indexOf("on");if($||"function"!=typeof r||(r=r(s)),void 0!==r&&!1!==r)switch(t){case"style":xa(e,r);break;case"value":Kc(e,r);break;case"id":case"checked":case"scrollTop":case"scrollLeft":e[t]=r;break;default:$?ya(e,t.substr(2),r):e.setAttribute(t,r);}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e};const Kc=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if(void 0!==(r=e.value)&&"string"==typeof t){const s=t.length-(r.length-e.selectionStart);e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t;}};const wa=(e,t,r)=>{for(let s=t.length;--s>=0;){const $=t[s];0===$.indexOf("on")?za(e,$.substr(2),r[$]):e.hasAttribute($)?e.removeAttribute($):e[$]=null}};const xa=(e,t)=>(e.setAttribute("style",Fb(t)),e);const ya=(e,t,r)=>{y(r)?e.addEventListener(t,...r):e.addEventListener(t,r)};const za=(e,t,r)=>{y(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r)};const Aa=(e,t)=>{const r=e.children[t];void 0!==r&&e.removeChild(r)};const u=f,Ca=pa,Da=pb,Ea=(e,r)=>{let $,i,t,n,p=e[0],a=Da(e[1]);return"string"==typeof p&&($=ub.exec(p))||J(`${p} is not a valid tag name`),p!==$[1]||!a||r&&!e[1].key?(n=a?Object.assign({},e[1]):{},i=$[2],t=$[3],i&&(n.id=i),t&&(t=t.replace(/\./g," "),n.class?n.class+=" "+t:n.class=t),n.__skip&&e.length<3?[$[1],n,""]:[$[1],n,...e.slice(a?2:1)]):e};const Fa=(e,r)=>d(r,e,e.ctx,[0],!1!==e.keys,!1!==e.span);const d=(e,r,$,i,t,n)=>{if(null!=e){if(u(e)){if(0===e.length)return;let p,a,o=e[1];if(o&&(a=o.__impl)&&(a=a.normalizeTree))return a(r,e);const l=e[0];if("function"==typeof l)return d(l.apply(null,[$,...e.slice(1)]),r,$,i,t,n);if("function"==typeof l.render){const a=[$,...e.slice(1)];return p=d(l.render.apply(l,a),r,$,i,t,n),u(p)&&(p.__this=l,p.__init=l.init,p.__release=l.release,p.__args=a),p}if(!1===(o=(p=Ea(e,t))[1]).__normalize)return p;if(t&&void 0===o.key&&(o.key=i.join("-")),p.length>2){const e=p[0],a=[e,o];n=n&&!Db[e];for(let o=2,l=2,s=0,c=p.length;o<c;o++){let e=p[o];if(null!=e){const p=u(e);if(p&&u(e[0])||!p&&Ca(e))for(let o of e)void 0!==(o=d(o,r,$,i.concat(s),t,n))&&(a[l++]=o),s++;else void 0!==(e=d(e,r,$,i.concat(s),t,n))&&(a[l++]=e),s++}}return a}return p}return"function"==typeof e?d(e($),r,$,i,t,n):"function"==typeof e.toHiccup?d(e.toHiccup(r.ctx),r,$,i,t,n):"function"==typeof e.deref?d(e.deref(),r,$,i,t,n):n?["span",t?{key:i.join("-")}:{},e.toString()]:e.toString()}};const Ha={createTree(e,t,r,$){return x(e,this,t,r,$)},hydrateTree(e,t,r,$){return v(e,this,t,r,$)},diffTree(e,t,r,$,a){Z(e,this,t,r,$,a)},normalizeTree:Fa,getElementById:e=>document.getElementById(e),getChild:gc,createElement:dc,createTextElement:fc,replaceChild(e,t,r,$){ic(e,this,t,r,$)},removeChild:Aa,setContent:mc,removeAttribs:wa,setAttrib:ba};const Ia=(e,o)=>g(e)?o.getElementById(e):e;const Ja=(r,e={},t=Ha)=>{const $=Object.assign({root:"app"},e);let o=[],a=!0;const m=Ia($.root,t),i=()=>{if(a){$.ctx=Gb(e.ctx,$.autoDerefKeys);const s=t.normalizeTree($,r);null!=s&&($.hydrate?(t.hydrateTree($,m,s),$.hydrate=!1):t.diffTree($,m,o,s),o=s),a&&requestAnimationFrame(i)}};return requestAnimationFrame(i),()=>a=!1};const H="--set-value";const La="--update-value";const fa="--toggle-value";const Na="--cancel";const va="--dispatch";const Pa="--dispatch-async";const Qa="--dispatch-now";const Ra="--delay";const Sa="--fetch";const S="--state";const Ua="--redo";const Lc="--undo";var p={};const oa=Array.isArray,Ya=g,b=t=>oa(t)?t.slice():Object.assign({},t),$a=(t,$)=>(e,r)=>(e=b(e),e[t]=$?$(e[t],r):r,e),O=t=>oa(t)?t:Ya(t)?t.length>0?t.split("."):[]:null!=t?[t]:[];const P=t=>{const $=O(t);let[e,r,a,n]=$;switch($.length){case 0:return t=>t;case 1:return t=>null!=t?t[e]:void 0;case 2:return t=>null!=t&&null!=(t=t[e])?t[r]:void 0;case 3:return t=>null!=t&&null!=(t=t[e])&&null!=(t=t[r])?t[a]:void 0;case 4:return t=>null!=t&&null!=(t=t[e])&&null!=(t=t[r])&&null!=(t=t[a])?t[n]:void 0;default:return t=>{const e=$.length-1;let r=t;for(let a=0;null!=r&&a<=e;a++)r=r[$[a]];return r};}};const R=t=>{const $=O(t);let[e,r,a,n]=$;switch($.length){case 0:return(t,$)=>$;case 1:return(t,$)=>(t=b(t),t[e]=$,t);case 2:return(t,$)=>{let a;return(t=b(t))[e]=a=b(t[e]),a[r]=$,t};case 3:return(t,$)=>{let n,o;return(t=b(t))[e]=n=b(t[e]),n[r]=o=b(n[r]),o[a]=$,t};case 4:return(t,$)=>{let o,s,f;return(t=b(t))[e]=o=b(t[e]),o[r]=s=b(o[r]),s[a]=f=b(s[a]),f[n]=$,t};default:let t;for(let e=$.length;--e>=0;)t=$a($[e],t);return t;}};const cb=(t,$)=>P($)(t);const C=(t,$,e)=>R($)(t,e);const D=(t,$,e,...r)=>R($)(t,e.apply(null,(r.unshift(P($)(t)),r)));let fb=0;const gb=()=>fb++;class hb{constructor(t,i,s,e=!0,r=j){this.parent=t,this.id=`view-${gb()}`,this.tx=s||(t=>t),this.path=O(i),this.isDirty=!0,this.isLazy=e;const h=P(this.path),$=this.parent.deref();this.unprocessed=$?h($):void 0,e||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),t.addWatch(this.id,(t,i,s)=>{const $=i?h(i):i,a=s?h(s):s;r(a,$)||(e?this.unprocessed=a:this.state=this.tx(a),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}var ib=p&&p.__decorate||function(e,t,r,i){var $,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)($=e[o])&&(s=(a<3?$(s):a>3?$(t,r,s):$(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};let n=class{constructor(e,t){t&&!t(e)&&lb("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(C(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(D(this._value,e,t,...r))}addWatch(e,t){return!1}removeWatch(e){return!1}notifyWatches(e,t){}addView(e,t,r=!0){return new hb(this,e,t,r)}release(){return delete this._watches,delete this._value,!0}};n=ib([Oa],n),p.Atom=n,p.Atom=n;const F=Na,Y=Qa,c=S;class nb{constructor(e,t){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),e&&this.addHandlers(e),t&&this.addEffects(t)}addBuiltIns(){this.addEffects({[va]:[e=>this.dispatch(e),-999],[Pa]:[([e,t,r,s])=>{const i=this.effects[e];if(i){const e=i(t,this);qb(e)?e.then(e=>this.dispatch([r,e])).catch(e=>this.dispatch([s,e])):console.warn("async effect did not return Promise")}else console.warn(`skipping invalid async effect: ${e}`)},-999],[Ra]:[([e,t])=>new Promise(r=>setTimeout(()=>r(t),e)),1e3],[Sa]:[e=>fetch(e).then(e=>{if(!e.ok)throw new Error(e.statusText);return e}),1e3]})}addHandler(e,t){const r=f(t)?t.map($):K(t)?[{pre:t}]:[t];r.length>0?(this.handlers[e]&&(this.removeHandler(e),console.warn(`overriding handler for ID: ${e}`)),this.handlers[e]=r):J(`no handlers in spec for ID: ${e}`)}addHandlers(e){for(let t in e)this.addHandler(t,e[t])}addEffect(e,t,r=1){this.effects[e]&&(this.removeEffect(e),console.warn(`overriding effect for ID: ${e}`)),this.effects[e]=t;const s=[e,r],i=this.priorities;for(let $=0;$<i.length;$++)if(s[1]<i[$][1])return void i.splice($,0,s);i.push(s)}addEffects(e){for(let t in e){const r=e[t];f(r)?this.addEffect(t,r[0],r[1]):this.addEffect(t,r)}}instrumentWith(e,t){const r=e.map($),s=this.handlers;for(let i of t||Object.keys(s)){const e=s[i];e&&(s[i]=r.concat(e))}}removeHandler(e){delete this.handlers[e]}removeHandlers(e){for(let t of e)this.removeHandler(t)}removeEffect(e){delete this.effects[e];const t=this.priorities;for(let r=t.length-1;r>=0;r--)if(e===t[r][0])return void t.splice(r,1)}removeEffects(e){for(let t of e)this.removeEffect(t)}context(){return this.currCtx}dispatch(...e){this.eventQueue.push(...e)}dispatchNow(...e){(this.currQueue||this.eventQueue).push(...e)}dispatchLater(e,t=17){setTimeout(()=>this.dispatch(e),t)}processQueue(e){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=e||{};for(let t of this.currQueue)this.processEvent(e,t);return this.currQueue=this.currCtx=void 0,this.processEffects(e),!0}return!1}processEvent(e,t){const r=this.handlers[t[0]];if(!r)return void console.warn(`missing handler for event type: ${t[0].toString()}`);const s=r.length-1;let i=!1;for(let $=0;$<=s&&!e[F];$++){const s=r[$];s.pre&&this.mergeEffects(e,s.pre(e[c],t,this,e)),i=i||!!s.post}if(i)for(let $=s;$>=0&&!e[F];$--){const s=r[$];s.post&&this.mergeEffects(e,s.post(e[c],t,this,e))}}processEffects(e){const t=this.effects;for(let r of this.priorities){const s=r[0],i=e[s];if(void 0!==i){const r=t[s];if(s!==c)for(let t of i)r(t,this,e);else r(i,this,e)}}}mergeEffects(e,t){if(t)for(let r in t){const s=t[r];if(null!=s)if(r===c||r===F)e[r]=s;else if(r===Y){if(f(s[0]))for(let e of s)e&&this.dispatchNow(e);else this.dispatchNow(s);}else if(e[r]||(e[r]=[]),f(s[0]))for(let t of s)void 0!==t&&e[r].push(t);else e[r].push(s)}}}class ob extends nb{constructor(e,t,r){super(t,r),this.state=e||new n({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[H]:(e,[t,[r,s]])=>({[c]:C(e,r,s)}),[La]:(e,[t,[r,s,...i]])=>({[c]:D(e,r,s,...i)}),[fa]:(e,[t,r])=>({[c]:D(e,r,e=>!e)}),[Lc]:_("undo"),[Ua]:_("redo")}),this.addEffects({[c]:[e=>this.state.reset(e),-1e3]})}processQueue(e){if(this.eventQueue.length>0){const t=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=Object.assign({},e,{[c]:t});for(let r of this.currQueue)this.processEvent(e,r);return this.currQueue=this.currCtx=void 0,this.processEffects(e),this.state.deref()!==t}return!1}}const $=e=>K(e)?{pre:e}:e,_=e=>(t,[r,s],i,$)=>{let h=s?s[0]:"history";if(N($[h],e)){const t=$[h][e]();return{[c]:i.state.deref(),[Y]:s?void 0!==t?s[1]:s[2]:void 0}}console.warn("no history in context")};const aa=e=>()=>({[va]:e});const sb=(e,$)=>{const t=R(e);return(e,[r,o])=>({[S]:t(e,$?$(o):o)})};const m="route-changed";var r={};var vb=r&&r.__decorate||function(t,e,r,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(s=(a<3?o(s):a>3?o(e,r,s):o(e,r))||s);return a>3&&s&&Object.defineProperty(e,r,s),s};let o=class{constructor(t){t.authenticator=t.authenticator||((t,e,r)=>({id:t.id,title:t.title,params:r})),t.prefix=void 0===t.prefix?"/":t.prefix,t.separator=t.separator||"/",this.config=t}addListener(t,e,r){return!1}removeListener(t,e,r){return!1}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:m,value:this.current})}}route(t){"#"===t.charAt(0)&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);const e=this.config.routes,r=t.split(this.config.separator);let i;for(let o=0,a=e.length;o<a;o++){const t=e[o],a=this.matchRoute(r,t);if(a){i=a;break}}if(!i){if(!this.handleRouteFailure())return;const t=this.routeForID(this.config.defaultRouteID);i={id:t.id,title:t.title,params:{}}}return j(i,this.current)||(this.current=i,this.notify({id:m,value:i})),i}format(...t){let e,[r,i,o]=t;switch(t.length){case 3:e={id:r,params:i};break;case 2:g(r)?e={id:r,params:i}:(o=i,e=r);break;case 1:e=g(r)?{id:r}:r;break;default:q(t.length);}const a=this.routeForID(e.id);if(a){const t=e.params||{};return(o?"#":"")+this.config.prefix+a.match.map(e=>"?"===e.charAt(0)?null!=(e=t[e.substr(1)])?e:"NULL":e).join(this.config.separator)}J(`invalid route ID: ${e.id.toString()}`)}routeForID(t){return this.config.routes.find(e=>e.id===t)}matchRoute(t,e){const r=e.match,i=r.length;if(t.length===i){const o={};for(let e=0;e<i;e++){const i=r[e];if("?"===i.charAt(0))o[i.substr(1)]=t[e];else if(t[e]!==i)return}if(e.validate&&!this.validateRouteParams(o,e.validate))return;return e.auth?this.config.authenticator(e,t,o):{id:e.id,title:e.title,params:o}}}validateRouteParams(t,e){for(let r in e)if(void 0!==t[r]){const i=e[r];if(i.coerce&&(t[r]=i.coerce(t[r])),i.check&&!i.check(t[r]))return!1}return!0}handleRouteFailure(){return!0}};o=vb([Ka],o),r.BasicRouter=o,r.BasicRouter=o;class xb extends o{constructor(t){super(t),this.useFragment=!1!==t.useFragment}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(t,e=!0){const r=this.current,i=super.route(t);return j(i,r)||(this.currentPath=this.format(i),e&&history.pushState(this.currentPath,i.title||window.document.title||"",this.currentPath)),i}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let e;switch(t.length){case 2:e={id:t[0],params:t[1]};break;case 1:e=g(t[0])?{id:t[0]}:t[0];break;default:q(t.length);}return super.format(e,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const e=t.newURL.substr(t.newURL.indexOf("#"));e!==this.currentPath&&this.route(e,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}var yb,zb,i,L;(function($){$[$.INIT=0]="INIT",$[$.ROUTE_TO=1]="ROUTE_TO"})(i||(yb=i={},yb)),function($){$[$.ROUTE_TO=0]="ROUTE_TO"}(L||(zb=L={},zb));function*Cb($,e){const r=$([null,null,($,e)=>e])[2];for(let f of e){let $=r(l,f);if(M($))return void(($=ia($.deref()))!==l&&(yield $));$!==l&&(yield $)}}class ga{constructor(e){this.value=e}deref(){return this.value}}const M=e=>e instanceof ga;const ia=e=>e instanceof ga?e.deref():e;function ja(...e){let r,$;switch(e.length){case 3:$=e[2],r=e[1];break;case 2:$=e[1];break;default:q(e.length);}const t=e[0],c=t[0],o=t[1],i=t[2];if(r=null==r?c():r,N($,"$reduce"))r=$.$reduce(i,r);else if(kb($)){for(let u=0,d=$.length;u<d;u++)if(r=i(r,$[u]),M(r)){r=r.deref();break}}else for(let u of $)if(r=i(r,u),M(r)){r=r.deref();break}return ia(o(r))}const Hb=(e,r)=>[e,e=>e,r];function ka(...e){let r,a;switch(e.length){case 4:a=e[3],r=e[2];break;case 3:a=e[2];break;case 2:return h(r=>ka(e[0],e[1],r));default:q(e.length);}return ja(e[0](e[1]),r,a)}function h(t,r){return r?Cb(h(t),r):r=>{const $=r[2];return Kb(r,(r,e)=>$(r,t(e)))}}const Kb=($,c)=>[$[0],$[1],c];function ma($){return $?ja(ma(),$):Hb(()=>new Object,($,[e,r])=>($[e]=r,$))}function*Mb(r){for(let $ in r)r.hasOwnProperty($)&&(yield[$,r[$]])}var Nb={};Nb="how-raymarching-works.0dfecf54.png";var Ob={};Ob="crowd-sim.57c42d64.png";var Pb={};Pb="mapbox-gl.8aec6e9f.png";var Qb={};Qb="noisy-drawing.f6e6554a.png";var Rb={};Rb="realtime-cppn.402960c1.png";var Sb={};Sb="replayable-drawing.59230de0.png";var Tb={};Tb="tensorflow-curve-fitting.0fa59f8e.png";var Ub=e(Tb);var Vb=e(Nb);var Wb=e(Sb);var Xb=e(Rb);var Yb=e(Ob);var Zb=e(Pb);var $b=e(Qb);const _b=[{id:"tensorflow-js-curve-fitting",cover:Ub.d,title:"tensorflow.js curve fitting",desc:"a tiny curve fitting dashboard prototype for Tensorflow.js.",url:"https://observablehq.com/@stwind/tensorflow-js-interactive-curve-fitting"},{id:"how-raymarching-works",cover:Vb.d,title:"how raymarching works?",desc:"a visualization demonstrating how raymarching works.",url:"https://observablehq.com/@stwind/how-raymarching-works"},{id:"replayable-drawing",cover:Wb.d,title:"replayable drawing",desc:"circle drawing with time travelling.",url:"https://observablehq.com/@stwind/replayable-drawing"},{id:"realtime-cppn",cover:Xb.d,title:"realtime CPPN",desc:"an implementation of realtime Compositional pattern-producing networks (CPPNs) using WebGL.",url:"https://observablehq.com/@stwind/realtime-cppn"},{id:"crowd-simulation",cover:Yb.d,title:"simple crowd simulation",desc:"some path following rabbits simulated with simple steering behaviors.",url:"https://observablehq.com/@stwind/crowd-simulation"},{id:"mapbox-gl-with-ufo",cover:Zb.d,title:"mapbox gl with ufo",desc:"playing around with Mapbox GL custom layers, to explore the dark world with an UFO.",url:"https://observablehq.com/@stwind/mapbox-gl-with-ufo"},{id:"noisy-drawing",cover:$b.d,title:"noisy drawing",desc:"drawing with perlin noise.",url:"https://observablehq.com/@stwind/noisy-drawing"}];const ac=[{id:"tsne-grid-mnist",title:"tsne grid \u3067 mnist \u3092\u8ABF\u3079\u3066\u307F\u305F",url:"https://qiita.com/stwind/items/1c1025799b8e7a274c0f"}];const k=(s,t)=>{if(!t)return s;const e=Object.assign({},s,t);return s.class&&t.class&&(e.class=s.class+" "+t.class),s.style&&t.style&&(e.style=Object.assign({},s.style,t.style)),e};const cc=t=>(!(t=Object.assign({tag:"a",tagDisabled:"span",preventDefault:!0,attribs:{}},t)).attribs.role&&(t.attribs.role="button"),(e,r,...a)=>r.disabled?[t.tagDisabled,Object.assign({},k(t.attribsDisabled,r.attribs),{disabled:!0}),...a]:[t.tag,Object.assign({},k(t.attribs,r.attribs),{onclick:t.preventDefault?t=>(t.preventDefault(),r.onclick(t)):r.onclick}),...a]);const A=($,v)=>["a",g($)?{href:$}:$,v];const ec=($,v,e,p)=>["a",Object.assign({href:"#",onclick:$=>{$.preventDefault(),e($)}},v),p];const Q=({bus:$},r,e,o)=>[ec,r,()=>$.dispatch([i.ROUTE_TO,e]),o];const qa={init(A,e,r,i){const a=new Image;a.src=i,a.onload=()=>A.src=i},render:({ui:A},e)=>["img",Object.assign({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII="},k(e,A.image.loading))],release(){}};const hc=({ui:e,views:{sketches:r}})=>["div",e.home.main,"a stuff making programmer.",["ul",e.home.list,...h(r=>["li",e.home.item,[Q,{},[a.SKETCH.id,{id:r.id}],[qa,e.home.thumb,r.cover]]],r.deref())]];const ra=({ui:$},e,i)=>A(Object.assign({href:e},$.link.default),i);const jc=({ui:e,views:{sketch:t}})=>{const{title:$,desc:i,url:r,cover:c}=t.deref();return["div",e.sketch.main,["div",e.sketch.title,$],["div",[qa,e.sketch.cover,c]],["div",i],["div",[ra,r,"[link]"]]]};const kc=({ui:t})=>["div",t.about.main,"wait a moment."];const lc={app:{class:"font-sans font-light text-sm text-gray-900 leading-normal no-debug-grid"},link:{default:{class:"text-red sm:hover:text-white sm:hover:bg-red"},active:{class:"bg-red text-white"}},image:{default:{class:""},loading:{class:"bg-white"}},icon:{class:"svg-icon"},icons:{mail:{class:"icon icon-mail"},twitter:{class:"icon icon-twitter"},github:{class:"icon icon-github"}},utils:{hidden:{class:"hidden"}},contacts:{class:"fixed bottom-3 right-4"},main:{class:"grid main"},logo:{class:"text-xl text-red sm:hover:text-white sm:hover:bg-red"},header:{class:"mx-6 pt-4 sm:pt-6 col-span-2 sm:col-span-1"},nav:{trigger:{class:"fixed top-7 right-6 w-3 h-3 sm:hidden"},container:{class:"sm:block col-span-2 sm:col-span-1 sm:col-start-1"},main:{class:"mx-6 stack"},sectionName:{class:"text-green"}},content:{class:"stack mx-6 sm:block col-span-2 sm:col-span-1 sm:col-start-2 sm:row-start-1 sm:row-end-3 sm:pt-6 max-w-xl"},home:{main:{class:"stack sm:pt-2"},list:{class:"grid grid-columns-2 grid-gap-4 sm:grid-automin-16"},item:{class:""},thumb:{class:"h-16 w-full object-cover sm:w-16"}},sketch:{main:{class:"stack"},title:{class:"text-2xl text-red font-normal"},cover:{class:"h-40 w-full object-cover"}},about:{main:{class:"sm:pt-2"}}};const a={HOME:{id:"home",match:["home"]},SKETCH:{id:"sketch",match:["sketch","?id"]},ABOUT:{id:"about",match:["about"]}};const nc={useFragment:!0,defaultRouteID:a.HOME.id,routes:Object.values(a)};const oc={[a.HOME.id]:hc,[a.SKETCH.id]:jc,[a.ABOUT.id]:kc},pc={route:"route",nav:"nav",posts:"posts",sketches:"sketches",sketch:"sketch",content:["route.id",t=>oc[t]]},qc={initialized:!1,nav:{visible:!1},sketches:_b,posts:ac};const rc=t=>ka(h(([o,e])=>[o,f(e)?t.addView(e[0],e[1]):t.addView(e)]),ma(),Mb(pc));const sc={[a.SKETCH.id]:(t,{params:o})=>{const e=cb(t,"sketches").find(({id:t})=>t==o.id);return e?C(t,"sketch",e):t},[a.HOME.id]:(t,o)=>C(t,"sketch",void 0)},tc=(t,[o,e])=>{const s=sc[e.id];return{[S]:s?s(t,e):t}},uc={[m]:[sb("route"),aa([H,["nav.visible",!1]]),tc],[i.ROUTE_TO]:(t,[o,e])=>({[L.ROUTE_TO]:e}),[i.INIT]:aa([H,["initialized",!0]])};const vc=["svg",{viewBox:"0 0 20 20"},["path",{"fill-rule":"nonzero",d:"M10 9.293l4.146-4.147.708.708L10.707 10l4.147 4.146-.708.708L10 10.707l-4.146 4.147-.708-.708L9.293 10 5.146 5.854l.708-.708L10 9.293z"}]];const wc=["svg",{viewBox:"0 0 20 20"},["g",{"fill-rule":"evenodd"},["path",{d:"M3 4h14v1H3zM3 10h14v1H3zM3 16h14v1H3z"}]]];const xc=({ui:$})=>["span",$.icon,wc];const yc=({ui:$})=>["span",$.icon,vc];const zc=({ui:t})=>["div",t.contacts,A({href:"https://github.com/stwind"},["span",t.icons.github]),A({href:"https://twitter.com/st_ind"},["span",t.icons.twitter]),A({href:"mailto:stwind@gmail.com"},["span",t.icons.mail])];const ta=({ui:$},e,r,s)=>[Q,e?$.link.active:$.link.default,r,s],Bc=({views:$},{id:e,title:r})=>{const s=$.route.deref(),i=s.id==a.SKETCH.id&&s.params.id==e;return[ta,i,[a.SKETCH.id,{id:e}],r]},Cc=($,e)=>[ra,e.url,e.title],I=({ui:$},e,...r)=>["section",["div",$.nav.sectionName,`[${e}]`],...r],Ec=({ui:$,views:{nav:e,sketches:r,posts:s,route:i}})=>["div",k($.nav.container,e.deref().visible?{}:$.utils.hidden),["nav",$.nav.main,[I,"sketches",["ul",...h($=>["li",[Bc,$]],r.deref())]],[I,"posts",["ul",...h($=>["li",[Cc,$]],s.deref())]],[I,"misc",["ul",["li",[ta,i.deref().id==a.ABOUT.id,[a.ABOUT.id,{}],"about"]]]]],[zc]];const Fc=cc(),Gc=({ui:$,bus:e,views:r})=>[Fc,{attribs:$.nav.trigger,onclick:()=>e.dispatch([fa,"nav.visible"])},[r.nav.deref().visible?yc:xc]];const Hc=({ui:$})=>["header",$.header,[Q,$.logo,[a.HOME.id,{}],"pngupngu"],[Gc]],Ic=({ui:$,views:{nav:r,content:e}})=>["div",k($.content,r.deref().visible?$.utils.hidden:{}),e],Jc=({ui:$})=>["div",$.app,["main",$.main,[Hc],[Ec],[Ic]]];const V=new n(qc),s=new xb(nc),G=new ob(V,uc,{[L.ROUTE_TO]:([$,r])=>s.routeTo(s.format($,r))});s.addListener(m,$=>G.dispatch([m,$.value]));const eb={ui:lc,views:rc(V),bus:G};Ja(({bus:$})=>$.processQueue()?[Jc]:null,{ctx:eb}),s.start(),G.dispatch([i.INIT]);return{"9B6d":{}};});