parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function e(a){return a&&a.__esModule?{d:a.default}:{d:a}}var r={};const za="*";const d=Symbol();const oa=(e,t={})=>{const r=Reflect.ownKeys(e),o=Reflect.ownKeys(t),n=Symbol("isa");function p(t){for(let o of r){const r=Object.getOwnPropertyDescriptor(t.prototype,o);!r||r.configurable?Object.defineProperty(t.prototype,o,{value:e[o],writable:!0}):console.log(`not patching: ${t.name}.${o.toString()}`)}return Object.defineProperty(t.prototype,n,{value:!0}),t}for(let i of o)Object.defineProperty(p,i,{value:t[i],enumerable:t.propertyIsEnumerable(i)});return Object.defineProperty(p,Symbol.hasInstance,{value:e=>!!e[n]}),p};class Ia extends Error{constructor(r){super("illegal argument(s)"+(void 0!==r?": "+r:""))}}const I=r=>{throw new Ia(r)};class Bb extends Error{constructor(r){super(`illegal arity: ${r}`)}}const q=r=>{throw new Bb(r)};class Ba extends Error{constructor(t){super("illegal state"+(void 0!==t?": "+t:""))}}const la=t=>{throw new Ba(t)};const ka=(t,i)=>{if(t)for(let e,r=0,s=t.length;r<s;r++)if((e=t[r])[0].call(e[1],i),i.canceled)return};const kb=oa({addListener(t,i,e){let r=(this._listeners=this._listeners||{})[t];return r||(r=this._listeners[t]=[]),-1===this.__listener(r,i,e)&&(r.push([i,e]),!0)},removeListener(t,i,e){if(!this._listeners)return!1;const r=this._listeners[t];if(r){const t=this.__listener(r,i,e);if(-1!==t)return r.splice(t,1),!0}return!1},notify(t){this._listeners&&(void 0===t.target&&(t.target=this),ka(this._listeners[t.id],t),ka(this._listeners[za],t))},__listener(t,i,e){let r=t.length;for(;--r>=0;){const s=t[r];if(s[0]===i&&s[1]===e)break}return r}});const ob=oa({addWatch(t,h){return this._watches=this._watches||{},!this._watches[t]&&(this._watches[t]=h,!0)},removeWatch(t){if(this._watches)return!!this._watches[t]&&(delete this._watches[t],!0)},notifyWatches(t,h){if(!this._watches)return;const e=this._watches;for(let i in e)e[i](i,t,h)}});const l=o=>"function"==typeof o;const J=(n,t)=>null!=n&&"function"==typeof n[t];const h=Array.isArray;const ia=t=>null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator];const fa=Object.getPrototypeOf,Wa=e=>{let $;return null!=e&&"object"==typeof e&&(null===($=fa(e))||null===fa($))};const gb=e=>e instanceof Promise;const g=s=>"string"==typeof s;const $=Array.isArray,wb=g,b=t=>$(t)?t.slice():Object.assign({},t),Cb=(t,$)=>(e,r)=>(e=b(e),e[t]=$?$(e[t],r):r,e),N=t=>$(t)?t:wb(t)?t.length>0?t.split("."):[]:null!=t?[t]:[];const E=t=>{const $=N(t);let[e,r,a,n]=$;switch($.length){case 0:return t=>t;case 1:return t=>null!=t?t[e]:void 0;case 2:return t=>null!=t&&null!=(t=t[e])?t[r]:void 0;case 3:return t=>null!=t&&null!=(t=t[e])&&null!=(t=t[r])?t[a]:void 0;case 4:return t=>null!=t&&null!=(t=t[e])&&null!=(t=t[r])&&null!=(t=t[a])?t[n]:void 0;default:return t=>{const e=$.length-1;let r=t;for(let a=0;null!=r&&a<=e;a++)r=r[$[a]];return r};}};const O=t=>{const $=N(t);let[e,r,a,n]=$;switch($.length){case 0:return(t,$)=>$;case 1:return(t,$)=>(t=b(t),t[e]=$,t);case 2:return(t,$)=>{let a;return(t=b(t))[e]=a=b(t[e]),a[r]=$,t};case 3:return(t,$)=>{let n,o;return(t=b(t))[e]=n=b(t[e]),n[r]=o=b(n[r]),o[a]=$,t};case 4:return(t,$)=>{let o,s,f;return(t=b(t))[e]=o=b(t[e]),o[r]=s=b(o[r]),s[a]=f=b(s[a]),f[n]=$,t};default:let t;for(let e=$.length;--e>=0;)t=Cb($[e],t);return t;}};const Ma=(t,$)=>E($)(t);const P=(t,$,e)=>O($)(t,e);const Q=(t,$,e,...r)=>O($)(t,e.apply(null,(r.unshift(E($)(t)),r)));const T=Object.getPrototypeOf({}),j=(e,t)=>{let $;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=($=Object.getPrototypeOf(e))&&$!==T||null!=($=Object.getPrototypeOf(t))&&$!==T?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?ea(e,t):e instanceof Set&&t instanceof Set?U(e,t):e instanceof Map&&t instanceof Map?_(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:da(e,t)))};const ea=(e,t,$=j)=>{let o=e.length;if(o===t.length)for(;--o>=0&&$(e[o],t[o]););return o<0};const U=(e,t,$=j)=>e.size===t.size&&$([...e.keys()].sort(),[...t.keys()].sort());const _=(e,t,$=j)=>e.size===t.size&&$([...e].sort(),[...t].sort());const da=(e,t,$=j)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let o in e)if(!t.hasOwnProperty(o)||!$(e[o],t[o]))return!1;return!0};let Lb=0;const ta=()=>Lb++;class va{constructor(t,i,s,e=!0,r=j){this.parent=t,this.id=`view-${ta()}`,this.tx=s||(t=>t),this.path=N(i),this.isDirty=!0,this.isLazy=e;const h=E(this.path),$=this.parent.deref();this.unprocessed=$?h($):void 0,e||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),t.addWatch(this.id,(t,i,s)=>{const $=i?h(i):i,a=s?h(s):s;r(a,$)||(e?this.unprocessed=a:this.state=this.tx(a),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}var xa=r&&r.__decorate||function(e,t,r,i){var $,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)($=e[o])&&(s=(a<3?$(s):a>3?$(t,r,s):$(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};let n=class{constructor(e,t){t&&!t(e)&&la("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(P(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(Q(this._value,e,t,...r))}addWatch(e,t){return!1}removeWatch(e){return!1}notifyWatches(e,t){}addView(e,t,r=!0){return new va(this,e,t,r)}release(){return delete this._watches,delete this._value,!0}};n=xa([ob],n),r.Atom=n,r.Atom=n;let c=!1;function*Ca($,e){const r=$([null,null,($,e)=>e])[2];for(let f of e){let $=r(d,f);if(Z($))return void(($=F($.deref()))!==d&&(yield $));$!==d&&(yield $)}}class na{constructor(e){this.value=e}deref(){return this.value}}const Z=e=>e instanceof na;const F=e=>e instanceof na?e.deref():e;function Oa($){return $?[...$]:Pa(()=>[],($,r)=>($.push(r),$))}const Pa=(e,r)=>[e,e=>e,r];function D(t,r){return r?Ca(D(t),r):r=>{const $=r[2];return bb(r,(r,e)=>$(r,t(e)))}}const bb=($,c)=>[$[0],$[1],c];function ra(...e){let[r,$,t,o,c,p,i,n,s,a]=e;switch(e.length){case 0:q(0);case 1:return r;case 2:return(...e)=>r($(...e));case 3:return(...e)=>r($(t(...e)));case 4:return(...e)=>r($(t(o(...e))));case 5:return(...e)=>r($(t(o(c(...e)))));case 6:return(...e)=>r($(t(o(c(p(...e))))));case 7:return(...e)=>r($(t(o(c(p(i(...e)))))));case 8:return(...e)=>r($(t(o(c(p(i(n(...e))))))));case 9:return(...e)=>r($(t(o(c(p(i(n(s(...e)))))))));case 10:default:const u=(...e)=>r($(t(o(c(p(i(n(s(a(...e))))))))));return 10===e.length?u:ra(u,...e.slice(10));}}function pa(...$){return ra.apply(null,$)}let mb=0;const C=()=>mb++;const tb=(t,s,i,e)=>new ja(t,s,i,e);class ja{constructor(t,s,i,e){this.state=0,this.parent=i,this.id=e||`sub-${C()}`,this.last=d,this.subs=[],t&&this.subs.push(t),s&&(this.xform=s(Oa()))}deref(){return this.last!==d?this.last:void 0}getState(){return this.state}subscribe(...t){let s,i,e;switch(this.ensureState(),t.length){case 1:case 2:l(t[0])?(i=t[0],e=t[1]||`xform-${C()}`):(s=t[0],l(t[1])?i=t[1]:e=t[1]);break;case 3:[s,i,e]=t;break;default:q(t.length);}return J(s,"subscribe")?s.parent=this:s=tb(s,i,this,e),this.last!==d&&s.next(this.last),this.addWrapped(s)}subscribeAll(...t){const s=[];for(let i of t)s.push(this.subscribe(i));return s}transform(...t){const s=t.length-1;return g(t[s])?this.subscribe(pa(...t.slice(0,s)),t[s]):this.subscribe(pa(...t))}unsubscribe(t){if(c&&console.log(this.id,"unsub start",t?t.id:"self"),!t){let t=!0;return this.parent&&(t=this.parent.unsubscribe(this)),this.state=2,this.cleanup(),t}if(this.subs){c&&console.log(this.id,"unsub child",t.id);const s=this.subs.indexOf(t);if(s>=0)return this.subs.splice(s,1),this.subs.length||this.unsubscribe(),!0}return!1}next(t){if(this.state<2)if(this.xform){const s=this.xform[2]([],t),i=F(s),e=i.length;for(let t=0;t<e;t++)this.dispatch(i[t]);Z(s)&&this.done()}else this.dispatch(t)}done(){if(c&&console.log(this.id,"done start"),this.state<2){if(this.xform){const t=this.xform[1]([]),s=F(t),i=s.length;for(let e=0;e<i;e++)this.dispatch(s[e])}this.state=2;for(let t of[...this.subs])t.done&&t.done();this.unsubscribe(),c&&console.log(this.id,"done")}}error(t){this.state=3;let s=!1;if(this.subs&&this.subs.length)for(let i of this.subs.slice())i.error&&(i.error(t),s=!0);s||(console.log(this.id,"unhandled error:",t),this.parent&&(c&&console.log(this.id,"unsubscribing..."),this.unsubscribe(),this.state=3))}addWrapped(t){return this.subs.push(t),this.state=1,t}dispatch(t){c&&console.log(this.id,"dispatch",t),this.last=t;const s=this.subs;let i;if(1==s.length){i=s[0];try{i.next&&i.next(t)}catch(e){i.error?i.error(e):this.error(e)}}else for(let r=s.length-1;r>=0;r--){i=s[r];try{i.next&&i.next(t)}catch(e){i.error?i.error(e):this.error(e)}}}ensureState(){this.state>=2&&la(`operation not allowed in state ${this.state}`)}cleanup(){c&&console.log(this.id,"cleanup"),this.subs.length=0,delete this.parent,delete this.xform,delete this.last}}class xb extends ja{constructor(...e){let r,s;switch(e.length){case 0:break;case 1:g(e[0])?s=e[0]:r=e[0];break;case 2:[r,s]=e;break;default:q(e.length);}super(null,null,null,s||`stream-${C()}`),this.src=r}subscribe(...e){const r=super.subscribe.apply(this,e);return 1===this.subs.length&&(this._cancel=this.src&&this.src(this)||(()=>void 0)),r}unsubscribe(e){const r=super.unsubscribe(e);return!r||e&&this.subs&&this.subs.length||this.cancel(),r}done(){this.cancel(),super.done(),delete this.src,delete this._cancel}error(e){super.error(e),this.cancel()}cancel(){if(this._cancel){c&&console.log(this.id,"cancel");const e=this._cancel;delete this._cancel,e()}}}const yb=(e,r,t=!1)=>new xb($=>{let n=e=>$.next(e);return e.addEventListener(r,n,t),()=>e.removeEventListener(r,n,t)},`event-${r}-${C()}`);let R,L;let Fb=[],Gb=[];const Ib=$=>R&&R.length>=$?R:R=new Int32Array($),Kb=$=>L&&L.length>=$?L:L=new Int32Array($),ca=($,e,s,a,r)=>{const t=e.length,c=$.linear;if($.distance=t,0!==r){for(let $=0,s=0;$<t;$++,s+=3)c[s]=a,c[s+1]=$,c[s+2]=e[$];if(2===r){const a=$[s];for(let $=0;$<t;$++)a[$]=e[$]}}return $},Mb=($,e,s=2,a=j)=>{const r={distance:0,adds:{},dels:{},const:{},linear:[]};if($===e||null==$&&null==e)return r;if(null==$||0===$.length)return ca(r,e,"adds",1,s);if(null==e||0===e.length)return ca(r,$,"dels",-1,s);const t=$.length>=e.length;let c,l,n,h;t?(c=e,l=$):(c=$,l=e),n=c.length,h=l.length;const d=n+1,o=h-n,i=o+d,q=n+h+3,O=Kb(q).fill(-1,0,q),f=Ib(q).fill(-1,0,q),v=Fb,u=Gb;v.length=0,u.length=0;const P=($,e,s)=>{const r=$+d;let t,o;e>s?(t=O[r-1],o=e):(t=O[r+1],o=s);let i=o-$;for(;i<n&&o<h&&a(c[i],l[o]);)i++,o++;return O[r]=u.length/3,u.push(i,o,t),o};let g,p,_=-1;do{for(p=(g=-++_)+d;g<o;g++,p++)f[p]=P(g,f[p-1]+1,f[p+1]);for(p=(g=o+_)+d;g>o;g--,p--)f[p]=P(g,f[p-1]+1,f[p+1]);f[i]=P(o,f[i-1]+1,f[i+1])}while(f[i]!==h);if(r.distance=o+2*_,0!==s){for(_=3*O[i];_>=0;)v.push(_),_=3*u[_+2];2===s?Nb(v,u,r,c,l,t):Ob(v,u,r,c,l,t)}return r};const Nb=($,e,s,a,r,t)=>{const c=s.linear,l=s.const;let n,h,d,o,i=$.length,q=0,O=0;for(t?(n=s.dels,h=s.adds,d=-1,o=1):(n=s.adds,h=s.dels,d=1,o=-1);--i>=0;){const s=$[i],t=e[s],f=e[s+1],v=f-t;for(;q<t||O<f;){const $=O-q;v>$?(c.push(d,O,n[O]=r[O]),O++):v<$?(c.push(o,q,h[q]=a[q]),q++):(c.push(0,q,l[q]=a[q]),q++,O++)}}},Ob=($,e,s,a,r,t)=>{const c=s.linear,l=t?-1:1,n=t?1:-1;let h=$.length,d=0,o=0;for(;--h>=0;){const s=$[h],t=e[s],i=e[s+1],q=i-t;for(;d<t||o<i;){const $=o-d;q>$?(c.push(l,o,r[o]),o++):q<$?(c.push(n,d,a[d]),d++):(c.push(0,d,a[d]),d++,o++)}}};const Pb=(t,e,n=2,$=j)=>t===e?{distance:0}:0===n?Sb(t,e,$):Xb(t,e,$);const Sb=(t,e,n)=>{let $=0;for(let i in t){const r=e[i];(void 0===r||!n(t[i],r))&&$++}for(let i in e)!(i in t)&&$++;return{distance:$}},Xb=(t,e,n)=>{let $=0;const i=[],r=[],a=[];for(let f in t){const i=e[f];void 0===i?(r.push(f),$++):n(t[f],i)||(a.push(f,i),$++)}for(let f in e)f in t||(i.push(f),$++);return{distance:$,adds:i,dels:r,edits:a}};const z=Array.isArray,ua=Math.max,X=(()=>{const e=new Array(2048);for(let t=2,r=e.length;t<r;t++)e[t]=t-2;return e})(),wa=e=>{if(e<=X.length)return X.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t},W=(e,t,r,$,i,p=0)=>{const o=i[1];if(o.__skip)return;if(!1===o.__diff)return w($),void t.replaceChild(e,r,p,i);let n=o.__impl;if(n&&n!==t)return n.diffTree(e,n,r,$,i,p);const a=Mb($,i,1,m);if(0===a.distance)return;const f=a.linear,s=t.getChild(r,p);let l,H,v,u,c,d,x,_;if(0!==f[0]||$[1].key!==o.key)return w($),void t.replaceChild(e,r,p,i);if((_=$.__release)&&_!==i.__release&&w($),0!==f[3]&&(ya(t,s,$[1],i[1]),2===a.distance))return;const g=f.length,y=$.length-1,q=Aa(f),A=wa(y+1);for(l=2,H=6;H<g;l++,H+=3)if(-1===(x=f[H])){if(_=f[H+2],z(_)){if(void 0!==(c=_[1].key)&&void 0!==q[c][2])c=(d=q[c])[0],W(e,t,s,$[c],i[d[2]],A[c]);else for(u=f[H+1],w(_),t.removeChild(s,A[u]),v=y;v>u;v--)A[v]=ua(A[v]-1,0);}else"string"==typeof _&&t.setContent(s,"");}else if(1===x)if("string"==typeof(_=f[H+2]))t.setContent(s,_);else if(z(_)&&(void 0===(c=_[1].key)||void 0===q[c][0]))for(u=f[H+1],t.createTree(e,s,_,A[u]),v=y;v>=u;v--)A[v]++;(_=i.__init)&&_!=$.__init&&_.apply(i,[s,...i.__args])};const ya=(e,t,r,$)=>{const i=Pb(r,$,2,j);e.removeAttribs(t,i.dels,r);let p,o,n,a=d;for(p=(n=i.edits).length;(p-=2)>=0;){const i=n[p];0===i.indexOf("on")&&e.removeAttribs(t,[i],r),"value"!==i?e.setAttrib(t,i,n[p+1],$):a=n[p+1]}for(p=(n=i.adds).length;--p>=0;)"value"!==(o=n[p])?e.setAttrib(t,o,$[o],$):a=$[o];a!==d&&e.setAttrib(t,"value",a,$)};const w=e=>{if(z(e)){let t;if((t=e[1])&&!1===t.__release)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)w(e[t])}};const Aa=e=>{let t,r,$;const i={};for(let p=e.length;(p-=3)>=0;)r=e[p+2],z(r)&&void 0!==(t=r[1].key)&&(!($=i[t])&&(i[t]=$=[,,]),$[e[p]+1]=e[p+1]);return i},S=Object.getPrototypeOf({}),m=(e,t)=>{let r;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=(r=Object.getPrototypeOf(e))&&r!==S||null!=(r=Object.getPrototypeOf(t))&&r!==S?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?ea(e,t,m):e instanceof Set&&t instanceof Set?U(e,t,m):e instanceof Map&&t instanceof Map?_(e,t,m):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:!(!1===e.__diff||!1===t.__diff)&&da(e,t,m)))};const Da="http://www.w3.org/2000/svg";const Ea=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;const Fa="animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view".split(" ").reduce((e,o)=>(e[o]=1,e),{});const oc="area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr ?xml".split(" ").reduce((e,o)=>(e[o]=1,e),{});const Ha={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&apos;"};const mc={button:1,option:1,text:1,textarea:1};const nc=new RegExp(`[${Object.keys(Ha)}]`,"g");const Ka=$=>{let n,r="";for(let e in $)n=$[e],l(n)&&(n=n($)),null!=n&&(r+=`${e}:${n};`);return r};const La=(e,t)=>{if(null==e||!t||!t.length)return e;const r=Object.assign({},e);for(let n of t){const e=r[n];J(e,"deref")&&(r[n]=e.deref())}return r};const v=h,V=ia,u=(e,t,r,s,$)=>{if(v(s)){const o=s[0];if("function"==typeof o)return u(e,t,r,o.apply(null,[e.ctx,...s.slice(1)]),$);const n=s[1];if(n.__impl)return n.__impl.createTree(e,r,s,$);const i=t.createElement(r,o,n,$);if(s.length>2){const r=s.length;for(let $=2;$<r;$++)u(e,t,i,s[$])}return s.__init&&s.__init.apply(s.__this,[i,...s.__args]),i}if(V(s)){const $=[];for(let o of s)$.push(u(e,t,r,o));return $}return null==s?r:t.createTextElement(r,s)};const p=(e,t,r,s,$=0)=>{if(v(s)){const o=t.getChild(r,$);"function"==typeof s[0]&&p(e,t,r,s[0].apply(null,[e.ctx,...s.slice(1)]),$);const n=s[1];if(n.__impl)return n.__impl.hydrateTree(e,r,s,$);s.__init&&s.__init.apply(s.__this,[o,...s.__args]);for(let e in n)0===e.indexOf("on")&&t.setAttrib(o,e,n[e]);for(let r=s.length,$=2;$<r;$++)p(e,t,o,s[$],$-2)}else if(V(s))for(let o of s)p(e,t,r,o,$),$++};const Qa=(e,t,r,s)=>{const $=Fa[t]?document.createElementNS(Da,t):document.createElement(t);return e&&(null==s?e.appendChild($):e.insertBefore($,e.children[s])),r&&Va($,r),$};const Ra=(e,t,r)=>{const s=document.createTextNode(t);return e&&(void 0===r?e.appendChild(s):e.insertBefore(s,e.children[r])),s};const Sa=(e,t)=>e.children[t];const Ta=(e,t,r,s,$)=>(t.removeChild(r,s),t.createTree(e,r,$,s));const Ua=(e,t)=>e.textContent=t;const Va=(e,t)=>{for(let r in t)Y(e,r,t[r],t);return e};const Y=(e,t,r,s)=>{if(t.startsWith("__"))return;const $=0===t.indexOf("on");if($||"function"!=typeof r||(r=r(s)),void 0!==r&&!1!==r)switch(t){case"style":Za(e,r);break;case"value":Xa(e,r);break;case"id":case"checked":case"scrollTop":case"scrollLeft":e[t]=r;break;default:$?$a(e,t.substr(2),r):e.setAttribute(t,r);}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e};const Xa=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if(void 0!==(r=e.value)&&"string"==typeof t){const s=t.length-(r.length-e.selectionStart);e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t;}};const Ya=(e,t,r)=>{for(let s=t.length;--s>=0;){const $=t[s];0===$.indexOf("on")?_a(e,$.substr(2),r[$]):e[$]?e[$]=null:e.removeAttribute($)}};const Za=(e,t)=>(e.setAttribute("style",Ka(t)),e);const $a=(e,t,r)=>{v(r)?e.addEventListener(t,...r):e.addEventListener(t,r)};const _a=(e,t,r)=>{v(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r)};const ab=(e,t)=>{const r=e.children[t];void 0!==r&&e.removeChild(r)};const B=h,cb=ia,db=Wa,eb=(e,r)=>{let $,i,t,n,p=e[0],a=db(e[1]);return"string"==typeof p&&($=Ea.exec(p))||I(`${p} is not a valid tag name`),p!==$[1]||!a||r&&!e[1].key?(n=a?Object.assign({},e[1]):{},i=$[2],t=$[3],i&&(n.id=i),t&&(t=t.replace(/\./g," "),n.class?n.class+=" "+t:n.class=t),n.__skip&&e.length<3?[$[1],n,""]:[$[1],n,...e.slice(a?2:1)]):e};const fb=(e,r)=>f(r,e,e.ctx,[0],!1!==e.keys,!1!==e.span);const f=(e,r,$,i,t,n)=>{if(null!=e){if(B(e)){if(0===e.length)return;let p,a,o=e[1];if(o&&(a=o.__impl)&&(a=a.normalizeTree))return a(r,e);const l=e[0];if("function"==typeof l)return f(l.apply(null,[$,...e.slice(1)]),r,$,i,t,n);if("function"==typeof l.render){const a=[$,...e.slice(1)];return p=f(l.render.apply(l,a),r,$,i,t,n),B(p)&&(p.__this=l,p.__init=l.init,p.__release=l.release,p.__args=a),p}if(!1===(o=(p=eb(e,t))[1]).__normalize)return p;if(t&&void 0===o.key&&(o.key=i.join("-")),p.length>2){const e=p[0],a=[e,o];n=n&&!mc[e];for(let o=2,l=2,s=0,c=p.length;o<c;o++){let e=p[o];if(null!=e){const p=B(e);if(p&&B(e[0])||!p&&cb(e))for(let o of e)void 0!==(o=f(o,r,$,i.concat(s),t,n))&&(a[l++]=o),s++;else void 0!==(e=f(e,r,$,i.concat(s),t,n))&&(a[l++]=e),s++}}return a}return p}return"function"==typeof e?f(e($),r,$,i,t,n):"function"==typeof e.toHiccup?f(e.toHiccup(r.ctx),r,$,i,t,n):"function"==typeof e.deref?f(e.deref(),r,$,i,t,n):n?["span",t?{key:i.join("-")}:{},e.toString()]:e.toString()}};const hb={createTree(e,t,r,$){return u(e,this,t,r,$)},hydrateTree(e,t,r,$){return p(e,this,t,r,$)},diffTree(e,t,r,$,a){W(e,this,t,r,$,a)},normalizeTree:fb,getElementById:e=>document.getElementById(e),getChild:Sa,createElement:Qa,createTextElement:Ra,replaceChild(e,t,r,$){Ta(e,this,t,r,$)},removeChild:ab,setContent:Ua,removeAttribs:Ya,setAttrib:Y};const ib=(e,o)=>g(e)?o.getElementById(e):e;const jb=(r,e={},t=hb)=>{const $=Object.assign({root:"app"},e);let o=[],a=!0;const m=ib($.root,t),i=()=>{if(a){$.ctx=La(e.ctx,$.autoDerefKeys);const s=t.normalizeTree($,r);null!=s&&($.hydrate?(t.hydrateTree($,m,s),$.hydrate=!1):t.diffTree($,m,o,s),o=s),a&&requestAnimationFrame(i)}};return requestAnimationFrame(i),()=>a=!1};const o="--set-value";const lb="--update-value";const aa="--toggle-value";const nb="--cancel";const ba="--dispatch";const pb="--dispatch-async";const qb="--dispatch-now";const rb="--delay";const sb="--fetch";const M="--state";const ub="--redo";const vb="--undo";const K=nb,sa=qb,a=M;class zb{constructor(e,t){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),e&&this.addHandlers(e),t&&this.addEffects(t)}addBuiltIns(){this.addEffects({[ba]:[e=>this.dispatch(e),-999],[pb]:[([e,t,r,s])=>{const i=this.effects[e];if(i){const e=i(t,this);gb(e)?e.then(e=>this.dispatch([r,e])).catch(e=>this.dispatch([s,e])):console.warn("async effect did not return Promise")}else console.warn(`skipping invalid async effect: ${e}`)},-999],[rb]:[([e,t])=>new Promise(r=>setTimeout(()=>r(t),e)),1e3],[sb]:[e=>fetch(e).then(e=>{if(!e.ok)throw new Error(e.statusText);return e}),1e3]})}addHandler(e,t){const r=h(t)?t.map(ga):l(t)?[{pre:t}]:[t];r.length>0?(this.handlers[e]&&(this.removeHandler(e),console.warn(`overriding handler for ID: ${e}`)),this.handlers[e]=r):I(`no handlers in spec for ID: ${e}`)}addHandlers(e){for(let t in e)this.addHandler(t,e[t])}addEffect(e,t,r=1){this.effects[e]&&(this.removeEffect(e),console.warn(`overriding effect for ID: ${e}`)),this.effects[e]=t;const s=[e,r],i=this.priorities;for(let $=0;$<i.length;$++)if(s[1]<i[$][1])return void i.splice($,0,s);i.push(s)}addEffects(e){for(let t in e){const r=e[t];h(r)?this.addEffect(t,r[0],r[1]):this.addEffect(t,r)}}instrumentWith(e,t){const r=e.map(ga),s=this.handlers;for(let i of t||Object.keys(s)){const e=s[i];e&&(s[i]=r.concat(e))}}removeHandler(e){delete this.handlers[e]}removeHandlers(e){for(let t of e)this.removeHandler(t)}removeEffect(e){delete this.effects[e];const t=this.priorities;for(let r=t.length-1;r>=0;r--)if(e===t[r][0])return void t.splice(r,1)}removeEffects(e){for(let t of e)this.removeEffect(t)}context(){return this.currCtx}dispatch(...e){this.eventQueue.push(...e)}dispatchNow(...e){(this.currQueue||this.eventQueue).push(...e)}dispatchLater(e,t=17){setTimeout(()=>this.dispatch(e),t)}processQueue(e){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=e||{};for(let t of this.currQueue)this.processEvent(e,t);return this.currQueue=this.currCtx=void 0,this.processEffects(e),!0}return!1}processEvent(e,t){const r=this.handlers[t[0]];if(!r)return void console.warn(`missing handler for event type: ${t[0].toString()}`);const s=r.length-1;let i=!1;for(let $=0;$<=s&&!e[K];$++){const s=r[$];s.pre&&this.mergeEffects(e,s.pre(e[a],t,this,e)),i=i||!!s.post}if(i)for(let $=s;$>=0&&!e[K];$--){const s=r[$];s.post&&this.mergeEffects(e,s.post(e[a],t,this,e))}}processEffects(e){const t=this.effects;for(let r of this.priorities){const s=r[0],i=e[s];if(void 0!==i){const r=t[s];if(s!==a)for(let t of i)r(t,this,e);else r(i,this,e)}}}mergeEffects(e,t){if(t)for(let r in t){const s=t[r];if(null!=s)if(r===a||r===K)e[r]=s;else if(r===sa){if(h(s[0]))for(let e of s)e&&this.dispatchNow(e);else this.dispatchNow(s);}else if(e[r]||(e[r]=[]),h(s[0]))for(let t of s)void 0!==t&&e[r].push(t);else e[r].push(s)}}}class Ab extends zb{constructor(e,t,r){super(t,r),this.state=e||new n({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[o]:(e,[t,[r,s]])=>({[a]:P(e,r,s)}),[lb]:(e,[t,[r,s,...i]])=>({[a]:Q(e,r,s,...i)}),[aa]:(e,[t,r])=>({[a]:Q(e,r,e=>!e)}),[vb]:ha("undo"),[ub]:ha("redo")}),this.addEffects({[a]:[e=>this.state.reset(e),-1e3]})}processQueue(e){if(this.eventQueue.length>0){const t=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=Object.assign({},e,{[a]:t});for(let r of this.currQueue)this.processEvent(e,r);return this.currQueue=this.currCtx=void 0,this.processEffects(e),this.state.deref()!==t}return!1}}const ga=e=>l(e)?{pre:e}:e,ha=e=>(t,[r,s],i,$)=>{let h=s?s[0]:"history";if(J($[h],e)){const t=$[h][e]();return{[a]:i.state.deref(),[sa]:s?void 0!==t?s[1]:s[2]:void 0}}console.warn("no history in context")};const Db=e=>()=>({[ba]:e});const Eb=(e,$)=>{const t=O(e);return(e,[r,o])=>({[M]:t(e,$?$(o):o)})};const k="route-changed";var x={};var Hb=x&&x.__decorate||function(t,e,r,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(s=(a<3?o(s):a>3?o(e,r,s):o(e,r))||s);return a>3&&s&&Object.defineProperty(e,r,s),s};let s=class{constructor(t){t.authenticator=t.authenticator||((t,e,r)=>({id:t.id,title:t.title,params:r})),t.prefix=void 0===t.prefix?"/":t.prefix,t.separator=t.separator||"/",this.config=t}addListener(t,e,r){return!1}removeListener(t,e,r){return!1}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:k,value:this.current})}}route(t){"#"===t.charAt(0)&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);const e=this.config.routes,r=t.split(this.config.separator);let i;for(let o=0,a=e.length;o<a;o++){const t=e[o],a=this.matchRoute(r,t);if(a){i=a;break}}if(!i){if(!this.handleRouteFailure())return;const t=this.routeForID(this.config.defaultRouteID);i={id:t.id,title:t.title,params:{}}}return j(i,this.current)||(this.current=i,this.notify({id:k,value:i})),i}format(...t){let e,[r,i,o]=t;switch(t.length){case 3:e={id:r,params:i};break;case 2:g(r)?e={id:r,params:i}:(o=i,e=r);break;case 1:e=g(r)?{id:r}:r;break;default:q(t.length);}const a=this.routeForID(e.id);if(a){const t=e.params||{};return(o?"#":"")+this.config.prefix+a.match.map(e=>"?"===e.charAt(0)?null!=(e=t[e.substr(1)])?e:"NULL":e).join(this.config.separator)}I(`invalid route ID: ${e.id.toString()}`)}routeForID(t){return this.config.routes.find(e=>e.id===t)}matchRoute(t,e){const r=e.match,i=r.length;if(t.length===i){const o={};for(let e=0;e<i;e++){const i=r[e];if("?"===i.charAt(0))o[i.substr(1)]=t[e];else if(t[e]!==i)return}if(e.validate&&!this.validateRouteParams(o,e.validate))return;return e.auth?this.config.authenticator(e,t,o):{id:e.id,title:e.title,params:o}}}validateRouteParams(t,e){for(let r in e)if(void 0!==t[r]){const i=e[r];if(i.coerce&&(t[r]=i.coerce(t[r])),i.check&&!i.check(t[r]))return!1}return!0}handleRouteFailure(){return!0}};s=Hb([kb],s),x.BasicRouter=s,x.BasicRouter=s;class Jb extends s{constructor(t){super(t),this.useFragment=!1!==t.useFragment}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(t,e=!0){const r=this.current,i=super.route(t);return j(i,r)||(this.currentPath=this.format(i),e&&history.pushState(this.currentPath,i.title||window.document.title||"",this.currentPath)),i}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let e;switch(t.length){case 2:e={id:t[0],params:t[1]};break;case 1:e=g(t[0])?{id:t[0]}:t[0];break;default:q(t.length);}return super.format(e,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const e=t.newURL.substr(t.newURL.indexOf("#"));e!==this.currentPath&&this.route(e,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}const A=($,v)=>["a",g($)?{href:$}:$,v];const ma=($,v,e,p)=>["a",Object.assign({href:"#",onclick:$=>{$.preventDefault(),e($)}},v),p];const t={id:"home",match:["home"]};const i={id:"sketch",match:["sketch","?id"]};var H={};H.ROUTE_TO="route-to";const qa=({bus:$},e,r,t)=>[ma,e,()=>$.dispatch([H.ROUTE_TO,r]),t];const Qb=({ui:t})=>["div",t.contacts,A(Object.assign({href:"https://github.com/stwind"},t.icons.github),""),A(Object.assign({href:"https://twitter.com/st_ind"},t.icons.twitter),""),A(Object.assign({href:"mailto:stwind@gmail.com"},t.icons.mail),"")];const Rb=({ui:e,views:r},$,i)=>{const t=r.route.deref(),n=r.currentSketchHover.deref(),a=r.isLarge.deref(),o=t.id==$[0]&&t.params.id==$[1].id||a&&n&&n.id==$[1].id;return[qa,o?e.linkActive:e.link,$,i]},G=({ui:e},r,$)=>["div",e.nav.container,["span",e.nav.groupName,`[${r}]`],$.length>0?["ul",e.nav.group,...D(({title:e,route:r})=>["li",[Rb,r,e]],$)]:["div","..."]],Tb=({ui:e,bus:r,views:{nav:$}})=>[ma,Object.assign({},e.nav.link,e.nav.switch),()=>r.dispatch([aa,"nav.visible"]),["span",$.deref().visible?e.icons.close:e.icons.menu]];const Ub=({ui:e,views:r})=>["nav",e.nav.main,[G,"sketches",[...D(({title:e,id:r})=>({route:[i.id,{id:r}],title:e}),r.sketches.deref())]],[G,"projects",[]],[G,"articles",[]],[Qb]],Vb=({views:e})=>{return e.isLarge.deref()||e.nav.deref().visible?[Ub]:null};const Wb=({ui:o},$)=>["div",o.root,["div",o.main,["header",o.header,["div",o.logo,A(Object.assign({href:"#"},o.link),"pngupngu")]],[Vb],$],[Tb]];var y={};y.JSON="load-json";y.ROUTE_TO="route-to";class Yb{constructor(t){this.config=t,this.state=new n(t.initialState||{}),this.ctx={bus:new Ab(this.state,t.events,t.effects),views:{},ui:t.ui},this.addViews(this.config.views),this.router=new Jb(t.router),this.router.addListener(k,t=>this.ctx.bus.dispatch([k,t.value])),this.ctx.bus.addEffect(y.ROUTE_TO,([t,e])=>this.router.routeTo(this.router.format(t,e))),this.addViews({route:"route",routeComponent:["route.id",t=>(this.config.components[t]||(()=>["div",`missing component for route: ${t}`]))(this.ctx)]})}addViews(t){const e=this.ctx.views;for(let i in t){const r=t[i];h(r)?e[i]=this.state.addView(r[0],r[1]):e[i]=this.state.addView(r)}}resize(){this.ctx.bus.dispatch([o,["isLarge",window.matchMedia("(min-width: 30em)").matches]])}start(){this.router.start(),yb(window,"resize").subscribe({next:()=>this.resize()}),this.resize(),jb(({views:{routeComponent:t}})=>{if(this.ctx.bus.processQueue())return[Wb,t]},{root:this.config.domRoot,ctx:this.ctx})}}const Zb=({ui:r,views:i})=>{const o=i.isLarge.deref(),t=i.isHome.deref();if(o||t)return["div",r.intro,"a stuff making programmer.",["span",t?r.cursor:r.cursorStatic]]};const $b=({ui:e,bus:r},$)=>{const t=[i.id,{id:$.id}];return["div",Object.assign({},e.sketchThumb,{onmouseover:()=>r.dispatch([o,["currentSketchHover",$]]),onmouseleave:()=>r.dispatch([o,["currentSketchHover",void 0]])}),[qa,{},t,["img",Object.assign({src:$.thumbnail},e.sketch.thumbHome)]]]},_b=({ui:e,views:r})=>()=>{const $=r.sketches.deref();return["div",e.home,[Zb],["div",e.thumbnails,...D(e=>[$b,e],$)]]};const ac=({ui:t,views:e})=>()=>{const s=e.currentSketch.deref();return["div",t.sketch.main,["div",t.sketch.title,s.title],["div",t.sketch.thumb,["img",Object.assign({src:s.thumbnail,key:s.id},t.sketch.thumbImg)]],["div",t.sketch.content,["p",s.desc],["a",Object.assign({href:s.link},t.link),"[open]"]]]};var bc={};bc="how-raymarching-works.0edeadca.png";var cc={};cc="crowd-sim.135b4b08.png";var dc={};dc="cppn.430fca04.png";var ec={};ec="mapbox.4b8792ec.png";var fc={};fc="noisy-drawing.82effa9c.png";var gc={};gc="replayable-drawing.e2924fe6.png";var hc=e(bc);var ic=e(gc);var jc=e(dc);var kc=e(cc);var lc=e(ec);var Ja=e(fc);const Ga=[{id:"how-raymarching-works",title:"how raymarching works?",thumbnail:hc.d,desc:"a visualization demonstrating how raymarching works.",link:"https://observablehq.com/@stwind/how-raymarching-works"},{id:"replayable-drawing",title:"replayable drawing",thumbnail:ic.d,desc:"circle drawing with time travelling.",link:"https://observablehq.com/@stwind/replayable-drawing"},{id:"realtime-cppn",title:"realtime CPPN",thumbnail:jc.d,desc:"Implementing a realtime Compositional pattern-producing networks (CPPNs) using WebGL.",link:"https://observablehq.com/@stwind/realtime-cppn"},{id:"crowd-simulation",title:"simple crowd simulation",thumbnail:kc.d,desc:"some path following rabbits simulated with simple steering behaviors.",link:"https://observablehq.com/@stwind/crowd-simulation"},{id:"mapbox-gl-with-ufo",title:"mapbox gl with ufo",thumbnail:lc.d,desc:"playing around with Mapbox GL custom layers, to explore the dark world with an UFO.",link:"https://observablehq.com/@stwind/mapbox-gl-with-ufo"},{id:"noisy-drawing",title:"noisy drawing",thumbnail:Ja.d,desc:"add some perlin noise touches to your drawing.",link:"https://observablehq.com/@stwind/noisy-drawing"}];const Na={router:{useFragment:!0,defaultRouteID:t.id,routes:[t,i]},events:{[k]:[Eb("route"),Db([o,["nav.visible",!1]]),(e,[r,t])=>{if(t.id==i.id){const r=Ma(e,"sketches").find(e=>e.id==t.params.id);r&&(e=P(e,"currentSketch",r))}return{[M]:e}}],[H.ROUTE_TO]:(e,[r,t])=>({[y.ROUTE_TO]:t})},effects:{},components:{[t.id]:_b,[i.id]:ac},domRoot:"app",initialState:{nav:{visible:!1},sketches:Ga},views:{nav:"nav",isHome:["route",e=>e.id==t.id],isLarge:"isLarge",sketches:"sketches",currentSketch:"currentSketch",currentSketchHover:"currentSketchHover"},ui:{root:{class:"f6 fw3 barlow dark-gray relative lh-copy h-100"},main:{class:"dg grid h-100"},link:{class:"no-underline red white-hover-ns bg-red-hover-ns link"},linkActive:{class:"no-underline white bg-red link"},icons:{mail:{class:"mr1 mail icon red no-underline"},twitter:{class:"mr1 twitter icon red no-underline"},github:{class:"mr1 github icon red no-underline"},menu:{class:"menu f7"},close:{class:"close f7"}},header:{class:"ma3 mv2 mv3-ns header"},logo:{class:"f4"},nav:{main:{class:"pa3 h-100 nav bg-white98"},container:{class:"mb3"},switch:{class:"fixed right-1 link red dn-ns top-1 db"},group:{class:"list ma0 pa0"},groupName:{class:"green"}},contacts:{class:"fixed bottom-1 right-1 o-80 f7"},home:{class:"mt3 mt3-ns mw6 content"},intro:{class:"mh3 mh0-ns mb3"},sketchThumb:{class:"relative"},thumbnails:{class:""},sketch:{main:{class:"mw6 pv2 pv0-ns mv0-ns relative content"},title:{class:"f3 fw4 mb3 red ph3 mv3-ns"},thumb:{class:"ph3-ns"},thumbImg:{class:"db"},content:{class:"ph3"},thumbHome:{class:"h3 db w-100 cover"}},cursor:{class:"blinking-cursor dib v-base"},cursorStatic:{class:"static-cursor bg-green dib v-base"}}};new Yb(Na).start();return{"9B6d":{}};});