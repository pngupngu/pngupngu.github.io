parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"r7mt":[function(require,module,exports) {
"use strict";function e(e,t={}){const o=Reflect.ownKeys(e),r=Reflect.ownKeys(t),n=Symbol("isa");function c(t){for(let r of o){const o=Object.getOwnPropertyDescriptor(t.prototype,r);!o||o.configurable?Object.defineProperty(t.prototype,r,{value:e[r],writable:!0}):console.log(`not patching: ${t.name}.${r.toString()}`)}return Object.defineProperty(t.prototype,n,{value:!0}),t}for(let l of r)Object.defineProperty(c,l,{value:t[l],enumerable:t.propertyIsEnumerable(l)});return Object.defineProperty(c,Symbol.hasInstance,{value:e=>!!e[n]}),c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mixin=e;
},{}],"15ha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../mixin");exports.IWatch=t.mixin({addWatch(t,e){return this._watches=this._watches||{},!this._watches[t]&&(this._watches[t]=e,!0)},removeWatch(t){if(this._watches)return!!this._watches[t]&&(delete this._watches[t],!0)},notifyWatches(t,e){if(!this._watches)return;const s=this._watches;for(let h in s)s[h](h,t,e)}});
},{"../mixin":"r7mt"}],"htig":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(e){super("illegal state"+(void 0!==e?": "+e:""))}}function t(t){throw new e(t)}exports.IllegalStateError=e,exports.illegalState=t;
},{}],"EzY8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArray=Array.isArray;
},{}],"YRs3":[function(require,module,exports) {
"use strict";function e(e){return"string"==typeof e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isString=e;
},{}],"uRQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(e){super("illegal argument(s)"+(void 0!==e?": "+e:""))}}function r(r){throw new e(r)}exports.IllegalArgumentError=e,exports.illegalArgs=r;
},{}],"jkaf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-array"),t=require("@thi.ng/checks/is-string"),r=require("@thi.ng/errors/illegal-arguments"),n=e=>Array.isArray(e)?e.slice():Object.assign({},e),u=(e,t)=>(r,u)=>((r=n(r))[e]=t?t(r[e],u):u,r),s=(e,t)=>r=>r?t(r[e]):void 0;function o(r){return e.isArray(r)?r:t.isString(r)?r.length>0?r.split("."):[]:null!=r?[r]:[]}function l(e){const t=o(e);let[r,n,u,l]=t;switch(t.length){case 0:return e=>e;case 1:return e=>e?e[r]:void 0;case 2:return e=>e&&(e=e[r])?e[n]:void 0;case 3:return e=>e&&(e=e[r])&&(e=e[n])?e[u]:void 0;case 4:return e=>e&&(e=e[r])&&(e=e[n])&&(e=e[u])?e[l]:void 0;default:const e=t[t.length-1];let o=t=>t?t[e]:void 0;for(let r=t.length-2;r>=0;r--)o=s(t[r],o);return o}}function i(e){const t=o(e);let[r,s,l,i]=t;switch(t.length){case 0:return(e,t)=>t;case 1:return(e,t)=>(e=n(e),e[r]=t,e);case 2:return(e,t)=>{let u;return(e=n(e))[r]=u=n(e[r]),u[s]=t,e};case 3:return(e,t)=>{let u,o;return(e=n(e))[r]=u=n(e[r]),u[s]=o=n(u[s]),o[l]=t,e};case 4:return(e,t)=>{let u,o,c;return(e=n(e))[r]=u=n(e[r]),u[s]=o=n(u[s]),o[l]=c=n(o[l]),c[i]=t,e};default:let e;for(let r=t.length-1;r>=0;r--)e=u(t[r],e);return e}}function c(e,t){return l(t)(e)}function a(e,t,r){return i(t)(e,r)}function g(e,...t){const n=t.length;1&n&&r.illegalArgs(`require an even number of args (got ${t.length})`);for(let r=0;r<n;r+=2)e=a(e,t[r],t[r+1]);return e}function f(e,t){const r=l(e),n=i(e);return(e,...u)=>n(e,t.apply(null,(u.unshift(r(e)),u)))}function h(e,t,r,...n){return i(t)(e,r.apply(null,(n.unshift(l(t)(e)),n)))}function p(e,t){const r=[...o(t)];if(r.length>0){const t=r.pop();return h(e,r,e=>(delete(e=Object.assign({},e))[t],e))}}function d(e){const t=o(e);let[r,n,u,s]=t;switch(t.length){case 0:return(e,t)=>t;case 1:return(e,t)=>e?(e[r]=t,e):void 0;case 2:return(e,t)=>{let u;return e&&(u=e[r])?(u[n]=t,e):void 0};case 3:return(e,t)=>{let s;return e&&(s=e[r])&&(s=s[n])?(s[u]=t,e):void 0};case 4:return(e,t)=>{let o;return e&&(o=e[r])&&(o=o[n])&&(o=o[u])?(o[s]=t,e):void 0};default:return(e,r)=>{let n=e;const u=t.length-1;for(let s=0;s<u;s++)if(!(n=n[t[s]]))return;return n[t[u]]=r,e}}}function x(e,t,r){return d(t)(e,r)}function v(e,...t){const n=t.length;1&n&&r.illegalArgs(`require an even number of args (got ${t.length})`);for(let r=0;r<n&&e;r+=2)e=x(e,t[r],t[r+1]);return e}exports.toPath=o,exports.exists=((e,t)=>{if(null==e)return!1;for(let r=(t=o(t)).length-1,n=0;n<=r;n++){const u=t[n];if(!e.hasOwnProperty(u))return!1;if(null==(e=e[u])&&n<r)return!1}return!0}),exports.getter=l,exports.setter=i,exports.getIn=c,exports.setIn=a,exports.setInMany=g,exports.updater=f,exports.updateIn=h,exports.deleteIn=p,exports.mutator=d,exports.mutIn=x,exports.mutInMany=v;
},{"@thi.ng/checks/is-array":"EzY8","@thi.ng/checks/is-string":"YRs3","@thi.ng/errors/illegal-arguments":"uRQP"}],"U8cl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=Object.getPrototypeOf({}),t="function",o="string";exports.equiv=((i,r)=>{let n;return i===r||(null==i?i==r:typeof i.equiv===t?i.equiv(r):null==r?i==r:typeof r.equiv===t?r.equiv(i):typeof i!==o&&typeof r!==o&&(null!=(n=Object.getPrototypeOf(i))&&n!==e||null!=(n=Object.getPrototypeOf(r))&&n!==e?typeof i!==t&&void 0!==i.length&&typeof r!==t&&void 0!==r.length?exports.equivArrayLike(i,r):i instanceof Set&&r instanceof Set?exports.equivSet(i,r):i instanceof Map&&r instanceof Map?exports.equivMap(i,r):i instanceof Date&&r instanceof Date?i.getTime()===r.getTime():i instanceof RegExp&&r instanceof RegExp?i.toString()===r.toString():i!=i&&r!=r:exports.equivObject(i,r)))}),exports.equivArrayLike=((e,t,o=exports.equiv)=>{let i=e.length;if(i===t.length)for(;--i>=0&&o(e[i],t[i]););return i<0}),exports.equivSet=((e,t,o=exports.equiv)=>e.size===t.size&&o([...e.keys()].sort(),[...t.keys()].sort())),exports.equivMap=((e,t,o=exports.equiv)=>e.size===t.size&&o([...e].sort(),[...t].sort())),exports.equivObject=((e,t,o=exports.equiv)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(!t.hasOwnProperty(i)||!o(e[i],t[i]))return!1;return!0});
},{}],"LPQS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/equiv"),s=require("@thi.ng/paths");class i{constructor(e,h,r,a=!0,d=t.equiv){this.parent=e,this.id=`view-${i.NEXT_ID++}`,this.tx=r||(t=>t),this.path=s.toPath(h),this.isDirty=!0,this.isLazy=a;const n=s.getter(this.path),o=this.parent.deref();this.unprocessed=o?n(o):void 0,a||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),e.addWatch(this.id,(t,s,i)=>{const e=s?n(s):s,h=i?n(i):i;d(h,e)||(a?this.unprocessed=h:this.state=this.tx(h),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}i.NEXT_ID=0,exports.View=i;
},{"@thi.ng/equiv":"U8cl","@thi.ng/paths":"jkaf"}],"2Mkk":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,i){var s,a=arguments.length,l=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(l=(a<3?s(l):a>3?s(t,r,l):s(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/api/mixins/iwatch"),r=require("@thi.ng/errors/illegal-state"),i=require("@thi.ng/paths"),s=require("./view");let a=class{constructor(e,t){t&&!t(e)&&r.illegalState("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(i.setIn(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(i.updateIn(this._value,e,t,...r))}addWatch(e,t){return!1}removeWatch(e){return!1}notifyWatches(e,t){}addView(e,t,r=!0){return new s.View(this,e,t,r)}release(){return delete this._watches,delete this._value,!0}};a=e([t.IWatch],a),exports.Atom=a;
},{"@thi.ng/api/mixins/iwatch":"15ha","@thi.ng/errors/illegal-state":"htig","@thi.ng/paths":"jkaf","./view":"LPQS"}],"sx3Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEBUG=!1;
},{}],"jIkc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_EPS=1e-6,exports.EVENT_ALL="*",exports.EVENT_ENABLE="enable",exports.EVENT_DISABLE="disable",exports.SEMAPHORE=Symbol();
},{}],"s5qO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/equiv");let e,n,l=[],s=[];const r=t=>e&&e.length>=t?e:e=new Int32Array(t),o=t=>n&&n.length>=t?n:n=new Int32Array(t),h=(t,e,n,l,s)=>{const r=e.length,o=t.linear;if(t.distance=r,0!==s){for(let t=0,n=0;t<r;t++,n+=3)o[n]=l,o[n+1]=t,o[n+2]=e[t];if(2===s){const l=t[n];for(let t=0;t<r;t++)l[t]=e[t]}}return t};exports.diffArray=((e,n,i=2,f=t.equiv)=>{const d={distance:0,adds:{},dels:{},const:{},linear:[]};if(e===n||null==e&&null==n)return d;if(null==e||0===e.length)return h(d,n,"adds",1,i);if(null==n||0===n.length)return h(d,e,"dels",-1,i);const a=e.length>=n.length;let g,p,y,q;a?(g=n,p=e):(g=e,p=n),y=g.length,q=p.length;const v=y+1,w=q-y,A=w+v,x=y+q+3,I=o(x).fill(-1,0,x),_=r(x).fill(-1,0,x),b=l,j=s;b.length=0,j.length=0;const M=(t,e,n)=>{const l=t+v;let s,r;e>n?(s=I[l-1],r=e):(s=I[l+1],r=n);let o=r-t;for(;o<y&&r<q&&f(g[o],p[r]);)o++,r++;return I[l]=j.length/3,j.push(o,r,s),r};let O,P,k=-1;do{for(P=(O=-++k)+v;O<w;O++,P++)_[P]=M(O,_[P-1]+1,_[P+1]);for(P=(O=w+k)+v;O>w;O--,P--)_[P]=M(O,_[P-1]+1,_[P+1]);_[A]=M(w,_[A-1]+1,_[A+1])}while(_[A]!==q);if(d.distance=w+2*k,0!==i){for(k=3*I[A];k>=0;)b.push(k),k=3*j[k+2];2===i?u(b,j,d,g,p,a):c(b,j,d,g,p,a)}return d});const u=(t,e,n,l,s,r)=>{const o=n.linear,h=n.const;let u,c,i,f,d=t.length,a=0,g=0;for(r?(u=n.dels,c=n.adds,i=-1,f=1):(u=n.adds,c=n.dels,i=1,f=-1);--d>=0;){const n=t[d],r=e[n],p=e[n+1],y=p-r;for(;a<r||g<p;){const t=g-a;y>t?(o.push(i,g,u[g]=s[g]),g++):y<t?(o.push(f,a,c[a]=l[a]),a++):(o.push(0,a,h[a]=l[a]),a++,g++)}}},c=(t,e,n,l,s,r)=>{const o=n.linear,h=r?-1:1,u=r?1:-1;let c=t.length,i=0,f=0;for(;--c>=0;){const n=t[c],r=e[n],d=e[n+1],a=d-r;for(;i<r||f<d;){const t=f-i;a>t?(o.push(h,f,s[f]),f++):a<t?(o.push(u,i,l[i]),i++):(o.push(0,i,l[i]),i++,f++)}}};
},{"@thi.ng/equiv":"U8cl"}],"D8na":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/equiv");exports.diffObject=((s,n,o=2,r=e.equiv)=>s===n?{distance:0}:0===o?t(s,n,r):i(s,n,r));const t=(e,t,i)=>{let s=0;for(let n in e){const o=t[n];(void 0===o||!i(e[n],o))&&s++}for(let n in t)!(n in e)&&s++;return{distance:s}},i=(e,t,i)=>{let s=0;const n=[],o=[],r=[];for(let d in e){const n=t[d];void 0===n?(o.push(d),s++):i(e[d],n)||(r.push(d,n),s++)}for(let d in t)d in e||(n.push(d),s++);return{distance:s,adds:n,dels:o,edits:r}};
},{"@thi.ng/equiv":"U8cl"}],"p4eH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/api/api"),t=require("@thi.ng/diff/array"),r=require("@thi.ng/diff/object"),i=require("@thi.ng/equiv"),o=Array.isArray,n=Math.max,s=(()=>{const e=new Array(2048);for(let t=2,r=e.length;t<r;t++)e[t]=t-2;return e})(),f=e=>{if(e<=s.length)return s.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t};exports.diffTree=((e,r,i,s,a,u=0)=>{const p=a[1];if(p.__skip)return;if(!1===p.__diff)return exports.releaseTree(s),void r.replaceChild(e,i,u,a);let d=p.__impl;if(d&&d!==r)return d.diffTree(e,d,i,s,a,u);const c=t.diffArray(s,a,1,exports.equiv);if(0===c.distance)return;const v=c.linear,_=r.getChild(i,u);let g,y,x,q,h,A,b,O;if(0!==v[0]||s[1].key!==p.key)return exports.releaseTree(s),void r.replaceChild(e,i,u,a);if((O=s.__release)&&O!==a.__release&&exports.releaseTree(s),0!==v[3]&&(exports.diffAttributes(r,_,s[1],a[1]),2===c.distance))return;const T=v.length,j=s.length-1,k=l(v),m=f(j+1);for(g=2,y=6;y<T;g++,y+=3)if(-1===(b=v[y]))if(O=v[y+2],o(O))if(void 0!==(h=O[1].key)&&void 0!==k[h][2])h=(A=k[h])[0],exports.diffTree(e,r,_,s[h],a[A[2]],m[h]);else for(q=v[y+1],exports.releaseTree(O),r.removeChild(_,m[q]),x=j;x>=q;x--)m[x]=n(m[x]-1,0);else"string"==typeof O&&r.setContent(_,"");else if(1===b)if("string"==typeof(O=v[y+2]))r.setContent(_,O);else if(o(O)&&(void 0===(h=O[1].key)||void 0===k[h][0]))for(q=v[y+1],r.createTree(e,_,O,m[q]),x=j;x>=q;x--)m[x]++;(O=a.__init)&&O!=s.__init&&O.apply(a,[_,...a.__args])}),exports.diffAttributes=((t,o,n,s)=>{const f=r.diffObject(n,s,2,i.equiv);t.removeAttribs(o,f.dels,n);let l,a,u,p=e.SEMAPHORE;for(l=(u=f.edits).length;(l-=2)>=0;){const e=u[l];0===e.indexOf("on")&&t.removeAttribs(o,[e],n),"value"!==e?t.setAttrib(o,e,u[l+1],s):p=u[l+1]}for(l=(u=f.adds).length;--l>=0;)"value"!==(a=u[l])?t.setAttrib(o,a,s[a],s):p=s[a];p!==e.SEMAPHORE&&t.setAttrib(o,"value",p,s)}),exports.releaseTree=(e=>{if(o(e)){let t;if((t=e[1])&&!1===t.__release)return;for(e.__release&&(e.__release.apply(e,e.__args),delete e.__release),t=e.length;--t>=2;)exports.releaseTree(e[t])}});const l=e=>{let t,r,i;const n={};for(let s=e.length;(s-=3)>=0;)r=e[s+2],o(r)&&void 0!==(t=r[1].key)&&(!(i=n[t])&&(n[t]=i=[,,]),i[e[s]+1]=e[s+1]);return n},a=Object.getPrototypeOf({}),u="function",p="string";exports.equiv=((e,t)=>{let r;return e===t||(null==e?e==t:typeof e.equiv===u?e.equiv(t):null==t?e==t:typeof t.equiv===u?t.equiv(e):typeof e!==p&&typeof t!==p&&(null!=(r=Object.getPrototypeOf(e))&&r!==a||null!=(r=Object.getPrototypeOf(t))&&r!==a?typeof e!==u&&void 0!==e.length&&typeof t!==u&&void 0!==t.length?i.equivArrayLike(e,t,exports.equiv):e instanceof Set&&t instanceof Set?i.equivSet(e,t,exports.equiv):e instanceof Map&&t instanceof Map?i.equivMap(e,t,exports.equiv):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:!(!1===e.__diff||!1===t.__diff)&&i.equivObject(e,t,exports.equiv)))});
},{"@thi.ng/api/api":"jIkc","@thi.ng/diff/array":"s5qO","@thi.ng/diff/object":"D8na","@thi.ng/equiv":"U8cl"}],"h7C1":[function(require,module,exports) {
"use strict";function t(t){return null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNotStringAndIterable=t;
},{}],"paoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVG_NS="http://www.w3.org/2000/svg",exports.XLINK_NS="http://www.w3.org/1999/xlink",exports.TAG_REGEXP=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/,exports.SVG_TAGS="animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view".split(" ").reduce((e,t)=>(e[t]=1,e),{}),exports.VOID_TAGS="area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr".split(" ").reduce((e,t)=>(e[t]=1,e),{}),exports.ENTITIES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},exports.COMMENT="__COMMENT__",exports.NO_SPANS={button:1,option:1,text:1,textarea:1},exports.ENTITY_RE=new RegExp(`[${Object.keys(exports.ENTITIES)}]`,"g");
},{}],"Bufo":[function(require,module,exports) {
"use strict";function e(e){return"function"==typeof e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFunction=e;
},{}],"MnEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-function");exports.css=(t=>{let s,n="";for(let r in t)s=t[r],e.isFunction(s)&&(s=s(t)),null!=s&&(n+=`${r}:${s};`);return n});
},{"@thi.ng/checks/is-function":"Bufo"}],"1sRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-array"),t=require("@thi.ng/checks/is-not-string-iterable"),r=require("@thi.ng/hiccup/api"),s=require("@thi.ng/hiccup/css"),n=e.isArray,i=t.isNotStringAndIterable;exports.createTree=((e,t,r,s,o)=>{if(n(s)){const n=s[0];if("function"==typeof n)return exports.createTree(e,t,r,n.apply(null,[e.ctx,...s.slice(1)]),o);const i=s[1];if(i.__impl)return i.__impl.createTree(e,r,s,o);const l=t.createElement(r,n,i,o);if(s.__init&&s.__init.apply(s.__this,[l,...s.__args]),s.length>2){const r=s.length;for(let n=2;n<r;n++)exports.createTree(e,t,l,s[n])}return l}if(i(s)){const n=[];for(let i of s)n.push(exports.createTree(e,t,r,i));return n}return null==s?r:t.createTextElement(r,s)}),exports.hydrateTree=((e,t,r,s,o=0)=>{if(n(s)){const n=t.getChild(r,o);"function"==typeof s[0]&&exports.hydrateTree(e,t,r,s[0].apply(null,[e.ctx,...s.slice(1)]),o);const i=s[1];if(i.__impl)return i.__impl.hydrateTree(e,r,s,o);s.__init&&s.__init.apply(s.__this,[n,...s.__args]);for(let e in i)0===e.indexOf("on")&&t.setAttrib(n,e,i[e]);for(let r=s.length,o=2;o<r;o++)exports.hydrateTree(e,t,n,s[o],o-2)}else if(i(s))for(let n of s)exports.hydrateTree(e,t,r,n,o),o++}),exports.createElement=((e,t,s,n)=>{const i=r.SVG_TAGS[t]?document.createElementNS(r.SVG_NS,t):document.createElement(t);return e&&(null==n?e.appendChild(i):e.insertBefore(i,e.children[n])),s&&exports.setAttribs(i,s),i}),exports.createTextElement=((e,t,r)=>{const s=document.createTextNode(t);return e&&(void 0===r?e.appendChild(s):e.insertBefore(s,e.children[r])),s}),exports.getChild=((e,t)=>e.children[t]),exports.replaceChild=((e,t,r,s,n)=>(t.removeChild(r,s),t.createTree(e,r,n,s))),exports.cloneWithNewAttribs=((e,t)=>{const r=e.cloneNode(!0);return exports.setAttribs(r,t),e.parentNode.replaceChild(r,e),r}),exports.setContent=((e,t)=>e.textContent=t),exports.setAttribs=((e,t)=>{for(let r in t)exports.setAttrib(e,r,t[r],t);return e}),exports.setAttrib=((e,t,r,s)=>{if(t.startsWith("__"))return;const n=0===t.indexOf("on");if(n||"function"!=typeof r||(r=r(s)),void 0!==r&&!1!==r)switch(t){case"style":exports.setStyle(e,r);break;case"value":exports.updateValueAttrib(e,r);break;case"checked":e[t]=r;break;default:n?e.addEventListener(t.substr(2),r):e.setAttribute(t,r)}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e}),exports.updateValueAttrib=((e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"email":case"url":case"tel":case"search":if(void 0!==(r=e.value)&&"string"==typeof t){const s=t.length-(r.length-e.selectionStart);e.value=t,e.selectionStart=e.selectionEnd=s;break}default:e.value=t}}),exports.removeAttribs=((e,t,r)=>{for(let s=t.length;--s>=0;){const n=t[s];0===n.indexOf("on")?e.removeEventListener(n.substr(2),r[n]):e[n]?e[n]=null:e.removeAttribute(n)}}),exports.setStyle=((e,t)=>(e.setAttribute("style",s.css(t)),e)),exports.clearDOM=(e=>e.innerHTML=""),exports.removeChild=((e,t)=>{const r=e.children[t];void 0!==r&&r.remove()});
},{"@thi.ng/checks/is-array":"EzY8","@thi.ng/checks/is-not-string-iterable":"h7C1","@thi.ng/hiccup/api":"paoD","@thi.ng/hiccup/css":"MnEL"}],"Pfe1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=Object.getPrototypeOf({});function e(e){let o;return"[object Object]"===Object.prototype.toString.call(e)&&(null===(o=Object.getPrototypeOf(e))||o===t)}exports.isPlainObject=e;
},{}],"p6KX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-array"),t=require("@thi.ng/checks/is-not-string-iterable"),i=require("@thi.ng/checks/is-plain-object"),r=require("@thi.ng/errors/illegal-arguments"),n=require("@thi.ng/hiccup/api"),l=e.isArray,o=t.isNotStringAndIterable,s=i.isPlainObject;exports.normalizeElement=((e,t)=>{let i,l,o,c,a=e[0],u=s(e[1]);return"string"==typeof a&&(i=n.TAG_REGEXP.exec(a))||r.illegalArgs(`${a} is not a valid tag name`),a!==i[1]||!u||t&&!e[1].key?(c=u?Object.assign({},e[1]):{},l=i[2],o=i[3],l&&(c.id=l),o&&(o=o.replace(/\./g," "),c.class?c.class+=" "+o:c.class=o),[i[1],c,...e.slice(u?2:1)]):e}),exports.normalizeTree=((e,t)=>c(t,e,e.ctx,[0],!1!==e.keys,!1!==e.span));const c=(e,t,i,r,s,a)=>{if(null!=e){if(l(e)){if(0===e.length)return;let u,f,p=e[1];if(p&&(f=p.__impl)&&(f=f.normalizeTree))return f(t,e);const g=e[0];if("function"==typeof g)return c(g.apply(null,[i,...e.slice(1)]),t,i,r,s,a);if("function"==typeof g.render){const n=[i,...e.slice(1)];return u=c(g.render.apply(g,n),t,i,r,s,a),l(u)&&(u.__this=g,u.__init=g.init,u.__release=g.release,u.__args=n),u}if(!1===(p=(u=exports.normalizeElement(e,s))[1]).__normalize)return u;if(s&&void 0===p.key&&(p.key=r.join("-")),u.length>2){const e=u[0],f=[e,p];a=a&&!n.NO_SPANS[e];for(let n=2,p=2,g=0,y=u.length;n<y;n++){let e=u[n];if(null!=e){const n=l(e);if(n&&l(e[0])||!n&&o(e))for(let l of e)void 0!==(l=c(l,t,i,r.concat(g),s,a))&&(f[p++]=l),g++;else void 0!==(e=c(e,t,i,r.concat(g),s,a))&&(f[p++]=e),g++}}return f}return u}return"function"==typeof e?c(e(i),t,i,r,s,a):"function"==typeof e.toHiccup?c(e.toHiccup(t.ctx),t,i,r,s,a):"function"==typeof e.deref?c(e.deref(),t,i,r,s,a):a?["span",s?{key:r.join("-")}:{},e.toString()]:e.toString()}};
},{"@thi.ng/checks/is-array":"EzY8","@thi.ng/checks/is-not-string-iterable":"h7C1","@thi.ng/checks/is-plain-object":"Pfe1","@thi.ng/errors/illegal-arguments":"uRQP","@thi.ng/hiccup/api":"paoD"}],"NgEa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./diff"),t=require("./dom"),r=require("./normalize");exports.DEFAULT_IMPL={createTree(e,r,i,l){return t.createTree(e,this,r,i,l)},hydrateTree(e,r,i,l){return t.hydrateTree(e,this,r,i,l)},diffTree(t,r,i,l,n){e.diffTree(t,this,r,i,l,n)},normalizeTree:r.normalizeTree,getElementById:e=>document.getElementById(e),getChild:t.getChild,createElement:t.createElement,createTextElement:t.createTextElement,replaceChild(e,r,i,l){t.replaceChild(e,this,r,i,l)},removeChild:t.removeChild,setContent:t.setContent,removeAttribs:t.removeAttribs,setAttrib:t.setAttrib};
},{"./diff":"p4eH","./dom":"1sRT","./normalize":"p6KX"}],"1ayp":[function(require,module,exports) {
"use strict";function e(e,t){return null!=e&&"function"==typeof e[t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.implementsFunction=e;
},{}],"yqXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/implements-function");exports.derefContext=((t,n)=>{if(null==t||!n||!n.length)return t;const r=Object.assign({},t);for(let s of n){const t=r[s];e.implementsFunction(t,"deref")&&(r[s]=t.deref())}return r});
},{"@thi.ng/checks/implements-function":"1ayp"}],"Fj0P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-string");exports.resolveRoot=((t,s)=>e.isString(t)?s.getElementById(t):t);
},{"@thi.ng/checks/is-string":"YRs3"}],"NSDr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/hiccup/deref"),r=require("./default"),t=require("./utils");exports.renderOnce=((o,s={},c=r.DEFAULT_IMPL)=>{(s=Object.assign({root:"app"},s)).ctx=e.derefContext(s.ctx,s.autoDerefKeys);const i=t.resolveRoot(s.root,c);(o=c.normalizeTree(s,o))&&(s.hydrate?c.hydrateTree(s,i,o):c.createTree(s,i,o))});
},{"@thi.ng/hiccup/deref":"yqXH","./default":"NgEa","./utils":"Fj0P"}],"mPAr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/hiccup/deref"),t=require("./default"),r=require("./utils");exports.start=((o,s={},i=t.DEFAULT_IMPL)=>{const n=Object.assign({root:"app"},s);let a=[],u=!0;const c=r.resolveRoot(n.root,i),d=()=>{if(u){n.ctx=e.derefContext(s.ctx,n.autoDerefKeys);const t=i.normalizeTree(n,o);null!=t&&(n.hydrate?(i.hydrateTree(n,c,t),n.hydrate=!1):i.diffTree(n,c,a,t),a=t),u&&requestAnimationFrame(d)}};return requestAnimationFrame(d),()=>u=!1});
},{"@thi.ng/hiccup/deref":"yqXH","./default":"NgEa","./utils":"Fj0P"}],"Ra/P":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./api")),e(require("./default")),e(require("./diff")),e(require("./dom")),e(require("./normalize")),e(require("./render-once")),e(require("./start"));
},{"./api":"sx3Q","./default":"NgEa","./diff":"p4eH","./dom":"1sRT","./normalize":"p6KX","./render-once":"NSDr","./start":"mPAr"}],"dJae":[function(require,module,exports) {
"use strict";function e(e){return e instanceof Promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPromise=e;
},{}],"c8WN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EV_SET_VALUE="--set-value",exports.EV_UPDATE_VALUE="--update-value",exports.EV_TOGGLE_VALUE="--toggle-value",exports.FX_CANCEL="--cancel",exports.FX_DISPATCH="--dispatch",exports.FX_DISPATCH_ASYNC="--dispatch-async",exports.FX_DISPATCH_NOW="--dispatch-now",exports.FX_DELAY="--delay",exports.FX_FETCH="--fetch",exports.FX_STATE="--state",exports.EV_REDO="--redo",exports.EV_UNDO="--undo";
},{}],"hWIS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/atom/atom"),t=require("@thi.ng/checks/implements-function"),s=require("@thi.ng/checks/is-array"),i=require("@thi.ng/checks/is-function"),r=require("@thi.ng/checks/is-promise"),n=require("@thi.ng/errors/illegal-arguments"),o=require("@thi.ng/paths"),h=require("./api"),c=h.FX_CANCEL,f=h.FX_DISPATCH_NOW,u=h.FX_STATE;class d{constructor(e,t){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),e&&this.addHandlers(e),t&&this.addEffects(t)}addBuiltIns(){this.addEffects({[h.FX_DISPATCH]:[e=>this.dispatch(e),-999],[h.FX_DISPATCH_ASYNC]:[([e,t,s,i])=>{const n=this.effects[e];if(n){const e=n(t,this);r.isPromise(e)?e.then(e=>this.dispatch([s,e])).catch(e=>this.dispatch([i,e])):console.warn("async effect did not return Promise")}else console.warn(`skipping invalid async effect: ${e}`)},-999],[h.FX_DELAY]:[([e,t])=>new Promise(s=>setTimeout(()=>s(t),e)),1e3],[h.FX_FETCH]:[e=>fetch(e).then(e=>{if(!e.ok)throw new Error(e.statusText);return e}),1e3]})}addHandler(e,t){const r=s.isArray(t)?t.map(l):i.isFunction(t)?[{pre:t}]:[t];r.length>0?(this.handlers[e]&&(this.removeHandler(e),console.warn(`overriding handler for ID: ${e}`)),this.handlers[e]=r):n.illegalArgs(`no handlers in spec for ID: ${e}`)}addHandlers(e){for(let t in e)this.addHandler(t,e[t])}addEffect(e,t,s=1){this.effects[e]&&(this.removeEffect(e),console.warn(`overriding effect for ID: ${e}`)),this.effects[e]=t;const i=[e,s],r=this.priorities;for(let n=0;n<r.length;n++)if(i[1]<r[n][1])return void r.splice(n,0,i);r.push(i)}addEffects(e){for(let t in e){const i=e[t];s.isArray(i)?this.addEffect(t,i[0],i[1]):this.addEffect(t,i)}}instrumentWith(e,t){const s=e.map(l),i=this.handlers;for(let r of t||Object.keys(i)){const e=i[r];e&&(i[r]=s.concat(e))}}removeHandler(e){delete this.handlers[e]}removeHandlers(e){for(let t of e)this.removeHandler(t)}removeEffect(e){delete this.effects[e];const t=this.priorities;for(let s=t.length-1;s>=0;s--)if(e===t[s][0])return void t.splice(s,1)}removeEffects(e){for(let t of e)this.removeEffect(t)}context(){return this.currCtx}dispatch(...e){this.eventQueue.push(...e)}dispatchNow(...e){(this.currQueue||this.eventQueue).push(...e)}dispatchLater(e,t=17){setTimeout(()=>this.dispatch(e),t)}processQueue(e){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=e||{};for(let t of this.currQueue)this.processEvent(e,t);return this.currQueue=this.currCtx=void 0,this.processEffects(e),!0}return!1}processEvent(e,t){const s=this.handlers[t[0]];if(!s)return void console.warn(`missing handler for event type: ${t[0].toString()}`);const i=s.length-1;let r=!1;for(let n=0;n<=i&&!e[c];n++){const i=s[n];i.pre&&this.mergeEffects(e,i.pre(e[u],t,this,e)),r=r||!!i.post}if(r)for(let n=i;n>=0&&!e[c];n--){const i=s[n];i.post&&this.mergeEffects(e,i.post(e[u],t,this,e))}}processEffects(e){const t=this.effects;for(let s of this.priorities){const i=s[0],r=e[i];if(void 0!==r){const s=t[i];if(i!==u)for(let t of r)s(t,this,e);else s(r,this,e)}}}mergeEffects(e,t){if(t)for(let i in t){const r=t[i];if(null!=r)if(i===u||i===c)e[i]=r;else if(i===f)if(s.isArray(r[0]))for(let e of r)e&&this.dispatchNow(e);else this.dispatchNow(r);else if(e[i]||(e[i]=[]),s.isArray(r[0]))for(let t of r)void 0!==t&&e[i].push(t);else e[i].push(r)}}}exports.StatelessEventBus=d;class a extends d{constructor(t,s,i){super(s,i),this.state=t||new e.Atom({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[h.EV_SET_VALUE]:(e,[t,[s,i]])=>({[u]:o.setIn(e,s,i)}),[h.EV_UPDATE_VALUE]:(e,[t,[s,i,...r]])=>({[u]:o.updateIn(e,s,i,...r)}),[h.EV_TOGGLE_VALUE]:(e,[t,s])=>({[u]:o.updateIn(e,s,e=>!e)}),[h.EV_UNDO]:p("undo"),[h.EV_REDO]:p("redo")}),this.addEffects({[u]:[e=>this.state.reset(e),-1e3]})}processQueue(e){if(this.eventQueue.length>0){const t=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,e=this.currCtx=Object.assign({},e,{[u]:t});for(let s of this.currQueue)this.processEvent(e,s);return this.currQueue=this.currCtx=void 0,this.processEffects(e),this.state.deref()!==t}return!1}}exports.EventBus=a;const l=e=>i.isFunction(e)?{pre:e}:e,p=e=>(s,[i,r],n,o)=>{let h=r?r[0]:"history";if(t.implementsFunction(o[h],e)){const t=o[h][e]();return{[u]:n.state.deref(),[f]:r?void 0!==t?r[1]:r[2]:void 0}}console.warn("no history in context")};
},{"@thi.ng/atom/atom":"2Mkk","@thi.ng/checks/implements-function":"1ayp","@thi.ng/checks/is-array":"EzY8","@thi.ng/checks/is-function":"Bufo","@thi.ng/checks/is-promise":"dJae","@thi.ng/errors/illegal-arguments":"uRQP","@thi.ng/paths":"jkaf","./api":"c8WN"}],"ZeeL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/paths"),r=require("./api");exports.trace=((e,r)=>console.log("event:",r)),exports.forwardSideFx=(e=>(r,[t,s])=>({[e]:void 0===s||s})),exports.dispatch=(e=>()=>({[r.FX_DISPATCH]:e})),exports.dispatchNow=(e=>()=>({[r.FX_DISPATCH_NOW]:e})),exports.snapshot=((e="history")=>(r,t,s,o)=>o[e].record()),exports.ensurePred=((e,t)=>(s,o,n)=>e(s,o,n)?void 0:Object.assign({[r.FX_CANCEL]:!0},t?t(s,o,n):null)),exports.ensureStateLessThan=((r,t,s)=>exports.ensurePred((s,o)=>e.getIn(s,t?t(o):o[1])<r,s)),exports.ensureStateGreaterThan=((r,t,s)=>exports.ensurePred((s,o)=>e.getIn(s,t?t(o):o[1])>r,s)),exports.ensureStateRange=((r,t,s,o)=>exports.ensurePred((o,n)=>{const p=e.getIn(o,s?s(n):n[1]);return p>=r&&p<=t},o)),exports.ensureParamRange=((e,r,t,s)=>exports.ensurePred((s,o)=>{const n=t?t(o):o[1];return n>=e&&n<=r},s)),exports.valueSetter=((t,s)=>{const o=e.setter(t);return(e,[t,n])=>({[r.FX_STATE]:o(e,s?s(n):n)})}),exports.valueUpdater=((t,s)=>{const o=e.updater(t,s);return(e,[t,...s])=>({[r.FX_STATE]:o(e,...s)})});
},{"@thi.ng/paths":"jkaf","./api":"c8WN"}],"iZ8o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENT_ROUTE_CHANGED="route-changed",exports.EVENT_ROUTE_FAILED="route-failed";
},{}],"r3zx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class r extends Error{constructor(r){super(`illegal arity: ${r}`)}}function e(e){throw new r(e)}exports.IllegalArityError=r,exports.illegalArity=e;
},{}],"EzWe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class r extends Error{constructor(r){super("unsupported operation"+(void 0!==r?": "+r:""))}}function e(e){throw new r(e)}exports.UnsupportedOperationError=r,exports.unsupported=e;
},{}],"j3Rf":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./illegal-arguments")),e(require("./illegal-arity")),e(require("./illegal-state")),e(require("./unsupported"));
},{"./illegal-arguments":"uRQP","./illegal-arity":"r3zx","./illegal-state":"htig","./unsupported":"EzWe"}],"uu6d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../api"),t=require("../mixin");function i(e,t){if(!e)return;const i=e.length;let s,r=0;for(r=0;r<i;r++)if((s=e[r])[0].call(s[1],t),t.canceled)return}exports.inotify_dispatch=i,exports.INotify=t.mixin({addListener(e,t,i){let s=(this._listeners=this._listeners||{})[e];return s||(s=this._listeners[e]=[]),-1===this.__listener(s,t,i)&&(s.push([t,i]),!0)},removeListener(e,t,i){if(!this._listeners)return!1;const s=this._listeners[e];if(s){const e=this.__listener(s,t,i);if(-1!==e)return s.splice(e,1),!0}return!1},notify(t){this._listeners&&(void 0===t.target&&(t.target=this),i(this._listeners[t.id],t),i(this._listeners[e.EVENT_ALL],t))},__listener(e,t,i){let s=e.length;for(;--s>=0;){const r=e[s];if(r[0]===t&&r[1]===i)break}return s}});
},{"../api":"jIkc","../mixin":"r7mt"}],"3YJB":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,i,r){var s,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(o=(a<3?s(o):a>3?s(e,i,o):s(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/api/mixins/inotify"),i=require("@thi.ng/checks/is-string"),r=require("@thi.ng/equiv"),s=require("@thi.ng/errors/illegal-arguments"),a=require("@thi.ng/errors/illegal-arity"),o=require("./api");let n=class{constructor(t){t.authenticator=t.authenticator||((t,e,i)=>({id:t.id,title:t.title,params:i})),t.prefix=void 0===t.prefix?"/":t.prefix,t.separator=t.separator||"/",this.config=t}addListener(t,e,i){return!1}removeListener(t,e,i){return!1}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:o.EVENT_ROUTE_CHANGED,value:this.current})}}route(t){"#"===t.charAt(0)&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);const e=this.config.routes,i=t.split(this.config.separator);let s;for(let r=0,a=e.length;r<a;r++){const t=e[r],a=this.matchRoute(i,t);if(a){s=a;break}}if(!s){if(!this.handleRouteFailure())return;const t=this.routeForID(this.config.defaultRouteID);s={id:t.id,title:t.title,params:{}}}return r.equiv(s,this.current)||(this.current=s,this.notify({id:o.EVENT_ROUTE_CHANGED,value:s})),s}format(...t){let e,[r,o,n]=t;switch(t.length){case 3:e={id:r,params:o};break;case 2:i.isString(r)?e={id:r,params:o}:(n=o,e=r);break;case 1:e=i.isString(r)?{id:r}:r;break;default:a.illegalArity(t.length)}const c=this.routeForID(e.id);if(c){const t=e.params||{};return(n?"#":"")+this.config.prefix+c.match.map(e=>"?"===e.charAt(0)?null!=(e=t[e.substr(1)])?e:"NULL":e).join(this.config.separator)}s.illegalArgs(`invalid route ID: ${e.id.toString()}`)}routeForID(t){return this.config.routes.find(e=>e.id===t)}matchRoute(t,e){const i=e.match,r=i.length;if(t.length===r){const s={};for(let e=0;e<r;e++){const r=i[e];if("?"===r.charAt(0))s[r.substr(1)]=t[e];else if(t[e]!==r)return}if(e.validate&&!this.validateRouteParams(s,e.validate))return;return e.auth?this.config.authenticator(e,t,s):{id:e.id,title:e.title,params:s}}}validateRouteParams(t,e){for(let i in e)if(void 0!==t[i]){const r=e[i];if(r.coerce&&(t[i]=r.coerce(t[i])),r.check&&!r.check(t[i]))return!1}return!0}handleRouteFailure(){return!0}};n=t([e.INotify],n),exports.BasicRouter=n;
},{"@thi.ng/api/mixins/inotify":"uu6d","@thi.ng/checks/is-string":"YRs3","@thi.ng/equiv":"U8cl","@thi.ng/errors/illegal-arguments":"uRQP","@thi.ng/errors/illegal-arity":"r3zx","./api":"iZ8o"}],"U0Ak":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/equiv"),e=require("@thi.ng/errors"),i=require("@thi.ng/checks/is-string"),s=require("./basic");class r extends s.BasicRouter{constructor(t){super(t),this.useFragment=!1!==t.useFragment}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(e,i=!0){const s=this.current,r=super.route(e);return t.equiv(r,s)||(this.currentPath=this.format(r),i&&history.pushState(this.currentPath,r.title||window.document.title||"",this.currentPath)),r}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let s;switch(t.length){case 2:s={id:t[0],params:t[1]};break;case 1:s=i.isString(t[0])?{id:t[0]}:t[0];break;default:e.illegalArity(t.length)}return super.format(s,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const e=t.newURL.substr(t.newURL.indexOf("#"));e!==this.currentPath&&this.route(e,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}exports.HTMLRouter=r;
},{"@thi.ng/equiv":"U8cl","@thi.ng/errors":"j3Rf","@thi.ng/checks/is-string":"YRs3","./basic":"3YJB"}],"4b/7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/interceptors/api"),t=require("@thi.ng/interceptors/interceptors"),r=require("@thi.ng/paths");var E,T;!function(e){e[e.ALERT=0]="ALERT",e[e.ROUTE_TO=1]="ROUTE_TO",e[e.SET_RAF=2]="SET_RAF",e[e.SET_VALUE=3]="SET_VALUE",e[e.SET_CHECKED=4]="SET_CHECKED",e[e.SET_PARAM=5]="SET_PARAM"}(E=exports.ev||(exports.ev={})),function(e){e.ALERT="1",e.ROUTE_TO="2"}(T=exports.fx||(exports.fx={})),exports.handlers={events:{[E.SET_RAF]:t.valueSetter("raf"),[E.ALERT]:t.forwardSideFx(T.ALERT),[E.SET_VALUE]:t.valueSetter("value"),[E.SET_CHECKED]:[t.trace,t.valueSetter("checked")],[E.SET_PARAM]:(t,[E,[T,s]])=>({[e.FX_STATE]:r.setIn(t,["params",T],s)})},effects:{[T.ALERT]:e=>alert(e)}};
},{"@thi.ng/interceptors/api":"c8WN","@thi.ng/interceptors/interceptors":"ZeeL","@thi.ng/paths":"jkaf"}],"+YSF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/atom/atom"),e=require("@thi.ng/checks/is-array"),s=require("@thi.ng/hdom"),i=require("@thi.ng/interceptors/event-bus"),r=require("@thi.ng/interceptors/interceptors"),o=require("@thi.ng/router/api"),u=require("@thi.ng/router/history"),n=require("./events");class h{constructor(e){this.config=e,this.state=new t.Atom(e.initialState||{}),this.ctx={bus:new i.EventBus(this.state,e.events,e.effects),views:{},ui:e.ui},this.addViews(this.config.views),this.setupRouter()}setupRouter(){const t=this.ctx.bus;this.router=new u.HTMLRouter(this.config.router),this.router.addListener(o.EVENT_ROUTE_CHANGED,e=>t.dispatch([o.EVENT_ROUTE_CHANGED,e.value])),t.addHandlers({[o.EVENT_ROUTE_CHANGED]:r.valueSetter("route"),[n.ev.ROUTE_TO]:(t,[e,s])=>({[n.fx.ROUTE_TO]:s})}),t.addEffect(n.fx.ROUTE_TO,([t,e])=>this.router.routeTo(this.router.format(t,e))),this.addViews({route:"route",routeComponent:["route.id",t=>(this.config.components[t]||(()=>["div",`missing component for route: ${t}`]))(this.ctx)]})}addViews(t){const s=this.ctx.views;for(let i in t){const r=t[i];e.isArray(r)?s[i]=this.state.addView(r[0],r[1]):s[i]=this.state.addView(r)}}start(){this.router.start(),s.start(({bus:t,views:e})=>t.processQueue()?e.routeComponent:null,{root:this.config.domRoot,ctx:this.ctx})}}exports.App=h;
},{"@thi.ng/atom/atom":"2Mkk","@thi.ng/checks/is-array":"EzY8","@thi.ng/hdom":"Ra/P","@thi.ng/interceptors/event-bus":"hWIS","@thi.ng/interceptors/interceptors":"ZeeL","@thi.ng/router/api":"iZ8o","@thi.ng/router/history":"U0Ak","./events":"4b/7"}],"kpqe":[function(require,module,exports) {
var define;
var e;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var s=n.apply(null,o);s&&e.push(s)}else if("object"===a)for(var u in o)r.call(o,u)&&o[u]&&e.push(u)}}return e.join(" ")}"undefined"!=typeof module&&module.exports?(n.default=n,module.exports=n):"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return n}):window.classNames=n}();
},{}],"Hjqe":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("classnames")),s=require("@thi.ng/paths");exports.addClass=((e,r,l)=>s.updateIn(e,l?s.toPath(l).concat(["class"]):"class",e=>t.default(e,r))),exports.inline=((e,t)=>exports.addClass(e,"mh1 dib",t)),exports.root={class:"vw-100 vh-100 pa0 sans-serif f6 fw2 barlow bg-white98 relative"},exports.panel={container:{class:"bg-black-80 code f7 dg gtc-af pa-1"},label:{class:"no-select nowrap white pa0 ph1 ma-1"},content:{class:"pa0 pv0 ma-1"}},exports.select={container:{class:"relative bg-gray f6 hover-bg-mid-gray"},triangle:{class:"absolute select-triangle"},dropdown:{class:"outline-0 input-reset pointer br0 bn code f7 white bg-transparent pl1 pr3 w-100 tc tlc lh-title va-1"}},exports.button={class:"input-reset f7 code button-reset outline-0 tc pointer no-select ph1 bn white bg-gray hover-bg-mid-gray v-top btn"},exports.slider={container:{class:"f6 bg-black relative ew-resize v-btm"},handle:{class:"bg-gray tr"},value:{class:"f7 code absolute--fill no-select ph1 white"}},exports.checkbox={container:{class:"dib relative w1 h1 v-btm"},input:{class:"hidden input-reset pointer checkbox"},label:{class:"absolute left-0 dib pointer border-box w1 h1 bg-black"}};const r=e=>({container:{class:`dg gtc${e}`},slider:exports.addClass(exports.slider,"mr-2 ctrl","container")});exports.multiSlider3=r(3),exports.multiSlider4=r(4),exports.inlineButton=exports.inline(exports.button),exports.inlineSelect=exports.inline(exports.select,"container"),exports.inlineCheckbox=exports.inline(exports.checkbox,"container"),exports.inlineSlider=exports.addClass(exports.inline(exports.slider,"container"),"w4","container");
},{"classnames":"kpqe","@thi.ng/paths":"jkaf"}],"aMkR":[function(require,module,exports) {
"use strict";function e(e){return null!=e&&"function"!=typeof e&&void 0!==e.length}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrayLike=e;
},{}],"zd6y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PI=Math.PI,exports.TAU=2*exports.PI,exports.HALF_PI=exports.PI/2,exports.THIRD_PI=exports.PI/3,exports.QUARTER_PI=exports.PI/4,exports.SIXTH_PI=exports.PI/6,exports.DEG2RAD=exports.PI/180,exports.RAD2DEG=180/exports.PI,exports.SQRT2=Math.SQRT2,exports.SQRT3=Math.sqrt(3),exports.EPS=1e-6;
},{}],"uNzl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./api");exports.sincos=(e=>[Math.sin(e),Math.cos(e)]),exports.absTheta=(t=>(t%=e.TAU,t<0?e.TAU+t:t)),exports.angleDist=((t,s)=>(t=exports.absTheta(s%e.TAU-t%e.TAU),t>e.PI?e.TAU-t:t)),exports.atan2Abs=((e,t)=>exports.absTheta(Math.atan2(e,t))),exports.quadrant=(t=>exports.absTheta(t)/e.HALF_PI|0),exports.deg=(t=>t*e.RAD2DEG),exports.rad=(t=>t*e.DEG2RAD);
},{"./api":"zd6y"}],"SDG2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./api");exports.eqDelta=((t,r,s=e.EPS)=>{const o=t-r;return(o<0?-o:o)<=s});
},{"./api":"zd6y"}],"PBUS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=((s,e,t)=>s<e?e:s>t?t:s),exports.clamp01=(s=>s<0?0:s>1?1:s),exports.clamp11=(s=>s<-1?-1:s>1?1:s),exports.wrap=((s,e,t)=>s<e?s-e+t:s>=t?s-t+e:s),exports.wrap01=(s=>s<0?s+1:s>=1?s-1:s),exports.wrap11=(s=>s<-1?s+2:s>=1?s-2:s),exports.min2id=((s,e)=>s<=e?0:1),exports.min3id=((s,e,t)=>s<=e?s<=t?0:2:e<=t?1:2),exports.min4id=((s,e,t,p)=>s<=e?s<=t?s<=p?0:3:t<=p?2:3:e<=t?e<=p?1:3:t<=p?2:3),exports.max2id=((s,e)=>s>=e?0:1),exports.max3id=((s,e,t)=>s>=e?s>=t?0:2:e>=t?1:2),exports.max4id=((s,e,t,p)=>s>=e?s>=t?s>=p?0:3:t>=p?2:3:e>=t?e>=p?1:3:t>=p?2:3),exports.smin=((s,e,t)=>exports.smax(s,e,-t)),exports.smax=((s,e,t)=>{const p=Math.exp(s*t),a=Math.exp(e*t);return(s*p+e*a)/(p+a)}),exports.sclamp=((s,e,t,p)=>exports.smin(exports.smax(s,e,p),t,p)),exports.absMin=((s,e)=>Math.abs(s)<Math.abs(e)?s:e),exports.absMax=((s,e)=>Math.abs(s)>Math.abs(e)?s:e),exports.foldback=((s,e)=>e<-s||e>s?Math.abs(Math.abs((e-s)%(4*s))-2*s)-s:e),exports.inRange=((s,e,t)=>s>=e&&s<=t),exports.inOpenRange=((s,e,t)=>s>e&&s<t);
},{}],"B0dQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./api");exports.mix=((t,e,r)=>t+(e-t)*r),exports.mixBilinear=((t,e,r,s,o,p)=>exports.mix(exports.mix(t,e,o),exports.mix(r,s,o),p)),exports.mixQuadratic=((t,e,r,s)=>{const o=1-s;return t*o*o+2*e*o*s+r*s*s}),exports.mixCubic=((t,e,r,s,o)=>{const p=o*o,x=1-o,a=x*x;return t*a*x+3*e*a*o+3*r*p*x+s*p*o}),exports.tween=((t,e,r)=>s=>exports.mix(e,r,t(s))),exports.circular=(t=>(t=1-t,Math.sqrt(1-t*t))),exports.cosine=(e=>1-(.5*Math.cos(e*t.PI)+.5)),exports.decimated=((t,e)=>Math.floor(e*t)/t),exports.bounce=((e,r,s)=>{const o=s*e;return 1-r*Math.sin(o)/o*Math.cos(s*t.HALF_PI)}),exports.ease=((t,e)=>Math.pow(e,t)),exports.impulse=((t,e)=>{const r=t*e;return r*Math.exp(1-r)}),exports.gain=((t,e)=>e<.5?.5*Math.pow(2*e,t):1-.5*Math.pow(2-2*e,t)),exports.parabola=((t,e)=>Math.pow(4*e*(1-e),t)),exports.cubicPulse=((t,e,r)=>(r=Math.abs(r-e))>t?0:1-(r/=t)*r*(3-2*r)),exports.sinc=((e,r)=>(r=t.PI*(e*r-1),Math.sin(r)/r));
},{"./api":"zd6y"}],"UVR2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("./api");exports.fmod=((r,o)=>r-o*Math.floor(r/o)),exports.fract=(r=>r-Math.floor(r)),exports.trunc=(r=>r<0?Math.ceil(r):Math.floor(r)),exports.roundTo=((r,o=1)=>Math.round(r/o)*o),exports.roundEps=((o,t=r.EPS)=>{const e=exports.fract(o);return e<=t||e>=1-t?Math.round(o):o});
},{"./api":"zd6y"}],"9QhS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./interval");exports.step=((e,t)=>t<e?0:1),exports.smoothStep=((t,p,o)=>(3-2*(o=e.clamp01((o-t)/(p-t))))*o*o),exports.smootherStep=((t,p,o)=>(o=e.clamp01((o-t)/(p-t)))*o*o*(o*(6*o-15)+10)),exports.expStep=((e,t,p)=>1-Math.exp(-e*Math.pow(p,t)));
},{"./interval":"PBUS"}],"ZvJB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=-1/0,t=1/0;exports.MIN4=Object.freeze([e,e,e,e]),exports.MAX4=Object.freeze([1/0,1/0,1/0,1/0]),exports.ONE4=Object.freeze([1,1,1,1]),exports.ZERO4=Object.freeze([0,0,0,0]),exports.X4=Object.freeze([1,0,0,0]),exports.Y4=Object.freeze([0,1,0,0]),exports.Z4=Object.freeze([0,0,1,0]),exports.W4=Object.freeze([0,0,0,1]);
},{}],"iXJj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/errors/illegal-arity");function r(...r){let[s,n,c,u,a,l,i,o,p,g]=r;switch(r.length){case 0:e.illegalArity(0);case 1:return s;case 2:return(...e)=>s(n(...e));case 3:return(...e)=>s(n(c(...e)));case 4:return(...e)=>s(n(c(u(...e))));case 5:return(...e)=>s(n(c(u(a(...e)))));case 6:return(...e)=>s(n(c(u(a(l(...e))))));case 7:return(...e)=>s(n(c(u(a(l(i(...e)))))));case 8:return(...e)=>s(n(c(u(a(l(i(o(...e))))))));case 9:return(...e)=>s(n(c(u(a(l(i(o(p(...e)))))))));case 10:default:const f=(...e)=>s(n(c(u(a(l(i(o(p(g(...e))))))))));return 10===r.length?f:t(f,...r.slice(10))}}function t(...e){return r.apply(null,e.reverse())}exports.comp=r,exports.compI=t;
},{"@thi.ng/errors/illegal-arity":"r3zx"}],"9vBN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/compose/comp");function o(...o){return e.comp.apply(null,o)}exports.comp=o;
},{"@thi.ng/compose/comp":"iXJj"}],"N1be":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e){this.value=e}deref(){return this.value}}function r(r){return new e(r)}function t(r){return r instanceof e}function n(r){return r instanceof e?r:new e(r)}function u(r){return r instanceof e?r.deref():r}exports.Reduced=e,exports.reduced=r,exports.isReduced=t,exports.ensureReduced=n,exports.unreduced=u;
},{}],"GT77":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../reduced");function t(e,t,o){return new s(e,t,o)}exports.range=t;class s{constructor(e,t,s){void 0===e?(e=0,t=1/0):void 0===t&&(t=e,e=0),s=void 0===s?e<t?1:-1:s,this.from=e,this.to=t,this.step=s}*[Symbol.iterator](){const e=this.step,t=this.to;let s=this.from;if(e>0)for(;s<t;)yield s,s+=e;else if(e<0)for(;s>t;)yield s,s+=e}$reduce(t,s){const o=this.step;if(o>0)for(let r=this.from,i=this.to;r<i&&!e.isReduced(s);r+=o)s=t(s,r);else for(let r=this.from,i=this.to;r>i&&!e.isReduced(s);r+=o)s=t(s,r);return s}}exports.Range=s;
},{"../reduced":"N1be"}],"BCky":[function(require,module,exports) {
"use strict";function*e(...e){const t=e.map(e=>e[Symbol.iterator]());for(;;){const e=[];for(let o of t){let t=o.next();if(t.done)return;e.push(t.value)}yield e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tuples=e;
},{}],"1n4M":[function(require,module,exports) {
"use strict";function e(e){return null!=e&&"function"==typeof e[Symbol.iterator]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isIterable=e;
},{}],"UerL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/implements-function"),r=require("@thi.ng/checks/is-arraylike"),t=require("@thi.ng/checks/is-iterable"),i=require("@thi.ng/errors/illegal-arity"),l=require("./reduced");function n(...t){let n,c;switch(t.length){case 3:c=t[2],n=t[1];break;case 2:c=t[1];break;default:i.illegalArity(t.length)}const s=t[0],u=s[0],d=s[1],o=s[2];if(n=null==n?u():n,e.implementsFunction(c,"$reduce"))n=c.$reduce(o,n);else if(r.isArrayLike(c)){for(let e=0,r=c.length;e<r;e++)if(n=o(n,c[e]),l.isReduced(n)){n=n.deref();break}}else for(let e of c)if(n=o(n,e),l.isReduced(n)){n=n.deref();break}return l.unreduced(d(n))}function c(e,r){return[e,e=>e,r]}exports.reduce=n,exports.reducer=c,exports.$$reduce=((e,r)=>{const i=r.length-1;return t.isIterable(r[i])?r.length>1?n(e.apply(null,r.slice(0,i)),r[i]):n(e(),r[0]):void 0});
},{"@thi.ng/checks/implements-function":"1ayp","@thi.ng/checks/is-arraylike":"aMkR","@thi.ng/checks/is-iterable":"1n4M","@thi.ng/errors/illegal-arity":"r3zx","./reduced":"N1be"}],"8/nZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../reduce");function r(r){return r?[...r]:e.reducer(()=>[],(e,r)=>(e.push(r),e))}exports.push=r;
},{"../reduce":"UerL"}],"IqcY":[function(require,module,exports) {
"use strict";function e(e,t){return[e[0],e[1],t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compR=e;
},{}],"fhdf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/api/api"),r=require("@thi.ng/checks/is-iterable"),t=require("./reduced"),i=require("./rfn/push");function*u(e,r){const u=e(i.push()),n=u[1],d=u[2];for(let i of r){const e=d([],i);if(t.isReduced(e))return void(yield*t.unreduced(n(e.deref())));e.length&&(yield*e)}yield*t.unreduced(n([]))}function*n(r,i){const u=r([null,null,(e,r)=>r])[2];for(let n of i){let r=u(e.SEMAPHORE,n);if(t.isReduced(r))return void((r=t.unreduced(r.deref()))!==e.SEMAPHORE&&(yield r));r!==e.SEMAPHORE&&(yield r)}}exports.iterator=u,exports.iterator1=n,exports.$iter=((e,t,i=n)=>{const u=t.length-1;return r.isIterable(t[u])?t.length>1?i(e.apply(null,t.slice(0,u)),t[u]):i(e(),t[0]):void 0});
},{"@thi.ng/api/api":"jIkc","@thi.ng/checks/is-iterable":"1n4M","./reduced":"N1be","./rfn/push":"8/nZ"}],"WUst":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../func/compr"),r=require("../iterator");function t(o,u){return u?r.iterator1(t(o),u):r=>{const t=r[2];return e.compR(r,(e,r)=>t(e,o(r)))}}exports.map=t;
},{"../func/compr":"IqcY","../iterator":"fhdf"}],"iqGa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/errors/illegal-arity"),r=require("./reduce"),t=require("./xform/map");function a(...u){let i,l;switch(u.length){case 4:l=u[3],i=u[2];break;case 3:l=u[2];break;case 2:return t.map(e=>a(u[0],u[1],e));default:e.illegalArity(u.length)}return r.reduce(u[0](u[1]),i,l)}exports.transduce=a;
},{"@thi.ng/errors/illegal-arity":"r3zx","./reduce":"UerL","./xform/map":"WUst"}],"arAw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../func/compr"),r=require("../reduced");function t(){return t=>{const u=t[2];return e.compR(t,(e,t)=>{if(t)for(let c of t)if(e=u(e,c),r.isReduced(e))break;return e})}}exports.cat=t;
},{"../func/compr":"IqcY","../reduced":"N1be"}],"pk6b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../func/comp"),r=require("../iterator"),t=require("./cat"),c=require("./map");function o(u,a){return a?r.iterator(o(u),a):e.comp(c.map(u),t.cat())}exports.mapcat=o;
},{"../func/comp":"9vBN","../iterator":"fhdf","./cat":"arAw","./map":"WUst"}],"o8VT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../func/compr"),r=require("../iterator"),t=require("../reduced");function u(c,o){return o?r.iterator(u(c),o):r=>{const u=r[2];let o=c;return e.compR(r,(e,r)=>--o>0?u(e,r):0===o?t.ensureReduced(u(e,r)):t.reduced(e))}}exports.take=u;
},{"../func/compr":"IqcY","../iterator":"fhdf","../reduced":"N1be"}],"i8Zj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/transducers/func/comp"),s=require("@thi.ng/transducers/iter/range"),o=require("@thi.ng/transducers/iter/tuples"),r=require("@thi.ng/transducers/rfn/push"),a=require("@thi.ng/transducers/transduce"),t=require("@thi.ng/transducers/xform/map"),i=require("@thi.ng/transducers/xform/mapcat"),p=require("@thi.ng/transducers/xform/take"),n=e=>s=>s>1?`${e}[i${e}+${s}*s${e}]`:1==s?`${e}[i${e}+s${e}]`:`${e}[i${e}]`,$=e=>t.map(n(e),s.range()),b=(s,i,n,b="a")=>{const c=a.transduce(e.comp(p.take(s),t.map(i)),r.push(),o.tuples.apply(null,[...t.map($,n)]));return null!==b&&c.push(`return ${b};`),c},c=(e,s)=>new Function(e,s.join(""));exports.defop1=((e,s)=>c("a,ia=0,sa=1",b(e,([e])=>`${e}=${s}(${e});`,["a"]))),exports.defop2=((e,s)=>c("a,b,ia=0,ib=0,sa=1,sb=1",b(e,([e,o])=>`${e}${s}=${o};`,["a","b"]))),exports.defopfn2=((e,s)=>c("a,b,ia=0,ib=0,sa=1,sb=1",b(e,([e,o])=>`${e}=${s}(${e},${o});`,["a","b"]))),exports.defopN=((e,s)=>c("a,n,ia=0,sa=1",b(e,([e])=>`${e}${s}=n;`,["a"]))),exports.defop2o=((e,s)=>c("o,a,b,io=0,ia=0,ib=0,so=1,sa=1,sb=1",b(e,([e,o,r])=>`${e}=${o}${s}${r};`,["o","a","b"],"o"))),exports.defopNo=((e,s)=>c("o,a,n,io=0,ia=0,so=1,sa=1",b(e,([e,o])=>`${e}=${o}${s}n;`,["o","a"],"o"))),exports.defop3=((e,s,o)=>c("a,b,c,ia=0,ib=0,ic=0,sa=1,sb=1,sc=1",b(e,([e,r,a])=>`${e}${s}=${r}${o}${a};`,["a","b","c"]))),exports.defopN3=((e,s,o)=>c("a,b,n,ia=0,ib=0,sa=1,sb=1",b(e,([e,r])=>`${e}${s}=${r}${o}n;`,["a","b"]))),exports.defmix=(e=>c("a,b,c,ia=0,ib=0,ic=0,sa=1,sb=1,sc=1",b(e,([e,s,o])=>`${e}+=(${s}-${e})*${o};`,["a","b","c"]))),exports.defmixN=(e=>c("a,b,n,ia=0,ib=0,sa=1,sb=1",b(e,([e,s])=>`${e}+=(${s}-${e})*n;`,["a","b"]))),exports.defmixo=(e=>c("o,a,b,c,io=0,ia=0,ib=0,ic=0,so=1,sa=1,sb=1,sc=1",b(e,([e,s,o,r])=>`${e}=${s}+(${o}-${s})*${r};`,["o","a","b","c"],"o"))),exports.defmixNo=(e=>c("o,a,b,n,io=0,ia=0,ib=0,so=1,sa=1,sb=1",b(e,([e,s,o])=>`${e}=${s}+(${o}-${s})*n;`,["o","a","b"],"o"))),exports.defcommon=(e=>[exports.defop2(e,""),exports.defopN(e,""),...i.mapcat(s=>t.map(o=>s(e,o),"+-*/"),[exports.defop2,exports.defop2o,exports.defopN,exports.defopNo]),...i.mapcat(([s,o])=>[exports.defop3(e,s,o),exports.defopN3(e,s,o)],[["+","*"],["-","*"]]),...t.map(s=>exports.defop1(e,`Math.${s}`),["abs","sign","floor","ceil","sin","cos","sqrt"]),...t.map(s=>exports.defopfn2(e,`Math.${s}`),["pow","min","max"]),exports.defmix(e),exports.defmixN(e),exports.defmixo(e),exports.defmixNo(e)]),exports.declareIndices=((e,s)=>{const o=e=>(function(){return this.buf[this.i+e*(this.s||1)]}),r=e=>(function(s){this.buf[this.i+e*(this.s||1)]=s});s.forEach((s,a)=>{Object.defineProperty(e,a,{get:o(a),set:r(a),enumerable:!0}),Object.defineProperty(e,s,{get:o(a),set:r(a),enumerable:!0})})});
},{"@thi.ng/transducers/func/comp":"9vBN","@thi.ng/transducers/iter/range":"GT77","@thi.ng/transducers/iter/tuples":"BCky","@thi.ng/transducers/rfn/push":"8/nZ","@thi.ng/transducers/transduce":"iqGa","@thi.ng/transducers/xform/map":"WUst","@thi.ng/transducers/xform/mapcat":"pk6b","@thi.ng/transducers/xform/take":"o8VT"}],"aZmO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@thi.ng/math/api"),e=require("@thi.ng/math/eqdelta");function*t(r,e,t=0,o=1){for(;e>0;e--,t+=o)yield r[t]}exports.x=((r,e=0)=>r[e]),exports.y=((r,e=0,t=1)=>r[e+t]),exports.z=((r,e=0,t=1)=>r[e+2*t]),exports.w=((r,e=0,t=1)=>r[e+3*t]),exports.$iter=t,exports.transformVectors1=((r,e,t,o,s,n=0,f=0,u=1,p=1)=>{for(;o>0;o--,n+=s)r(e,t,n,f,u,p);return e}),exports.transformVectors1o=((r,e,t,o,s,n,f,u=0,p=0,i=0,x=1,a=1,c=1)=>{for(;s>0;s--,u+=n,p+=f)r(e,t,o,u,p,i,x,a,c);return e}),exports.transformVectors2=((r,e,t,o,s,n,f=0,u=0,p=1,i=1)=>{for(;o>0;o--,f+=s,u+=n)r(e,t,f,u,p,i);return e}),exports.transformVectors2o=((r,e,t,o,s,n,f,u,p=0,i=0,x=0,a=1,c=1,l=1)=>{for(;s>0;s--,p+=n,i+=f,x+=u)r(e,t,o,p,i,x,a,c,l);return e}),exports.equiv=((r,e,t,o=0,s=0,n=1,f=1)=>{for(;t>0;t--,o+=n,s+=f)if(r[o]!==e[s])return!1;return!0}),exports.eqDelta=((t,o,s,n=r.EPS,f=0,u=0,p=1,i=1)=>{for(;s>0;s--,f+=p,u+=i)if(!e.eqDelta(t[f],o[u],n))return!1;return!0});
},{"@thi.ng/math/api":"zd6y","@thi.ng/math/eqdelta":"SDG2"}],"oJI8":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0});const s=require("@thi.ng/checks/is-arraylike"),i=require("@thi.ng/math/angle"),e=require("@thi.ng/math/api"),r=require("@thi.ng/math/eqdelta"),o=require("@thi.ng/math/interval"),h=require("@thi.ng/math/mix"),u=require("@thi.ng/math/prec"),p=require("@thi.ng/math/step"),n=require("./api"),x=require("./codegen"),a=require("./common");exports.op2=((t,s,i=0,e=1)=>(s[i]=t(s[i]),s[i+e]=t(s[i+e]),s)),exports.op20=((t,s,i=0,e=1)=>(s[i]=t(),s[i+e]=t(),s)),exports.op21=((t,s,i,e=0,r=1)=>(s[e]=t(s[e],i),s[e+r]=t(s[e+r],i),s)),exports.get2=((t,s=0,i=1)=>exports.set2(new t.constructor(2),t,0,s,1,i)),exports.setS2=((t,s,i,e=0,r=1)=>(t[e]=s,t[e+r]=i,t)),exports.randNorm2=((t,s=1,i=0,e=1)=>exports.randMinMax2(t,-s,s,i,e)),exports.randMinMax2=((t,s,i,e=0,r=1)=>{const o=i-s;return exports.op20(()=>s+o*Math.random(),t,e,r)}),exports.jitter2=((t,s,i=0,e=1)=>exports.op2(t=>t+2*Math.random()*s-s,t,i,e)),exports.swizzle2=((t,s,i,e,r=0,o=0,h=1,u=1)=>exports.setS2(t,s[o+i*u],s[o+e*u],r,h)),exports.swap2=((t,s,i=0,e=0,r=1,o=1)=>{let h=t[i];return t[i]=s[e],s[e]=h,e+=o,h=t[i+=r],t[i]=s[e],s[e]=h,t}),exports.equiv2=((t,s,i=0,e=0,r=1,o=1)=>t[i]===s[e]&&t[i+r]===s[e+o]),exports.eqDelta2=((t,s,i=e.EPS,o=0,h=0,u=1,p=1)=>r.eqDelta(t[o],s[h],i)&&r.eqDelta(t[o+u],s[h+p],i)),exports.eqDelta2buf=((t,s,i,r=e.EPS,o=0,h=0,u=1,p=1,n=2,x=2)=>{for(;--i>=0;)if(!exports.eqDelta2(t,s,r,o+i*n,h+i*x,u,p))return!1;return!0}),exports.eqDelta2array=((t,s,i=e.EPS)=>{const r=t.length;if(s.length!==r)return!1;for(let e=0;e<r;e++)if(!exports.eqDelta2(t[e],s[e],i))return!1;return!0}),exports.compare2=((t,s,i,e,r=0,o=0,h=1,u=1)=>{const p=t[r+i*h],n=t[r+e*h],x=s[o+i*u],a=s[o+e*u];return p===x?n===a?0:n<a?-2:2:p<x?-1:1}),exports.collate2=((t,s,i=0,e=1,r=2)=>{for(let o of s)exports.set2(t,o,i,0,e,1),i+=r;return t}),t=x.defcommon(2),exports.set2=t[0],exports.setN2=t[1],exports.add2=t[2],exports.sub2=t[3],exports.mul2=t[4],exports.div2=t[5],exports.add2o=t[6],exports.sub2o=t[7],exports.mul2o=t[8],exports.div2o=t[9],exports.addN2=t[10],exports.subN2=t[11],exports.mulN2=t[12],exports.divN2=t[13],exports.addN2o=t[14],exports.subN2o=t[15],exports.mulN2o=t[16],exports.divN2o=t[17],exports.madd2=t[18],exports.maddN2=t[19],exports.msub2=t[20],exports.msubN2=t[21],exports.abs2=t[22],exports.sign2=t[23],exports.floor2=t[24],exports.ceil2=t[25],exports.sin2=t[26],exports.cos2=t[27],exports.sqrt2=t[28],exports.pow2=t[29],exports.min2=t[30],exports.max2=t[31],exports.mix2=t[32],exports.mixN2=t[33],exports.mix2o=t[34],exports.mixN2o=t[35],exports.neg2=((t,s=0,i=1)=>exports.mulN2(t,-1,s,i)),exports.fract2=((t,s=0,i=1)=>exports.op2(u.fract,t,s,i)),exports.powN2=((t,s,i=0,e=1)=>exports.op21(Math.pow,t,s,i,e)),exports.dot2=((t,s,i=0,e=0,r=1,o=1)=>t[i]*s[e]+t[i+r]*s[e+o]),exports.cross2=((t,s,i=0,e=0,r=1,o=1)=>t[i]*s[e+o]-t[i+r]*s[e]),exports.mixBilinear2=((t,s,i,e,r,o,u=0,p=0,n=0,x=0,a=1,b=1,f=1,m=1)=>(t[u]=h.mixBilinear(t[u],s[p],i[n],e[x],r,o),t[u+a]=h.mixBilinear(t[u+a],s[p+b],i[n+f],e[x+m],r,o),t)),exports.clamp2=((t,s,i,e=0,r=0,o=0,h=1,u=1,p=1)=>exports.max2(exports.min2(t,i,e,o,h,p),s,e,r,h,u)),exports.step2=((t,s,i=0,e=0,r=1,o=1)=>(t[i]=p.step(s[e],t[i]),t[i+r]=p.step(s[e+o],t[i+r]),t)),exports.smoothStep2=((t,s,i,e=0,r=0,o=0,h=1,u=1,n=1)=>(t[e]=p.smoothStep(s[r],i[o],t[e]),t[e+h]=p.smoothStep(s[r+u],i[o+n],t[e+h]),t)),exports.magSq2=((t,s=0,i=1)=>{const e=t[s],r=t[s+i];return e*e+r*r}),exports.mag2=((t,s=0,i=1)=>Math.sqrt(exports.magSq2(t,s,i))),exports.distSq2=((t,s,i=0,e=0,r=1,o=1)=>{const h=t[i]-s[e],u=t[i+r]-s[e+o];return h*h+u*u}),exports.dist2=((t,s,i=0,e=0,r=1,o=1)=>Math.sqrt(exports.distSq2(t,s,i,e,r,o))),exports.distManhattan2=((t,s,i=0,e=0,r=1,o=1)=>Math.abs(t[i]-s[e])+Math.abs(t[i+r]-s[e+o])),exports.distChebyshev2=((t,s,i=0,e=0,r=1,o=1)=>Math.max(Math.abs(t[i]-s[e]),Math.abs(t[i+r]-s[e+o]))),exports.normalize2=((t,s=1,i=0,r=1)=>{const o=exports.mag2(t,i,r);return o>=e.EPS&&exports.mulN2(t,s/o,i,r),t}),exports.limit2=((t,s,i=0,e=1)=>{const r=exports.mag2(t,i,e);return r>=s&&exports.mulN2(t,s/r,i,e),t}),exports.reflect2=((t,s,i=0,e=0,r=1,o=1)=>exports.maddN2(t,s,-2*exports.dot2(t,s,i,e,r,o),i,e,r,o)),exports.refract2=((t,s,i,e=0,r=0,o=1,h=1)=>{const u=exports.dot2(t,s,e,r,o,h),p=1-i*i*(1-u*u);return p<0?exports.setN2(t,0,e,o):exports.msubN2(exports.mulN2(t,i,e,o),s,i*u+Math.sqrt(p),e,r,o,h)}),exports.perpendicularLeft2=((t,s=0,i=1)=>{const e=t[s];return t[s]=-t[s+i],t[s+i]=e,t}),exports.perpendicularRight2=((t,s=0,i=1)=>{const e=-t[s];return t[s]=t[s+i],t[s+i]=e,t}),exports.rotate2=((t,s,i=0,e=1)=>{const r=Math.sin(s),o=Math.cos(s),h=t[i],u=t[i+e];return exports.setS2(t,h*o-u*r,h*r+u*o,i,e)}),exports.rotateAroundPoint2=((t,s,i,e=0,r=0,o=1,h=1)=>{const u=t[e]-s[r],p=t[e+o]-s[r+h],n=Math.sin(i),x=Math.cos(i);return exports.setS2(t,u*x-p*n+s[r],u*n+p*x+s[r+h],e,o)}),exports.heading2=((t,s=0,e=1)=>i.atan2Abs(t[s+e],t[s])),exports.angleRatio2=((t,s,i=0,e=0,r=1,o=1)=>exports.dot2(t,s,i,e,r,o)/(exports.mag2(t,i,r)*exports.mag2(s,e,o))),exports.angleBetween2=((t,s,i=!1,e=0,r=0,o=1,h=1)=>i?(t[e]*s[r+h]<t[e+o]*s[r]?-1:1)*Math.acos(exports.angleRatio2(t,s,e,r,o,h)):Math.acos(exports.dot2(t,s,e,r,o,h))),exports.bisect2=((t,s,i=0,r=0,o=1,h=1)=>{const u=(exports.heading2(t,i,o)+exports.heading2(s,r,h))/2;return u<=e.HALF_PI?u:e.PI-u}),exports.toPolar2=((t,s=0,i=1)=>{const e=t[s],r=t[s+i];return exports.setS2(t,Math.sqrt(e*e+r*r),Math.atan2(r,e),s,i)}),exports.toCartesian2=((t,s=n.ZERO4,i=0,e=0,r=1,o=1)=>{const h=t[i],u=t[i+r];return exports.setS2(t,h*Math.cos(u)+s[e],h*Math.sin(u)+s[e+o],i,r)}),exports.minorAxis2=((t,s=0,i=1)=>o.min2id(Math.abs(t[s]),Math.abs(t[s+i]))),exports.majorAxis2=((t,s=0,i=1)=>o.max2id(Math.abs(t[s]),Math.abs(t[s+i]))),exports.vec2=((t=0,s=0)=>new b([t,s])),exports.asVec2=(t=>t instanceof b?t:new b([t[0]||0,t[1]||0]));class b{constructor(t,s=0,i=1){this.buf=t||[0,0],this.i=s,this.s=i}static mapBuffer(t,s=t.length>>1,i=0,e=1,r=2){const o=[];for(;--s>=0;)o.push(new b(t,i,e)),i+=r;return o}static intoBuffer(t,s,i=0,e=1,r=2){for(let o of s)exports.set2(t,o.buf,i,o.i,e,o.s),i+=r;return t}static swizzle(t,s,i){return new b([]).swizzle(t,s,i)}static mixBilinear(t,s,i,e,r,o){return new b(exports.mixBilinear2(exports.get2(t.buf,t.i,t.s),s.buf,i.buf,e.buf,r,o,0,s.i,i.i,e.i,1,s.s,i.s,e.s))}static randNorm(t=1){return new b(exports.randNorm2([],t))}static random(t,s){return new b(exports.randMinMax2([],t,s))}static comparator(t,s){return(i,e)=>i.compare(e,t,s)}[Symbol.iterator](){return a.$iter(this.buf,2,this.i,this.s)}array(){return exports.get2(this.buf,this.i,this.s)}get length(){return 2}copy(){return new b(exports.get2(this.buf,this.i,this.s))}empty(){return new b}equiv(t){return t instanceof b?exports.equiv2(this.buf,t.buf,this.i,t.i,this.s,t.s):!(!s.isArrayLike(t)||2!==t.length)&&exports.equiv2(this.buf,t,this.i,0,this.s,1)}eqDelta(t,s=e.EPS){return exports.eqDelta2(this.buf,t.buf,s,this.i,t.i,this.s,t.s)}compare(t,s=0,i=1){return exports.compare2(this.buf,t.buf,s,i,this.i,t.i,this.s,t.s)}set(t){return exports.set2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}setN(t){return exports.setN2(this.buf,t,this.i,this.s),this}setS(t,s){return exports.setS2(this.buf,t,s,this.i,this.s),this}jitter(t=1){return exports.jitter2(this.buf,t,this.i,this.s),this}swizzle(t,s,i){return exports.swizzle2(this.buf,t.buf,s,i,this.i,t.i,this.s,t.s),this}swap(t){return exports.swap2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}add(t){return exports.add2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}sub(t){return exports.sub2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}mul(t){return exports.mul2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}div(t){return exports.div2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}addN(t){return exports.addN2(this.buf,t,this.i,this.s),this}subN(t){return exports.subN2(this.buf,t,this.i,this.s),this}mulN(t){return exports.mulN2(this.buf,t,this.i,this.s),this}divN(t){return exports.divN2(this.buf,t,this.i,this.s),this}addNew(t,s){return!s&&(s=new b([])),exports.add2o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}subNew(t,s){return!s&&(s=new b([])),exports.sub2o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}mulNew(t,s){return!s&&(s=new b([])),exports.mul2o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}divNew(t,s){return!s&&(s=new b([])),exports.div2o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}addNewN(t,s){return!s&&(s=new b([])),exports.addN2o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}subNewN(t,s){return!s&&(s=new b([])),exports.subN2o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}mulNewN(t,s){return!s&&(s=new b([])),exports.mulN2o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}divNewN(t,s){return!s&&(s=new b([])),exports.divN2o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}maddNew(t,s,i){return i=i?i.set(this):this.copy(),exports.madd2(i.buf,t.buf,s.buf,i.i,t.i,s.i,i.s,t.s,s.s),i}maddNewN(t,s,i){return i=i?i.set(this):this.copy(),exports.maddN2(i.buf,t.buf,s,i.i,t.i,i.s,t.s),i}msubNew(t,s,i){return i=i?i.set(this):this.copy(),exports.msub2(i.buf,t.buf,s.buf,i.i,t.i,s.i,i.s,t.s,s.s),i}msubNewN(t,s,i){return i=i?i.set(this):this.copy(),exports.msubN2(i.buf,t.buf,s,i.i,t.i,i.s,t.s),i}mixNew(t,s,i){return!i&&(i=new b([])),exports.mix2o(i.buf,this.buf,t.buf,s.buf,i.i,this.i,t.i,s.i,i.s,this.s,t.s,s.s),i}mixNewN(t,s=.5,i){return!i&&(i=new b([])),exports.mixN2o(i.buf,this.buf,t.buf,s,i.i,this.i,t.i,i.s,this.s,t.s),i}neg(){return exports.mulN2(this.buf,-1,this.i,this.s),this}abs(){return exports.abs2(this.buf,this.i,this.s),this}sign(){return exports.sign2(this.buf,this.i,this.s),this}floor(){return exports.floor2(this.buf,this.i,this.s),this}ceil(){return exports.ceil2(this.buf,this.i,this.s),this}fract(){return exports.fract2(this.buf,this.i,this.s),this}sqrt(){return exports.sqrt2(this.buf,this.i,this.s),this}pow(t){return exports.pow2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}powN(t){return exports.powN2(this.buf,t,this.i,this.s),this}sin(){return exports.sin2(this.buf,this.i,this.s),this}cos(){return exports.cos2(this.buf,this.i,this.s),this}madd(t,s){return exports.madd2(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}maddN(t,s){return exports.maddN2(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}msub(t,s){return exports.msub2(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}msubN(t,s){return exports.msubN2(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}mix(t,s){return exports.mix2(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}mixN(t,s=.5){return exports.mixN2(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}min(t){return exports.min2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}max(t){return exports.max2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}clamp(t,s){return exports.clamp2(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}minorAxis(){return exports.minorAxis2(this.buf,this.i,this.s)}majorAxis(){return exports.majorAxis2(this.buf,this.i,this.s)}step(t){return exports.step2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}smoothStep(t,s){return exports.smoothStep2(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}dot(t){return exports.dot2(this.buf,t.buf,this.i,t.i,this.s,t.s)}cross(t){return exports.cross2(this.buf,t.buf,this.i,t.i,this.s,t.s)}mag(){return exports.mag2(this.buf,this.i,this.s)}magSq(){return exports.magSq2(this.buf,this.i,this.s)}dist(t){return exports.dist2(this.buf,t.buf,this.i,t.i,this.s,t.s)}distSq(t){return exports.distSq2(this.buf,t.buf,this.i,t.i,this.s,t.s)}distManhattan(t){return exports.distManhattan2(this.buf,t.buf,this.i,t.i,this.s,t.s)}distChebyshev(t){return exports.distChebyshev2(this.buf,t.buf,this.i,t.i,this.s,t.s)}normalize(t=1){return exports.normalize2(this.buf,t,this.i,this.s),this}limit(t){return exports.limit2(this.buf,t,this.i,this.s),this}reflect(t){return exports.reflect2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}refract(t,s){return exports.refract2(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}rotate(t){return exports.rotate2(this.buf,t,this.i,this.s),this}rotateAroundPoint(t,s){return exports.rotateAroundPoint2(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}heading(){return exports.heading2(this.buf,this.i,this.s)}angleBetween(t,s=!1){return exports.angleBetween2(this.buf,t.buf,s,this.i,t.i,this.s,t.s)}bisect(t){return exports.bisect2(this.buf,t.buf,this.i,t.i,this.s,t.s)}perpendicularLeft(){return exports.perpendicularLeft2(this.buf,this.i,this.s),this}perpendicularRight(){return exports.perpendicularRight2(this.buf,this.i,this.s),this}toPolar(){return exports.toPolar2(this.buf,this.i,this.s),this}toCartesian(t=b.ZERO){return exports.toCartesian2(this.buf,t.buf,this.i,t.i,this.s,t.s),this}toString(){return`[${this.buf[this.i]}, ${this.buf[this.i+this.s]}]`}toJSON(){return this.array()}}b.ZERO=Object.freeze(new b(n.ZERO4)),b.ONE=Object.freeze(new b(n.ONE4)),b.MIN=Object.freeze(new b(n.MIN4)),b.MAX=Object.freeze(new b(n.MAX4)),b.X_AXIS=Object.freeze(new b(n.X4)),b.Y_AXIS=Object.freeze(new b(n.Y4)),exports.Vec2=b,x.declareIndices(b.prototype,["x","y"]);
},{"@thi.ng/checks/is-arraylike":"aMkR","@thi.ng/math/angle":"uNzl","@thi.ng/math/api":"zd6y","@thi.ng/math/eqdelta":"SDG2","@thi.ng/math/interval":"PBUS","@thi.ng/math/mix":"B0dQ","@thi.ng/math/prec":"UVR2","@thi.ng/math/step":"9QhS","./api":"ZvJB","./codegen":"i8Zj","./common":"aZmO"}],"K9zr":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0});const s=require("@thi.ng/checks/is-arraylike"),i=require("@thi.ng/math/angle"),e=require("@thi.ng/math/api"),r=require("@thi.ng/math/eqdelta"),o=require("@thi.ng/math/interval"),h=require("@thi.ng/math/mix"),u=require("@thi.ng/math/prec"),p=require("@thi.ng/math/step"),n=require("./api"),x=require("./codegen"),a=require("./common"),b=require("./vec2");exports.op3=((t,s,i=0,e=1)=>(s[i]=t(s[i]),s[i+e]=t(s[i+e]),s[i+2*e]=t(s[i+2*e]),s)),exports.op30=((t,s,i=0,e=1)=>(s[i]=t(),s[i+e]=t(),s[i+2*e]=t(),s)),exports.op31=((t,s,i,e=0,r=1)=>(s[e]=t(s[e],i),s[e+r]=t(s[e+r],i),s[e+2*r]=t(s[e+2*r],i),s)),exports.get3=((t,s=0,i=1)=>exports.set3(new t.constructor(3),t,0,s,1,i)),exports.setS3=((t,s,i,e,r=0,o=1)=>(t[r]=s,t[r+o]=i,t[r+2*o]=e,t)),exports.randNorm3=((t,s=1,i=0,e=1)=>exports.randMinMax3(t,-s,s,i,e)),exports.randMinMax3=((t,s,i,e=0,r=1)=>{const o=i-s;return exports.op30(()=>s+o*Math.random(),t,e,r)}),exports.jitter3=((t,s,i=0,e=1)=>exports.op3(t=>t+2*Math.random()*s-s,t,i,e)),exports.swizzle3=((t,s,i,e,r,o=0,h=0,u=1,p=1)=>exports.setS3(t,s[h+i*p],s[h+e*p],s[h+r*p],o,u)),exports.swap3=((t,s,i=0,e=0,r=1,o=1)=>{let h=t[i];return t[i]=s[e],s[e]=h,e+=o,h=t[i+=r],t[i]=s[e],s[e]=h,e+=o,h=t[i+=r],t[i]=s[e],s[e]=h,t}),exports.equiv3=((t,s,i=0,e=0,r=1,o=1)=>t[i]===s[e]&&t[i+r]===s[e+o]&&t[i+2*r]===s[e+2*o]),exports.eqDelta3=((t,s,i=e.EPS,o=0,h=0,u=1,p=1)=>r.eqDelta(t[o],s[h],i)&&r.eqDelta(t[o+u],s[h+p],i)&&r.eqDelta(t[o+2*u],s[h+2*p],i)),exports.eqDelta3buf=((t,s,i,r=e.EPS,o=0,h=0,u=1,p=1,n=3,x=3)=>{for(;--i>=0;)if(!exports.eqDelta3(t,s,r,o+i*n,h+i*x,u,p))return!1;return!0}),exports.eqDelta3array=((t,s,i=e.EPS)=>{const r=t.length;if(s.length!==r)return!1;for(let e=0;e<r;e++)if(!exports.eqDelta3(t[e],s[e],i))return!1;return!0}),exports.compare3=((t,s,i,e,r,o=0,h=0,u=1,p=1)=>{const n=t[o+i*u],x=t[o+e*u],a=t[o+r*u],b=s[h+i*p],f=s[h+e*p],m=s[h+r*p];return n===b?x===f?a===m?0:a<m?-3:3:x<f?-2:2:n<b?-1:1}),exports.collate3=((t,s,i=0,e=1,r=3)=>{for(let o of s)exports.set3(t,o,i,0,e,1),i+=r;return t}),t=x.defcommon(3),exports.set3=t[0],exports.setN3=t[1],exports.add3=t[2],exports.sub3=t[3],exports.mul3=t[4],exports.div3=t[5],exports.add3o=t[6],exports.sub3o=t[7],exports.mul3o=t[8],exports.div3o=t[9],exports.addN3=t[10],exports.subN3=t[11],exports.mulN3=t[12],exports.divN3=t[13],exports.addN3o=t[14],exports.subN3o=t[15],exports.mulN3o=t[16],exports.divN3o=t[17],exports.madd3=t[18],exports.maddN3=t[19],exports.msub3=t[20],exports.msubN3=t[21],exports.abs3=t[22],exports.sign3=t[23],exports.floor3=t[24],exports.ceil3=t[25],exports.sin3=t[26],exports.cos3=t[27],exports.sqrt3=t[28],exports.pow3=t[29],exports.min3=t[30],exports.max3=t[31],exports.mix3=t[32],exports.mixN3=t[33],exports.mix3o=t[34],exports.mixN3o=t[35],exports.neg3=((t,s=0,i=1)=>exports.mulN3(t,-1,s,i)),exports.fract3=((t,s=0,i=1)=>exports.op3(u.fract,t,s,i)),exports.powN3=((t,s,i=0,e=1)=>exports.op31(Math.pow,t,s,i,e)),exports.dot3=((t,s,i=0,e=0,r=1,o=1)=>t[i]*s[e]+t[i+r]*s[e+o]+t[i+2*r]*s[e+2*o]),exports.cross3=((t,s,i=0,e=0,r=1,o=1)=>{const h=i+r,u=i+2*r,p=e+o,n=e+2*o,x=t[h]*s[n]-t[u]*s[p],a=t[u]*s[e]-t[i]*s[n];return t[u]=t[i]*s[p]-t[h]*s[e],t[h]=a,t[i]=x,t}),exports.orthoNormal3=((t,s,i,e=0,r=0,o=0,h=1,u=1,p=1)=>exports.cross3(exports.sub3(exports.get3(i,o,p),t,0,e,1,h),exports.sub3(exports.get3(s,r,u),t,0,e,1,h))),exports.mixBilinear3=((t,s,i,e,r,o,u=0,p=0,n=0,x=0,a=1,b=1,f=1,m=1)=>(t[u]=h.mixBilinear(t[u],s[p],i[n],e[x],r,o),t[u+a]=h.mixBilinear(t[u+a],s[p+b],i[n+f],e[x+m],r,o),t[u+2*a]=h.mixBilinear(t[u+2*a],s[p+2*b],i[n+2*f],e[x+2*m],r,o),t)),exports.clamp3=((t,s,i,e=0,r=0,o=0,h=1,u=1,p=1)=>exports.max3(exports.min3(t,i,e,o,h,p),s,e,r,h,u)),exports.step3=((t,s,i=0,e=0,r=1,o=1)=>(t[i]=p.step(s[e],t[i]),t[i+r]=p.step(s[e+o],t[i+r]),t[i+2*r]=p.step(s[e+2*o],t[i+2*r]),t)),exports.smoothStep3=((t,s,i,e=0,r=0,o=0,h=1,u=1,n=1)=>(t[e]=p.smoothStep(s[r],i[o],t[e]),t[e+h]=p.smoothStep(s[r+u],i[o+n],t[e+h]),t[e+2*h]=p.smoothStep(s[r+2*u],i[o+2*n],t[e+2*h]),t)),exports.magSq3=((t,s=0,i=1)=>{const e=t[s],r=t[s+i],o=t[s+2*i];return e*e+r*r+o*o}),exports.mag3=((t,s=0,i=1)=>Math.sqrt(exports.magSq3(t,s,i))),exports.distSq3=((t,s,i=0,e=0,r=1,o=1)=>{const h=t[i]-s[e],u=t[i+r]-s[e+o],p=t[i+2*r]-s[e+2*o];return h*h+u*u+p*p}),exports.dist3=((t,s,i=0,e=0,r=1,o=1)=>Math.sqrt(exports.distSq3(t,s,i,e,r,o))),exports.distManhattan3=((t,s,i=0,e=0,r=1,o=1)=>Math.abs(t[i]-s[e])+Math.abs(t[i+r]-s[e+o])+Math.abs(t[i+2*r]-s[e+2*o])),exports.distChebyshev3=((t,s,i=0,e=0,r=1,o=1)=>Math.max(Math.abs(t[i]-s[e]),Math.abs(t[i+r]-s[e+o]),Math.abs(t[i+2*r]-s[e+2*o]))),exports.normalize3=((t,s=1,i=0,r=1)=>{const o=exports.mag3(t,i,r);return o>=e.EPS&&exports.mulN3(t,s/o,i,r),t}),exports.limit3=((t,s,i=0,e=1)=>{const r=exports.mag3(t,i,e);return r>=s&&exports.mulN3(t,s/r,i,e),t}),exports.reflect3=((t,s,i=0,e=0,r=1,o=1)=>exports.maddN3(t,s,-2*exports.dot3(t,s,i,e,r,o),i,e,r,o)),exports.refract3=((t,s,i,e=0,r=0,o=1,h=1)=>{const u=exports.dot3(t,s,e,r,o,h),p=1-i*i*(1-u*u);return p<0?exports.setN3(t,0,e,o):exports.msubN3(exports.mulN3(t,i,e,o),s,i*u+Math.sqrt(p),e,r,o,h)}),exports.rotateX3=((t,s,i=0,e=1)=>b.rotate2(t,s,i+e,e)),exports.rotateY3=((t,s,i=0,e=1)=>b.rotate2(t,s,i+2*e,-2*e)),exports.rotateZ3=b.rotate2,exports.rotateAroundAxis3=((t,s,i,e=0,r=0,o=1,h=1)=>{const u=t[e],p=t[e+o],n=t[e+2*o],x=s[r],a=s[r+h],b=s[r+2*h],f=x*u,m=x*p,d=x*n,l=a*u,c=a*p,N=a*n,w=b*u,g=b*p,M=b*n,q=f+c+M,S=Math.sin(i),v=Math.cos(i);return exports.setS3(t,x*q+(u*(a*a+b*b)-x*(c+M))*v+(-g+N)*S,a*q+(p*(x*x+b*b)-a*(f+M))*v+(w-d)*S,b*q+(n*(x*x+a*a)-b*(f+c))*v+(-l+m)*S,e,o)}),exports.headingXY3=b.heading2,exports.headingXZ3=((t,s=0,e=1)=>i.atan2Abs(t[s+2*e],t[s])),exports.headingYZ3=((t,s=0,e=1)=>i.atan2Abs(t[s+2*e],t[s+e])),exports.angleRatio3=((t,s,i=0,e=0,r=1,o=1)=>exports.dot3(t,s,i,e,r,o)/(exports.mag3(t,i,r)*exports.mag3(s,e,o))),exports.angleBetween3=((t,s,i=!1,e=0,r=0,o=1,h=1)=>i?(t[e]*s[r+h]<t[e+o]*s[r]?-1:1)*Math.acos(exports.angleRatio3(t,s,e,r,o,h)):Math.acos(exports.dot3(t,s,e,r,o,h))),exports.toPolar3=((t,s=0,i=1)=>{const e=t[s],r=t[s+i],o=t[s+2*i],h=Math.sqrt(e*e+r*r+o*o);return exports.setS3(t,h,Math.asin(o/h),Math.atan2(r,e),s,i)}),exports.toCartesian3=((t,s=n.ZERO4,i=0,e=0,r=1,o=1)=>{const h=t[i],u=t[i+r],p=t[i+2*r],x=Math.cos(u);return exports.setS3(t,h*x*Math.cos(p)+s[e],h*x*Math.sin(p)+s[e+o],h*Math.sin(u)+s[e+2*o],i,r)}),exports.toCylindrical3=b.toPolar2,exports.fromCylindrical3=((t,s=n.ZERO4,i=0,e=0,r=1,o=1)=>(b.toCartesian2(t,s,i,e,r,o),t[i+2*r]+=s[e+2*o],t)),exports.minorAxis3=((t,s=0,i=1)=>o.min3id(Math.abs(t[s]),Math.abs(t[s+i]),Math.abs(t[s+2*i]))),exports.majorAxis3=((t,s=0,i=1)=>o.max3id(Math.abs(t[s]),Math.abs(t[s+i]),Math.abs(t[s+2*i]))),exports.vec3=((t=0,s=0,i=0)=>new f([t,s,i])),exports.asVec3=(t=>t instanceof f?t:new f([t[0]||0,t[1]||0,t[2]||0]));class f{constructor(t,s=0,i=1){this.buf=t||[0,0,0],this.i=s,this.s=i}static mapBuffer(t,s=t.length/3|0,i=0,e=1,r=3){const o=[];for(;--s>=0;)o.push(new f(t,i,e)),i+=r;return o}static intoBuffer(t,s,i=0,e=1,r=3){for(let o of s)exports.set3(t,o.buf,i,o.i,e,o.s),i+=r;return t}static swizzle(t,s,i,e){return new f([]).swizzle(t,s,i,e)}static mixBilinear(t,s,i,e,r,o){return new f(exports.mixBilinear3(exports.get3(t.buf,t.i,t.s),s.buf,i.buf,e.buf,r,o,0,s.i,i.i,e.i,1,s.s,i.s,e.s))}static orthoNormal3(t,s,i){return new f(exports.orthoNormal3(t.buf,s.buf,i.buf,t.i,s.i,i.i,t.s,s.s,i.s))}static randNorm(t=1){return new f(exports.randNorm3([],t))}static random(t,s){return new f(exports.randMinMax3([],t,s))}static comparator(t,s,i){return(e,r)=>e.compare(r,t,s,i)}[Symbol.iterator](){return a.$iter(this.buf,3,this.i,this.s)}array(){return exports.get3(this.buf,this.i,this.s)}get length(){return 3}copy(){return new f(exports.get3(this.buf,this.i,this.s))}empty(){return new f}equiv(t){return t instanceof f?exports.equiv3(this.buf,t.buf,this.i,t.i,this.s,t.s):!(!s.isArrayLike(t)||3!==t.length)&&exports.equiv3(this.buf,t,this.i,0,this.s,1)}eqDelta(t,s=e.EPS){return exports.eqDelta3(this.buf,t.buf,s,this.i,t.i,this.s,t.s)}compare(t,s=0,i=1,e=2){return exports.compare3(this.buf,t.buf,s,i,e,this.i,t.i,this.s,t.s)}set(t){return exports.set3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}setN(t){return exports.setN3(this.buf,t,this.i,this.s),this}setS(t,s,i){return exports.setS3(this.buf,t,s,i,this.i,this.s),this}jitter(t=1){return exports.jitter3(this.buf,t,this.i,this.s),this}swizzle(t,s,i,e){return exports.swizzle3(this.buf,t.buf,s,i,e,this.i,t.i,this.s,t.s),this}swap(t){return exports.swap3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}add(t){return exports.add3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}sub(t){return exports.sub3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}mul(t){return exports.mul3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}div(t){return exports.div3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}addN(t){return exports.addN3(this.buf,t,this.i,this.s),this}subN(t){return exports.subN3(this.buf,t,this.i,this.s),this}mulN(t){return exports.mulN3(this.buf,t,this.i,this.s),this}divN(t){return exports.divN3(this.buf,t,this.i,this.s),this}addNew(t,s){return!s&&(s=new f([])),exports.add3o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}subNew(t,s){return!s&&(s=new f([])),exports.sub3o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}mulNew(t,s){return!s&&(s=new f([])),exports.mul3o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}divNew(t,s){return!s&&(s=new f([])),exports.div3o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}addNewN(t,s){return!s&&(s=new f([])),exports.addN3o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}subNewN(t,s){return!s&&(s=new f([])),exports.subN3o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}mulNewN(t,s){return!s&&(s=new f([])),exports.mulN3o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}divNewN(t,s){return!s&&(s=new f([])),exports.divN3o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}maddNew(t,s,i){return i=i?i.set(this):this.copy(),exports.madd3(i.buf,t.buf,s.buf,i.i,t.i,s.i,i.s,t.s,s.s),i}maddNewN(t,s,i){return i=i?i.set(this):this.copy(),exports.maddN3(i.buf,t.buf,s,i.i,t.i,i.s,t.s),i}msubNew(t,s,i){return i=i?i.set(this):this.copy(),exports.msub3(i.buf,t.buf,s.buf,i.i,t.i,s.i,i.s,t.s,s.s),i}msubNewN(t,s,i){return i=i?i.set(this):this.copy(),exports.msubN3(i.buf,t.buf,s,i.i,t.i,i.s,t.s),i}mixNew(t,s,i){return!i&&(i=new f([])),exports.mix3o(i.buf,this.buf,t.buf,s.buf,i.i,this.i,t.i,s.i,i.s,this.s,t.s,s.s),i}mixNewN(t,s=.5,i){return!i&&(i=new f([])),exports.mixN3o(i.buf,this.buf,t.buf,s,i.i,this.i,t.i,i.s,this.s,t.s),i}neg(){return exports.mulN3(this.buf,-1,this.i,this.s),this}abs(){return exports.abs3(this.buf,this.i,this.s),this}sign(){return exports.sign3(this.buf,this.i,this.s),this}floor(){return exports.floor3(this.buf,this.i,this.s),this}ceil(){return exports.ceil3(this.buf,this.i,this.s),this}fract(){return exports.fract3(this.buf,this.i,this.s),this}sqrt(){return exports.sqrt3(this.buf,this.i,this.s),this}pow(t){return exports.pow3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}powN(t){return exports.powN3(this.buf,t,this.i,this.s),this}sin(){return exports.sin3(this.buf,this.i,this.s),this}cos(){return exports.cos3(this.buf,this.i,this.s),this}madd(t,s){return exports.madd3(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}maddN(t,s){return exports.maddN3(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}msub(t,s){return exports.msub3(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}msubN(t,s){return exports.msubN3(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}mix(t,s){return exports.mix3(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}mixN(t,s=.5){return exports.mixN3(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}min(t){return exports.min3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}max(t){return exports.max3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}clamp(t,s){return exports.clamp3(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}minorAxis(){return exports.minorAxis3(this.buf,this.i,this.s)}majorAxis(){return exports.majorAxis3(this.buf,this.i,this.s)}step(t){return exports.step3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}smoothStep(t,s){return exports.smoothStep3(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}dot(t){return exports.dot3(this.buf,t.buf,this.i,t.i,this.s,t.s)}cross(t){return exports.cross3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}orthoNormal(t){return this.cross(t).normalize()}mag(){return exports.mag3(this.buf,this.i,this.s)}magSq(){return exports.magSq3(this.buf,this.i,this.s)}dist(t){return exports.dist3(this.buf,t.buf,this.i,t.i,this.s,t.s)}distSq(t){return exports.distSq3(this.buf,t.buf,this.i,t.i,this.s,t.s)}distManhattan(t){return exports.distManhattan3(this.buf,t.buf,this.i,t.i,this.s,t.s)}distChebyshev(t){return exports.distChebyshev3(this.buf,t.buf,this.i,t.i,this.s,t.s)}normalize(t=1){return exports.normalize3(this.buf,t,this.i,this.s),this}limit(t){return exports.limit3(this.buf,t,this.i,this.s),this}reflect(t){return exports.reflect3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}refract(t,s){return exports.refract3(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}rotateX(t){return exports.rotateX3(this.buf,t,this.i,this.s),this}rotateY(t){return exports.rotateY3(this.buf,t,this.i,this.s),this}rotateZ(t){return exports.rotateZ3(this.buf,t,this.i,this.s),this}rotateAroundAxis(t,s){return exports.rotateAroundAxis3(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}headingXY(){return exports.headingXY3(this.buf,this.i,this.s)}headingXZ(){return exports.headingXZ3(this.buf,this.i,this.s)}headingYZ(){return exports.headingYZ3(this.buf,this.i,this.s)}angleBetween(t,s=!1){return exports.angleBetween3(this.buf,t.buf,s,this.i,t.i,this.s,t.s)}toPolar(){return exports.toPolar3(this.buf,this.i,this.s),this}toCartesian(t=f.ZERO){return exports.toCartesian3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}toCylindrical(){return exports.toCylindrical3(this.buf,this.i,this.s),this}fromCylindrical(t=f.ZERO){return exports.fromCylindrical3(this.buf,t.buf,this.i,t.i,this.s,t.s),this}toString(){const t=this.i,s=this.s;return`[${this.buf[t]}, ${this.buf[t+s]}, ${this.buf[t+2*s]}]`}toJSON(){return this.array()}}f.ZERO=Object.freeze(new f(n.ZERO4)),f.ONE=Object.freeze(new f(n.ONE4)),f.MIN=Object.freeze(new f(n.MIN4)),f.MAX=Object.freeze(new f(n.MAX4)),f.X_AXIS=Object.freeze(new f(n.X4)),f.Y_AXIS=Object.freeze(new f(n.Y4)),f.Z_AXIS=Object.freeze(new f(n.Z4)),exports.Vec3=f,x.declareIndices(f.prototype,["x","y","z"]);
},{"@thi.ng/checks/is-arraylike":"aMkR","@thi.ng/math/angle":"uNzl","@thi.ng/math/api":"zd6y","@thi.ng/math/eqdelta":"SDG2","@thi.ng/math/interval":"PBUS","@thi.ng/math/mix":"B0dQ","@thi.ng/math/prec":"UVR2","@thi.ng/math/step":"9QhS","./api":"ZvJB","./codegen":"i8Zj","./common":"aZmO","./vec2":"oJI8"}],"Lylz":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0});const s=require("@thi.ng/checks/is-arraylike"),i=require("@thi.ng/math/api"),e=require("@thi.ng/math/eqdelta"),r=require("@thi.ng/math/interval"),h=require("@thi.ng/math/mix"),o=require("@thi.ng/math/prec"),u=require("@thi.ng/math/step"),p=require("./api"),x=require("./codegen"),n=require("./common");exports.op4=((t,s,i=0,e=1)=>(s[i]=t(s[i]),s[i+e]=t(s[i+e]),s[i+2*e]=t(s[i+2*e]),s[i+3*e]=t(s[i+3*e]),s)),exports.op40=((t,s,i=0,e=1)=>(s[i]=t(),s[i+e]=t(),s[i+2*e]=t(),s[i+3*e]=t(),s)),exports.op41=((t,s,i,e=0,r=1)=>(s[e]=t(s[e],i),s[e+r]=t(s[e+r],i),s[e+2*r]=t(s[e+2*r],i),s[e+3*r]=t(s[e+3*r],i),s)),exports.get4=((t,s=0,i=1)=>exports.set4(new t.constructor(4),t,0,s,1,i)),exports.setS4=((t,s,i,e,r,h=0,o=1)=>(t[h]=s,t[h+o]=i,t[h+2*o]=e,t[h+3*o]=r,t)),exports.randNorm4=((t,s=1,i=0,e=1)=>exports.randMinMax4(t,-s,s,i,e)),exports.randMinMax4=((t,s,i,e=0,r=1)=>{const h=i-s;return exports.op40(()=>s+h*Math.random(),t,e,r)}),exports.jitter4=((t,s,i=0,e=1)=>exports.op4(t=>t+2*Math.random()*s-s,t,i,e)),exports.swizzle4=((t,s,i,e,r,h,o=0,u=0,p=1,x=1)=>exports.setS4(t,s[u+i*x],s[u+e*x],s[u+r*x],s[u+h*x],o,p)),exports.swap4=((t,s,i=0,e=0,r=1,h=1)=>{let o=t[i];return t[i]=s[e],s[e]=o,e+=h,o=t[i+=r],t[i]=s[e],s[e]=o,e+=h,o=t[i+=r],t[i]=s[e],s[e]=o,e+=h,o=t[i+=r],t[i]=s[e],s[e]=o,t}),exports.equiv4=((t,s,i=0,e=0,r=1,h=1)=>t[i]===s[e]&&t[i+r]===s[e+h]&&t[i+2*r]===s[e+2*h]&&t[i+3*r]===s[e+3*h]),exports.eqDelta4=((t,s,r=i.EPS,h=0,o=0,u=1,p=1)=>e.eqDelta(t[h],s[o],r)&&e.eqDelta(t[h+u],s[o+p],r)&&e.eqDelta(t[h+2*u],s[o+2*p],r)&&e.eqDelta(t[h+3*u],s[o+3*p],r)),exports.eqDelta4buf=((t,s,e,r=i.EPS,h=0,o=0,u=1,p=1,x=4,n=4)=>{for(;--e>=0;)if(!exports.eqDelta4(t,s,r,h+e*x,o+e*n,u,p))return!1;return!0}),exports.eqDelta4array=((t,s,e=i.EPS)=>{const r=t.length;if(s.length!==r)return!1;for(let i=0;i<r;i++)if(!exports.eqDelta4(t[i],s[i],e))return!1;return!0}),exports.compare4=((t,s,i,e,r,h,o=0,u=0,p=1,x=1)=>{const n=t[o+i*p],b=t[o+e*p],a=t[o+r*p],f=s[o+h*p],m=s[u+i*x],d=s[u+e*x],l=s[u+r*x],c=s[u+h*x];return n===m?b===d?a===l?f===c?0:f<c?-4:4:a<l?-3:3:b<d?-2:2:n<m?-1:1}),exports.collate4=((t,s,i=0,e=1,r=4)=>{for(let h of s)exports.set4(t,h,i,0,e,1),i+=r;return t}),t=x.defcommon(4),exports.set4=t[0],exports.setN4=t[1],exports.add4=t[2],exports.sub4=t[3],exports.mul4=t[4],exports.div4=t[5],exports.add4o=t[6],exports.sub4o=t[7],exports.mul4o=t[8],exports.div4o=t[9],exports.addN4=t[10],exports.subN4=t[11],exports.mulN4=t[12],exports.divN4=t[13],exports.addN4o=t[14],exports.subN4o=t[15],exports.mulN4o=t[16],exports.divN4o=t[17],exports.madd4=t[18],exports.maddN4=t[19],exports.msub4=t[20],exports.msubN4=t[21],exports.abs4=t[22],exports.sign4=t[23],exports.floor4=t[24],exports.ceil4=t[25],exports.sin4=t[26],exports.cos4=t[27],exports.sqrt4=t[28],exports.pow4=t[29],exports.min4=t[30],exports.max4=t[31],exports.mix4=t[32],exports.mixN4=t[33],exports.mix4o=t[34],exports.mixN4o=t[35],exports.neg4=((t,s=0,i=1)=>exports.mulN4(t,-1,s,i)),exports.fract4=((t,s=0,i=1)=>exports.op4(o.fract,t,s,i)),exports.powN4=((t,s,i=0,e=1)=>exports.op41(Math.pow,t,s,i,e)),exports.dot4=((t,s,i=0,e=0,r=1,h=1)=>t[i]*s[e]+t[i+r]*s[e+h]+t[i+2*r]*s[e+2*h]+t[i+3*r]*s[e+3*h]),exports.mixBilinear4=((t,s,i,e,r,o,u=0,p=0,x=0,n=0,b=1,a=1,f=1,m=1)=>(t[u]=h.mixBilinear(t[u],s[p],i[x],e[n],r,o),t[u+b]=h.mixBilinear(t[u+b],s[p+a],i[x+f],e[n+m],r,o),t[u+2*b]=h.mixBilinear(t[u+2*b],s[p+2*a],i[x+2*f],e[n+2*m],r,o),t[u+3*b]=h.mixBilinear(t[u+3*b],s[p+3*a],i[x+3*f],e[n+3*m],r,o),t)),exports.clamp4=((t,s,i,e=0,r=0,h=0,o=1,u=1,p=1)=>exports.max4(exports.min4(t,i,e,h,o,p),s,e,r,o,u)),exports.step4=((t,s,i=0,e=0,r=1,h=1)=>(t[i]=u.step(s[e],t[i]),t[i+r]=u.step(s[e+h],t[i+r]),t[i+2*r]=u.step(s[e+2*h],t[i+2*r]),t[i+3*r]=u.step(s[e+3*h],t[i+3*r]),t)),exports.smoothStep4=((t,s,i,e=0,r=0,h=0,o=1,p=1,x=1)=>(t[e]=u.smoothStep(s[r],i[h],t[e]),t[e+o]=u.smoothStep(s[r+p],i[h+x],t[e+o]),t[e+2*o]=u.smoothStep(s[r+2*p],i[h+2*x],t[e+2*o]),t[e+3*o]=u.smoothStep(s[r+3*p],i[h+2*x],t[e+3*o]),t)),exports.magSq4=((t,s=0,i=1)=>{const e=t[s],r=t[s+i],h=t[s+2*i],o=t[s+3*i];return e*e+r*r+h*h+o*o}),exports.mag4=((t,s=0,i=1)=>Math.sqrt(exports.magSq4(t,s,i))),exports.distSq4=((t,s,i=0,e=0,r=1,h=1)=>{const o=t[i]-s[e],u=t[i+r]-s[e+h],p=t[i+2*r]-s[e+2*h],x=t[i+3*r]-s[e+3*h];return o*o+u*u+p*p+x*x}),exports.dist4=((t,s,i=0,e=0,r=1,h=1)=>Math.sqrt(exports.distSq4(t,s,i,e,r,h))),exports.distManhattan4=((t,s,i=0,e=0,r=1,h=1)=>Math.abs(t[i]-s[e])+Math.abs(t[i+r]-s[e+h])+Math.abs(t[i+2*r]-s[e+2*h])+Math.abs(t[i+3*r]-s[e+3*h])),exports.distChebyshev4=((t,s,i=0,e=0,r=1,h=1)=>Math.max(Math.abs(t[i]-s[e]),Math.abs(t[i+r]-s[e+h]),Math.abs(t[i+2*r]-s[e+2*h]),Math.abs(t[i+3*r]-s[e+3*h]))),exports.normalize4=((t,s=1,e=0,r=1)=>{const h=exports.mag4(t,e,r);return h>=i.EPS&&exports.mulN4(t,s/h,e,r),t}),exports.limit4=((t,s,i=0,e=1)=>{const r=exports.mag4(t,i,e);return r>=s&&exports.mulN4(t,s/r,i,e),t}),exports.reflect4=((t,s,i=0,e=0,r=1,h=1)=>exports.maddN4(t,s,-2*exports.dot4(t,s,i,e,r,h),i,e,r,h)),exports.refract4=((t,s,i,e=0,r=0,h=1,o=1)=>{const u=exports.dot4(t,s,e,r,h,o),p=1-i*i*(1-u*u);return p<0?exports.setN4(t,0,e,h):exports.msubN4(exports.mulN4(t,i,e,h),s,i*u+Math.sqrt(p),e,r,h,o)}),exports.minorAxis4=((t,s=0,i=1)=>r.min4id(Math.abs(t[s]),Math.abs(t[s+i]),Math.abs(t[s+2*i]),Math.abs(t[s+3*i]))),exports.majorAxis4=((t,s=0,i=1)=>r.max4id(Math.abs(t[s]),Math.abs(t[s+i]),Math.abs(t[s+2*i]),Math.abs(t[s+3*i]))),exports.vec4=((t=0,s=0,i=0,e=0)=>new b([t,s,i,e])),exports.asVec4=(t=>t instanceof b?t:new b([t[0]||0,t[1]||0,t[2]||0,t[3]||0]));class b{constructor(t,s=0,i=1){this.buf=t||[0,0,0,0],this.i=s,this.s=i}static mapBuffer(t,s=t.length>>2,i=0,e=1,r=4){const h=[];for(;--s>=0;)h.push(new b(t,i,e)),i+=r;return h}static intoBuffer(t,s,i=0,e=1,r=4){for(let h of s)exports.set4(t,h.buf,i,h.i,e,h.s),i+=r;return t}static swizzle(t,s,i,e,r){return new b([]).swizzle(t,s,i,e,r)}static mixBilinear(t,s,i,e,r,h){return new b(exports.mixBilinear4(exports.get4(t.buf,t.i,t.s),s.buf,i.buf,e.buf,r,h,0,s.i,i.i,e.i,1,s.s,i.s,e.s))}static randNorm(t=1){return new b(exports.randNorm4([],t))}static random(t,s){return new b(exports.randMinMax4([],t,s))}static comparator(t,s,i,e){return(r,h)=>r.compare(h,t,s,i,e)}[Symbol.iterator](){return n.$iter(this.buf,4,this.i,this.s)}array(){return exports.get4(this.buf,this.i,this.s)}get length(){return 4}copy(){return new b(exports.get4(this.buf,this.i,this.s))}empty(){return new b}equiv(t){return t instanceof b?exports.equiv4(this.buf,t.buf,this.i,t.i,this.s,t.s):!(!s.isArrayLike(t)||4!==t.length)&&exports.equiv4(this.buf,t,this.i,0,this.s,1)}eqDelta(t,s=i.EPS){return exports.eqDelta4(this.buf,t.buf,s,this.i,t.i,this.s,t.s)}compare(t,s=0,i=1,e=2,r=3){return exports.compare4(this.buf,t.buf,s,i,e,r,this.i,t.i,this.s,t.s)}set(t){return exports.set4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}setN(t){return exports.setN4(this.buf,t,this.i,this.s),this}setS(t,s,i,e){return exports.setS4(this.buf,t,s,i,e,this.i,this.s),this}jitter(t=1){return exports.jitter4(this.buf,t,this.i,this.s),this}swizzle(t,s,i,e,r){return exports.swizzle4(this.buf,t.buf,s,i,e,r,this.i,t.i,this.s,t.s),this}swap(t){return exports.swap4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}add(t){return exports.add4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}sub(t){return exports.sub4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}mul(t){return exports.mul4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}div(t){return exports.div4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}addN(t){return exports.addN4(this.buf,t,this.i,this.s),this}subN(t){return exports.subN4(this.buf,t,this.i,this.s),this}mulN(t){return exports.mulN4(this.buf,t,this.i,this.s),this}divN(t){return exports.divN4(this.buf,t,this.i,this.s),this}addNew(t,s){return!s&&(s=new b([])),exports.add4o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}subNew(t,s){return!s&&(s=new b([])),exports.sub4o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}mulNew(t,s){return!s&&(s=new b([])),exports.mul4o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}divNew(t,s){return!s&&(s=new b([])),exports.div4o(s.buf,this.buf,t.buf,s.i,this.i,t.i,s.s,this.s,t.s),s}addNewN(t,s){return!s&&(s=new b([])),exports.addN4o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}subNewN(t,s){return!s&&(s=new b([])),exports.subN4o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}mulNewN(t,s){return!s&&(s=new b([])),exports.mulN4o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}divNewN(t,s){return!s&&(s=new b([])),exports.divN4o(s.buf,this.buf,t,s.i,this.i,s.s,this.s),s}maddNew(t,s,i){return i=i?i.set(this):this.copy(),exports.madd4(i.buf,t.buf,s.buf,i.i,t.i,s.i,i.s,t.s,s.s),i}maddNewN(t,s,i){return i=i?i.set(this):this.copy(),exports.maddN4(i.buf,t.buf,s,i.i,t.i,i.s,t.s),i}msubNew(t,s,i){return i=i?i.set(this):this.copy(),exports.msub4(i.buf,t.buf,s.buf,i.i,t.i,s.i,i.s,t.s,s.s),i}msubNewN(t,s,i){return i=i?i.set(this):this.copy(),exports.msubN4(i.buf,t.buf,s,i.i,t.i,i.s,t.s),i}mixNew(t,s,i){return!i&&(i=new b([])),exports.mix4o(i.buf,this.buf,t.buf,s.buf,i.i,this.i,t.i,s.i,i.s,this.s,t.s,s.s),i}mixNewN(t,s=.5,i){return!i&&(i=new b([])),exports.mixN4o(i.buf,this.buf,t.buf,s,i.i,this.i,t.i,i.s,this.s,t.s),i}neg(){return exports.mulN4(this.buf,-1,this.i,this.s),this}abs(){return exports.abs4(this.buf,this.i,this.s),this}sign(){return exports.sign4(this.buf,this.i,this.s),this}floor(){return exports.floor4(this.buf,this.i,this.s),this}ceil(){return exports.ceil4(this.buf,this.i,this.s),this}fract(){return exports.fract4(this.buf,this.i,this.s),this}sqrt(){return exports.sqrt4(this.buf,this.i,this.s),this}pow(t){return exports.pow4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}powN(t){return exports.powN4(this.buf,t,this.i,this.s),this}sin(){return exports.sin4(this.buf,this.i,this.s),this}cos(){return exports.cos4(this.buf,this.i,this.s),this}madd(t,s){return exports.madd4(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}maddN(t,s){return exports.maddN4(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}msub(t,s){return exports.msub4(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}msubN(t,s){return exports.msubN4(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}mix(t,s){return exports.mix4(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}mixN(t,s=.5){return exports.mixN4(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}min(t){return exports.min4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}max(t){return exports.max4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}clamp(t,s){return exports.clamp4(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}minorAxis(){return exports.minorAxis4(this.buf,this.i,this.s)}majorAxis(){return exports.majorAxis4(this.buf,this.i,this.s)}step(t){return exports.step4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}smoothStep(t,s){return exports.smoothStep4(this.buf,t.buf,s.buf,this.i,t.i,s.i,this.s,t.s,s.s),this}dot(t){return exports.dot4(this.buf,t.buf,this.i,t.i,this.s,t.s)}mag(){return exports.mag4(this.buf,this.i,this.s)}magSq(){return exports.magSq4(this.buf,this.i,this.s)}dist(t){return exports.dist4(this.buf,t.buf,this.i,t.i,this.s,t.s)}distSq(t){return exports.distSq4(this.buf,t.buf,this.i,t.i,this.s,t.s)}distManhattan(t){return exports.distManhattan4(this.buf,t.buf,this.i,t.i,this.s,t.s)}distChebyshev(t){return exports.distChebyshev4(this.buf,t.buf,this.i,t.i,this.s,t.s)}normalize(t=1){return exports.normalize4(this.buf,t,this.i,this.s),this}limit(t){return exports.limit4(this.buf,t,this.i,this.s),this}reflect(t){return exports.reflect4(this.buf,t.buf,this.i,t.i,this.s,t.s),this}refract(t,s){return exports.refract4(this.buf,t.buf,s,this.i,t.i,this.s,t.s),this}toString(){const t=this.i,s=this.s;return`[${this.buf[t]}, ${this.buf[t+s]}, ${this.buf[t+2*s]}, ${this.buf[t+3*s]}]`}toJSON(){return this.array()}}b.ZERO=Object.freeze(new b(p.ZERO4)),b.ONE=Object.freeze(new b(p.ONE4)),b.MIN=Object.freeze(new b(p.MIN4)),b.MAX=Object.freeze(new b(p.MAX4)),b.X_AXIS=Object.freeze(new b(p.X4)),b.Y_AXIS=Object.freeze(new b(p.Y4)),b.Z_AXIS=Object.freeze(new b(p.Z4)),b.W_AXIS=Object.freeze(new b(p.W4)),exports.Vec4=b,x.declareIndices(b.prototype,["x","y","z","w"]);
},{"@thi.ng/checks/is-arraylike":"aMkR","@thi.ng/math/api":"zd6y","@thi.ng/math/eqdelta":"SDG2","@thi.ng/math/interval":"PBUS","@thi.ng/math/mix":"B0dQ","@thi.ng/math/prec":"UVR2","@thi.ng/math/step":"9QhS","./api":"ZvJB","./codegen":"i8Zj","./common":"aZmO"}],"GrLQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../func/compr"),r=require("../iterator"),t=require("../reduced");function o(u,i){return i?r.iterator(o(u),i):r=>{const o=r[2],i=(e,r)=>{const n=u(r);if(n){for(let r of n)if(e=i(e,r),t.isReduced(e))break;return e}return o(e,r)};return e.compR(r,i)}}exports.flattenWith=o;
},{"../func/compr":"IqcY","../iterator":"fhdf","../reduced":"N1be"}],"FhYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./flatten-with");function e(e){return t.flattenWith(t=>null!=t&&t[Symbol.iterator]&&"string"!=typeof t?t:void 0,e)}exports.flatten=e;
},{"./flatten-with":"GrLQ"}],"dQxW":[function(require,module,exports) {
"use strict";function*e(e,t=1/0){for(;t-- >0;)yield e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.repeat=e;
},{}],"gU22":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{init(e){this.gl=e}render(e){}}exports.Application=e;
},{}],"EOux":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=a,exports.toRadian=s,exports.equals=p,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var r=1e-6;exports.EPSILON=r;var t="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=t;var e=Math.random;function a(r){exports.ARRAY_TYPE=t=r}exports.RANDOM=e;var o=Math.PI/180;function s(r){return r*o}function p(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}
},{}],"Orun":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.copy=o,exports.identity=a,exports.fromValues=u,exports.set=s,exports.transpose=i,exports.invert=p,exports.adjoint=c,exports.determinant=f,exports.multiply=x,exports.rotate=l,exports.scale=M,exports.fromRotation=h,exports.fromScaling=b,exports.str=v,exports.frob=m,exports.LDU=d,exports.add=P,exports.subtract=y,exports.exactEquals=O,exports.equals=A,exports.multiplyScalar=w,exports.multiplyScalarAndAdd=E,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function c(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function f(t){return t[0]*t[3]-t[2]*t[1]}function x(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],p=e[2],c=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*p+a*c,t[3]=o*p+u*c,t}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function v(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function m(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function d(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function y(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function O(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function A(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],p=e[2],c=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-c)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))}function w(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function E(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var R=x;exports.mul=R;var j=y;exports.sub=j;
},{"./common.js":"EOux"}],"GgX4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=a,exports.copy=n,exports.identity=o,exports.fromValues=s,exports.set=u,exports.invert=i,exports.determinant=p,exports.multiply=c,exports.rotate=f,exports.scale=M,exports.translate=h,exports.fromRotation=x,exports.fromScaling=l,exports.fromTranslation=b,exports.str=m,exports.frob=v,exports.add=P,exports.subtract=d,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=y,exports.exactEquals=w,exports.equals=A,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};a.get||a.set?Object.defineProperty(r,e,a):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,a,n,o,s){var u=new t.ARRAY_TYPE(6);return u[0]=r,u[1]=e,u[2]=a,u[3]=n,u[4]=o,u[5]=s,u}function u(t,r,e,a,n,o,s){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t}function i(t,r){var e=r[0],a=r[1],n=r[2],o=r[3],s=r[4],u=r[5],i=e*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-a*i,t[2]=-n*i,t[3]=e*i,t[4]=(n*u-o*s)*i,t[5]=(a*s-e*u)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function c(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1],f=e[2],M=e[3],h=e[4],x=e[5];return t[0]=a*p+o*c,t[1]=n*p+s*c,t[2]=a*f+o*M,t[3]=n*f+s*M,t[4]=a*h+o*x+u,t[5]=n*h+s*x+i,t}function f(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=Math.sin(e),c=Math.cos(e);return t[0]=a*c+o*p,t[1]=n*c+s*p,t[2]=a*-p+o*c,t[3]=n*-p+s*c,t[4]=u,t[5]=i,t}function M(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1];return t[0]=a*p,t[1]=n*p,t[2]=o*c,t[3]=s*c,t[4]=u,t[5]=i,t}function h(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=a*p+o*c+u,t[5]=n*p+s*c+i,t}function x(t,r){var e=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=e,t[2]=-e,t[3]=a,t[4]=0,t[5]=0,t}function l(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function b(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function v(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function d(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function y(t,r,e,a){return t[0]=r[0]+e[0]*a,t[1]=r[1]+e[1]*a,t[2]=r[2]+e[2]*a,t[3]=r[3]+e[3]*a,t[4]=r[4]+e[4]*a,t[5]=r[5]+e[5]*a,t}function w(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function A(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1],f=e[2],M=e[3],h=e[4],x=e[5];return Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-M)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-h)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(i-x)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))}var E=c;exports.mul=E;var R=d;exports.sub=R;
},{"./common.js":"EOux"}],"DqWC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=p,exports.transpose=i,exports.invert=M,exports.adjoint=c,exports.determinant=h,exports.multiply=f,exports.translate=x,exports.rotate=b,exports.scale=l,exports.fromTranslation=m,exports.fromRotation=v,exports.fromScaling=P,exports.fromMat2d=O,exports.fromQuat=d,exports.normalFromMat4=w,exports.projection=E,exports.str=y,exports.frob=S,exports.add=A,exports.subtract=j,exports.multiplyScalar=I,exports.multiplyScalarAndAdd=L,exports.exactEquals=N,exports.equals=R,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,a):{};n.get||n.set?Object.defineProperty(r,a,n):r[a]=t[a]}return r.default=t,r}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function e(r){var a=new t.ARRAY_TYPE(9);return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,a,n,e,o,s,u,p,i){var M=new t.ARRAY_TYPE(9);return M[0]=r,M[1]=a,M[2]=n,M[3]=e,M[4]=o,M[5]=s,M[6]=u,M[7]=p,M[8]=i,M}function u(t,r,a,n,e,o,s,u,p,i){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t[8]=i,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,r){if(t===r){var a=r[1],n=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=a,t[5]=r[7],t[6]=n,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function M(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=M*s-u*i,h=-M*o+u*p,f=i*o-s*p,x=a*c+n*h+e*f;return x?(x=1/x,t[0]=c*x,t[1]=(-M*n+e*i)*x,t[2]=(u*n-e*s)*x,t[3]=h*x,t[4]=(M*a-e*p)*x,t[5]=(-u*a+e*o)*x,t[6]=f*x,t[7]=(-i*a+n*p)*x,t[8]=(s*a-n*o)*x,t):null}function c(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8];return t[0]=s*M-u*i,t[1]=e*i-n*M,t[2]=n*u-e*s,t[3]=u*p-o*M,t[4]=a*M-e*p,t[5]=e*o-a*u,t[6]=o*i-s*p,t[7]=n*p-a*i,t[8]=a*s-n*o,t}function h(t){var r=t[0],a=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],p=t[7],i=t[8];return r*(i*o-s*p)+a*(-i*e+s*u)+n*(p*e-o*u)}function f(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return t[0]=h*n+f*s+x*i,t[1]=h*e+f*u+x*M,t[2]=h*o+f*p+x*c,t[3]=b*n+l*s+m*i,t[4]=b*e+l*u+m*M,t[5]=b*o+l*p+m*c,t[6]=v*n+P*s+O*i,t[7]=v*e+P*u+O*M,t[8]=v*o+P*p+O*c,t}function x(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=p,t[6]=h*n+f*s+i,t[7]=h*e+f*u+M,t[8]=h*o+f*p+c,t}function b(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=Math.sin(a),f=Math.cos(a);return t[0]=f*n+h*s,t[1]=f*e+h*u,t[2]=f*o+h*p,t[3]=f*s-h*n,t[4]=f*u-h*e,t[5]=f*p-h*o,t[6]=i,t[7]=M,t[8]=c,t}function l(t,r,a){var n=a[0],e=a[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function m(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function v(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function P(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function d(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=a+a,u=n+n,p=e+e,i=a*s,M=n*s,c=n*u,h=e*s,f=e*u,x=e*p,b=o*s,l=o*u,m=o*p;return t[0]=1-c-x,t[3]=M-m,t[6]=h+l,t[1]=M+m,t[4]=1-i-x,t[7]=f-b,t[2]=h-l,t[5]=f+b,t[8]=1-i-c,t}function w(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=r[9],h=r[10],f=r[11],x=r[12],b=r[13],l=r[14],m=r[15],v=a*u-n*s,P=a*p-e*s,O=a*i-o*s,d=n*p-e*u,w=n*i-o*u,E=e*i-o*p,y=M*b-c*x,S=M*l-h*x,A=M*m-f*x,j=c*l-h*b,I=c*m-f*b,L=h*m-f*l,N=v*L-P*I+O*j+d*A-w*S+E*y;return N?(N=1/N,t[0]=(u*L-p*I+i*j)*N,t[1]=(p*A-s*L-i*S)*N,t[2]=(s*I-u*A+i*y)*N,t[3]=(e*I-n*L-o*j)*N,t[4]=(a*L-e*A+o*S)*N,t[5]=(n*A-a*I-o*y)*N,t[6]=(b*E-l*w+m*d)*N,t[7]=(l*O-x*E-m*P)*N,t[8]=(x*w-b*O+m*v)*N,t):null}function E(t,r,a){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function y(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function S(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t}function j(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t}function I(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t}function L(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t}function N(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function R(r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return Math.abs(n-h)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-f)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-x)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-b)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-l)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(p-m)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(i-v)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(M-P)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(c-O)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))}var Y=f;exports.mul=Y;var _=j;exports.sub=_;
},{"./common.js":"EOux"}],"HyAe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=r,exports.clone=o,exports.copy=n,exports.fromValues=e,exports.set=s,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=u,exports.determinant=p,exports.multiply=c,exports.translate=f,exports.scale=v,exports.rotate=x,exports.rotateX=b,exports.rotateY=l,exports.rotateZ=d,exports.fromTranslation=m,exports.fromScaling=P,exports.fromRotation=O,exports.fromXRotation=E,exports.fromYRotation=S,exports.fromZRotation=w,exports.fromRotationTranslation=I,exports.fromQuat2=L,exports.getTranslation=N,exports.getScaling=q,exports.getRotation=R,exports.fromRotationTranslationScale=g,exports.fromRotationTranslationScaleOrigin=A,exports.fromQuat=y,exports.frustum=Y,exports.perspective=T,exports.perspectiveFromFieldOfView=_,exports.ortho=j,exports.lookAt=D,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=X,exports.subtract=Z,exports.multiplyScalar=k,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=a(require("./common.js"));function a(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};o.get||o.set?Object.defineProperty(a,r,o):a[r]=t[r]}return a.default=t,a}function r(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function o(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function n(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function e(a,r,o,n,e,s,h,M,i,u,p,c,f,v,x,b){var l=new t.ARRAY_TYPE(16);return l[0]=a,l[1]=r,l[2]=o,l[3]=n,l[4]=e,l[5]=s,l[6]=h,l[7]=M,l[8]=i,l[9]=u,l[10]=p,l[11]=c,l[12]=f,l[13]=v,l[14]=x,l[15]=b,l}function s(t,a,r,o,n,e,s,h,M,i,u,p,c,f,v,x,b){return t[0]=a,t[1]=r,t[2]=o,t[3]=n,t[4]=e,t[5]=s,t[6]=h,t[7]=M,t[8]=i,t[9]=u,t[10]=p,t[11]=c,t[12]=f,t[13]=v,t[14]=x,t[15]=b,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],o=a[2],n=a[3],e=a[6],s=a[7],h=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=o,t[9]=e,t[11]=a[14],t[12]=n,t[13]=s,t[14]=h}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],o=a[1],n=a[2],e=a[3],s=a[4],h=a[5],M=a[6],i=a[7],u=a[8],p=a[9],c=a[10],f=a[11],v=a[12],x=a[13],b=a[14],l=a[15],d=r*h-o*s,m=r*M-n*s,P=r*i-e*s,O=o*M-n*h,E=o*i-e*h,S=n*i-e*M,w=u*x-p*v,I=u*b-c*v,L=u*l-f*v,N=p*b-c*x,q=p*l-f*x,R=c*l-f*b,g=d*R-m*q+P*N+O*L-E*I+S*w;return g?(g=1/g,t[0]=(h*R-M*q+i*N)*g,t[1]=(n*q-o*R-e*N)*g,t[2]=(x*S-b*E+l*O)*g,t[3]=(c*E-p*S-f*O)*g,t[4]=(M*L-s*R-i*I)*g,t[5]=(r*R-n*L+e*I)*g,t[6]=(b*P-v*S-l*m)*g,t[7]=(u*S-c*P+f*m)*g,t[8]=(s*q-h*L+i*w)*g,t[9]=(o*L-r*q-e*w)*g,t[10]=(v*E-x*P+l*d)*g,t[11]=(p*P-u*E-f*d)*g,t[12]=(h*I-s*N-M*w)*g,t[13]=(r*N-o*I+n*w)*g,t[14]=(x*m-v*O-b*d)*g,t[15]=(u*O-p*m+c*d)*g,t):null}function u(t,a){var r=a[0],o=a[1],n=a[2],e=a[3],s=a[4],h=a[5],M=a[6],i=a[7],u=a[8],p=a[9],c=a[10],f=a[11],v=a[12],x=a[13],b=a[14],l=a[15];return t[0]=h*(c*l-f*b)-p*(M*l-i*b)+x*(M*f-i*c),t[1]=-(o*(c*l-f*b)-p*(n*l-e*b)+x*(n*f-e*c)),t[2]=o*(M*l-i*b)-h*(n*l-e*b)+x*(n*i-e*M),t[3]=-(o*(M*f-i*c)-h*(n*f-e*c)+p*(n*i-e*M)),t[4]=-(s*(c*l-f*b)-u*(M*l-i*b)+v*(M*f-i*c)),t[5]=r*(c*l-f*b)-u*(n*l-e*b)+v*(n*f-e*c),t[6]=-(r*(M*l-i*b)-s*(n*l-e*b)+v*(n*i-e*M)),t[7]=r*(M*f-i*c)-s*(n*f-e*c)+u*(n*i-e*M),t[8]=s*(p*l-f*x)-u*(h*l-i*x)+v*(h*f-i*p),t[9]=-(r*(p*l-f*x)-u*(o*l-e*x)+v*(o*f-e*p)),t[10]=r*(h*l-i*x)-s*(o*l-e*x)+v*(o*i-e*h),t[11]=-(r*(h*f-i*p)-s*(o*f-e*p)+u*(o*i-e*h)),t[12]=-(s*(p*b-c*x)-u*(h*b-M*x)+v*(h*c-M*p)),t[13]=r*(p*b-c*x)-u*(o*b-n*x)+v*(o*c-n*p),t[14]=-(r*(h*b-M*x)-s*(o*b-n*x)+v*(o*M-n*h)),t[15]=r*(h*c-M*p)-s*(o*c-n*p)+u*(o*M-n*h),t}function p(t){var a=t[0],r=t[1],o=t[2],n=t[3],e=t[4],s=t[5],h=t[6],M=t[7],i=t[8],u=t[9],p=t[10],c=t[11],f=t[12],v=t[13],x=t[14],b=t[15];return(a*s-r*e)*(p*b-c*x)-(a*h-o*e)*(u*b-c*v)+(a*M-n*e)*(u*x-p*v)+(r*h-o*s)*(i*b-c*f)-(r*M-n*s)*(i*x-p*f)+(o*M-n*h)*(i*v-u*f)}function c(t,a,r){var o=a[0],n=a[1],e=a[2],s=a[3],h=a[4],M=a[5],i=a[6],u=a[7],p=a[8],c=a[9],f=a[10],v=a[11],x=a[12],b=a[13],l=a[14],d=a[15],m=r[0],P=r[1],O=r[2],E=r[3];return t[0]=m*o+P*h+O*p+E*x,t[1]=m*n+P*M+O*c+E*b,t[2]=m*e+P*i+O*f+E*l,t[3]=m*s+P*u+O*v+E*d,m=r[4],P=r[5],O=r[6],E=r[7],t[4]=m*o+P*h+O*p+E*x,t[5]=m*n+P*M+O*c+E*b,t[6]=m*e+P*i+O*f+E*l,t[7]=m*s+P*u+O*v+E*d,m=r[8],P=r[9],O=r[10],E=r[11],t[8]=m*o+P*h+O*p+E*x,t[9]=m*n+P*M+O*c+E*b,t[10]=m*e+P*i+O*f+E*l,t[11]=m*s+P*u+O*v+E*d,m=r[12],P=r[13],O=r[14],E=r[15],t[12]=m*o+P*h+O*p+E*x,t[13]=m*n+P*M+O*c+E*b,t[14]=m*e+P*i+O*f+E*l,t[15]=m*s+P*u+O*v+E*d,t}function f(t,a,r){var o=r[0],n=r[1],e=r[2],s=void 0,h=void 0,M=void 0,i=void 0,u=void 0,p=void 0,c=void 0,f=void 0,v=void 0,x=void 0,b=void 0,l=void 0;return a===t?(t[12]=a[0]*o+a[4]*n+a[8]*e+a[12],t[13]=a[1]*o+a[5]*n+a[9]*e+a[13],t[14]=a[2]*o+a[6]*n+a[10]*e+a[14],t[15]=a[3]*o+a[7]*n+a[11]*e+a[15]):(s=a[0],h=a[1],M=a[2],i=a[3],u=a[4],p=a[5],c=a[6],f=a[7],v=a[8],x=a[9],b=a[10],l=a[11],t[0]=s,t[1]=h,t[2]=M,t[3]=i,t[4]=u,t[5]=p,t[6]=c,t[7]=f,t[8]=v,t[9]=x,t[10]=b,t[11]=l,t[12]=s*o+u*n+v*e+a[12],t[13]=h*o+p*n+x*e+a[13],t[14]=M*o+c*n+b*e+a[14],t[15]=i*o+f*n+l*e+a[15]),t}function v(t,a,r){var o=r[0],n=r[1],e=r[2];return t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o,t[3]=a[3]*o,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function x(a,r,o,n){var e,s,h,M,i,u,p,c,f,v,x,b,l,d,m,P,O,E,S,w,I,L,N,q,R=n[0],g=n[1],A=n[2],y=Math.sqrt(R*R+g*g+A*A);return y<t.EPSILON?null:(R*=y=1/y,g*=y,A*=y,e=Math.sin(o),h=1-(s=Math.cos(o)),M=r[0],i=r[1],u=r[2],p=r[3],c=r[4],f=r[5],v=r[6],x=r[7],b=r[8],l=r[9],d=r[10],m=r[11],P=R*R*h+s,O=g*R*h+A*e,E=A*R*h-g*e,S=R*g*h-A*e,w=g*g*h+s,I=A*g*h+R*e,L=R*A*h+g*e,N=g*A*h-R*e,q=A*A*h+s,a[0]=M*P+c*O+b*E,a[1]=i*P+f*O+l*E,a[2]=u*P+v*O+d*E,a[3]=p*P+x*O+m*E,a[4]=M*S+c*w+b*I,a[5]=i*S+f*w+l*I,a[6]=u*S+v*w+d*I,a[7]=p*S+x*w+m*I,a[8]=M*L+c*N+b*q,a[9]=i*L+f*N+l*q,a[10]=u*L+v*N+d*q,a[11]=p*L+x*N+m*q,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function b(t,a,r){var o=Math.sin(r),n=Math.cos(r),e=a[4],s=a[5],h=a[6],M=a[7],i=a[8],u=a[9],p=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*n+i*o,t[5]=s*n+u*o,t[6]=h*n+p*o,t[7]=M*n+c*o,t[8]=i*n-e*o,t[9]=u*n-s*o,t[10]=p*n-h*o,t[11]=c*n-M*o,t}function l(t,a,r){var o=Math.sin(r),n=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],i=a[8],u=a[9],p=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*n-i*o,t[1]=s*n-u*o,t[2]=h*n-p*o,t[3]=M*n-c*o,t[8]=e*o+i*n,t[9]=s*o+u*n,t[10]=h*o+p*n,t[11]=M*o+c*n,t}function d(t,a,r){var o=Math.sin(r),n=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],i=a[4],u=a[5],p=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*n+i*o,t[1]=s*n+u*o,t[2]=h*n+p*o,t[3]=M*n+c*o,t[4]=i*n-e*o,t[5]=u*n-s*o,t[6]=p*n-h*o,t[7]=c*n-M*o,t}function m(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function P(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(a,r,o){var n,e,s,h=o[0],M=o[1],i=o[2],u=Math.sqrt(h*h+M*M+i*i);return u<t.EPSILON?null:(h*=u=1/u,M*=u,i*=u,n=Math.sin(r),s=1-(e=Math.cos(r)),a[0]=h*h*s+e,a[1]=M*h*s+i*n,a[2]=i*h*s-M*n,a[3]=0,a[4]=h*M*s-i*n,a[5]=M*M*s+e,a[6]=i*M*s+h*n,a[7]=0,a[8]=h*i*s+M*n,a[9]=M*i*s-h*n,a[10]=i*i*s+e,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function E(t,a){var r=Math.sin(a),o=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,a){var r=Math.sin(a),o=Math.cos(a);return t[0]=o,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,a){var r=Math.sin(a),o=Math.cos(a);return t[0]=o,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a,r){var o=a[0],n=a[1],e=a[2],s=a[3],h=o+o,M=n+n,i=e+e,u=o*h,p=o*M,c=o*i,f=n*M,v=n*i,x=e*i,b=s*h,l=s*M,d=s*i;return t[0]=1-(f+x),t[1]=p+d,t[2]=c-l,t[3]=0,t[4]=p-d,t[5]=1-(u+x),t[6]=v+b,t[7]=0,t[8]=c+l,t[9]=v-b,t[10]=1-(u+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function L(a,r){var o=new t.ARRAY_TYPE(3),n=-r[0],e=-r[1],s=-r[2],h=r[3],M=r[4],i=r[5],u=r[6],p=r[7],c=n*n+e*e+s*s+h*h;return c>0?(o[0]=2*(M*h+p*n+i*s-u*e)/c,o[1]=2*(i*h+p*e+u*n-M*s)/c,o[2]=2*(u*h+p*s+M*e-i*n)/c):(o[0]=2*(M*h+p*n+i*s-u*e),o[1]=2*(i*h+p*e+u*n-M*s),o[2]=2*(u*h+p*s+M*e-i*n)),I(a,r,o),a}function N(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function q(t,a){var r=a[0],o=a[1],n=a[2],e=a[4],s=a[5],h=a[6],M=a[8],i=a[9],u=a[10];return t[0]=Math.sqrt(r*r+o*o+n*n),t[1]=Math.sqrt(e*e+s*s+h*h),t[2]=Math.sqrt(M*M+i*i+u*u),t}function R(t,a){var r=a[0]+a[5]+a[10],o=0;return r>0?(o=2*Math.sqrt(r+1),t[3]=.25*o,t[0]=(a[6]-a[9])/o,t[1]=(a[8]-a[2])/o,t[2]=(a[1]-a[4])/o):a[0]>a[5]&&a[0]>a[10]?(o=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/o,t[0]=.25*o,t[1]=(a[1]+a[4])/o,t[2]=(a[8]+a[2])/o):a[5]>a[10]?(o=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/o,t[0]=(a[1]+a[4])/o,t[1]=.25*o,t[2]=(a[6]+a[9])/o):(o=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/o,t[0]=(a[8]+a[2])/o,t[1]=(a[6]+a[9])/o,t[2]=.25*o),t}function g(t,a,r,o){var n=a[0],e=a[1],s=a[2],h=a[3],M=n+n,i=e+e,u=s+s,p=n*M,c=n*i,f=n*u,v=e*i,x=e*u,b=s*u,l=h*M,d=h*i,m=h*u,P=o[0],O=o[1],E=o[2];return t[0]=(1-(v+b))*P,t[1]=(c+m)*P,t[2]=(f-d)*P,t[3]=0,t[4]=(c-m)*O,t[5]=(1-(p+b))*O,t[6]=(x+l)*O,t[7]=0,t[8]=(f+d)*E,t[9]=(x-l)*E,t[10]=(1-(p+v))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function A(t,a,r,o,n){var e=a[0],s=a[1],h=a[2],M=a[3],i=e+e,u=s+s,p=h+h,c=e*i,f=e*u,v=e*p,x=s*u,b=s*p,l=h*p,d=M*i,m=M*u,P=M*p,O=o[0],E=o[1],S=o[2],w=n[0],I=n[1],L=n[2],N=(1-(x+l))*O,q=(f+P)*O,R=(v-m)*O,g=(f-P)*E,A=(1-(c+l))*E,y=(b+d)*E,Y=(v+m)*S,T=(b-d)*S,_=(1-(c+x))*S;return t[0]=N,t[1]=q,t[2]=R,t[3]=0,t[4]=g,t[5]=A,t[6]=y,t[7]=0,t[8]=Y,t[9]=T,t[10]=_,t[11]=0,t[12]=r[0]+w-(N*w+g*I+Y*L),t[13]=r[1]+I-(q*w+A*I+T*L),t[14]=r[2]+L-(R*w+y*I+_*L),t[15]=1,t}function y(t,a){var r=a[0],o=a[1],n=a[2],e=a[3],s=r+r,h=o+o,M=n+n,i=r*s,u=o*s,p=o*h,c=n*s,f=n*h,v=n*M,x=e*s,b=e*h,l=e*M;return t[0]=1-p-v,t[1]=u+l,t[2]=c-b,t[3]=0,t[4]=u-l,t[5]=1-i-v,t[6]=f+x,t[7]=0,t[8]=c+b,t[9]=f-x,t[10]=1-i-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,a,r,o,n,e,s){var h=1/(r-a),M=1/(n-o),i=1/(e-s);return t[0]=2*e*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*M,t[6]=0,t[7]=0,t[8]=(r+a)*h,t[9]=(n+o)*M,t[10]=(s+e)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*e*2*i,t[15]=0,t}function T(t,a,r,o,n){var e=1/Math.tan(a/2),s=void 0;return t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(s=1/(o-n),t[10]=(n+o)*s,t[14]=2*n*o*s):(t[10]=-1,t[14]=-2*o),t}function _(t,a,r,o){var n=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),h=Math.tan(a.rightDegrees*Math.PI/180),M=2/(s+h),i=2/(n+e);return t[0]=M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=-(s-h)*M*.5,t[9]=(n-e)*i*.5,t[10]=o/(r-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r/(r-o),t[15]=0,t}function j(t,a,r,o,n,e,s){var h=1/(a-r),M=1/(o-n),i=1/(e-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*i,t[11]=0,t[12]=(a+r)*h,t[13]=(n+o)*M,t[14]=(s+e)*i,t[15]=1,t}function D(a,r,o,n){var e=void 0,s=void 0,M=void 0,i=void 0,u=void 0,p=void 0,c=void 0,f=void 0,v=void 0,x=void 0,b=r[0],l=r[1],d=r[2],m=n[0],P=n[1],O=n[2],E=o[0],S=o[1],w=o[2];return Math.abs(b-E)<t.EPSILON&&Math.abs(l-S)<t.EPSILON&&Math.abs(d-w)<t.EPSILON?h(a):(c=b-E,f=l-S,v=d-w,e=P*(v*=x=1/Math.sqrt(c*c+f*f+v*v))-O*(f*=x),s=O*(c*=x)-m*v,M=m*f-P*c,(x=Math.sqrt(e*e+s*s+M*M))?(e*=x=1/x,s*=x,M*=x):(e=0,s=0,M=0),i=f*M-v*s,u=v*e-c*M,p=c*s-f*e,(x=Math.sqrt(i*i+u*u+p*p))?(i*=x=1/x,u*=x,p*=x):(i=0,u=0,p=0),a[0]=e,a[1]=i,a[2]=c,a[3]=0,a[4]=s,a[5]=u,a[6]=f,a[7]=0,a[8]=M,a[9]=p,a[10]=v,a[11]=0,a[12]=-(e*b+s*l+M*d),a[13]=-(i*b+u*l+p*d),a[14]=-(c*b+f*l+v*d),a[15]=1,a)}function F(t,a,r,o){var n=a[0],e=a[1],s=a[2],h=o[0],M=o[1],i=o[2],u=n-r[0],p=e-r[1],c=s-r[2],f=u*u+p*p+c*c;f>0&&(u*=f=1/Math.sqrt(f),p*=f,c*=f);var v=M*c-i*p,x=i*u-h*c,b=h*p-M*u;return(f=v*v+x*x+b*b)>0&&(v*=f=1/Math.sqrt(f),x*=f,b*=f),t[0]=v,t[1]=x,t[2]=b,t[3]=0,t[4]=p*b-c*x,t[5]=c*v-u*b,t[6]=u*x-p*v,t[7]=0,t[8]=u,t[9]=p,t[10]=c,t[11]=0,t[12]=n,t[13]=e,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function X(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function Z(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function k(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,o){return t[0]=a[0]+r[0]*o,t[1]=a[1]+r[1]*o,t[2]=a[2]+r[2]*o,t[3]=a[3]+r[3]*o,t[4]=a[4]+r[4]*o,t[5]=a[5]+r[5]*o,t[6]=a[6]+r[6]*o,t[7]=a[7]+r[7]*o,t[8]=a[8]+r[8]*o,t[9]=a[9]+r[9]*o,t[10]=a[10]+r[10]*o,t[11]=a[11]+r[11]*o,t[12]=a[12]+r[12]*o,t[13]=a[13]+r[13]*o,t[14]=a[14]+r[14]*o,t[15]=a[15]+r[15]*o,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var o=a[0],n=a[1],e=a[2],s=a[3],h=a[4],M=a[5],i=a[6],u=a[7],p=a[8],c=a[9],f=a[10],v=a[11],x=a[12],b=a[13],l=a[14],d=a[15],m=r[0],P=r[1],O=r[2],E=r[3],S=r[4],w=r[5],I=r[6],L=r[7],N=r[8],q=r[9],R=r[10],g=r[11],A=r[12],y=r[13],Y=r[14],T=r[15];return Math.abs(o-m)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(s-E)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(h-S)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(M-w)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(w))&&Math.abs(i-I)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(u-L)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(p-N)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(c-q)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(f-R)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(v-g)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(l-Y)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(Y))&&Math.abs(d-T)<=t.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))}var G=c;exports.mul=G;var H=Z;exports.sub=H;
},{"./common.js":"EOux"}],"sfqs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.length=o,exports.fromValues=a,exports.copy=s,exports.set=u,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=x,exports.ceil=f,exports.floor=h,exports.min=M,exports.max=v,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=P,exports.squaredLength=O,exports.negate=q,exports.inverse=A,exports.normalize=y,exports.dot=E,exports.cross=R,exports.lerp=g,exports.hermite=Y,exports.bezier=_,exports.random=j,exports.transformMat4=D,exports.transformMat3=w,exports.transformQuat=L,exports.rotateX=I,exports.rotateY=N,exports.rotateZ=T,exports.angle=S,exports.str=z,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function n(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function o(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function a(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function s(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function u(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function f(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function v(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(e*e+n*n+o*o)}function P(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function O(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function y(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a),t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function g(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function Y(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,x=3*i*s,f=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*x+o[0]*f,t[1]=r[1]*c+e[1]*p+n[1]*x+o[1]*f,t[2]=r[2]*c+e[2]*p+n[2]*x+o[2]*f,t}function j(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function w(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function L(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,x=a*u-n*c,f=n*i-o*u,h=o*f-a*x,M=a*p-n*f,v=n*x-o*p,l=2*s;return p*=l,x*=l,f*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+x+M,t[2]=c+f+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function N(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=a(t[0],t[1],t[2]),n=a(r[0],r[1],r[2]);y(e,e),y(n,n);var o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function z(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=c;exports.sub=V;var X=p;exports.mul=X;var Z=x;exports.div=Z;var k=b;exports.dist=k;var B=P;exports.sqrDist=B;var C=o;exports.len=C;var G=O;exports.sqrLen=G;var H=function(){var t=e();return function(r,e,n,o,a,s){var u=void 0,i=void 0;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=H;
},{"./common.js":"EOux"}],"RAno":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=h,exports.max=M,exports.round=l,exports.scale=v,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=O,exports.squaredLength=A,exports.negate=P,exports.inverse=q,exports.normalize=R,exports.dot=E,exports.lerp=y,exports.random=D,exports.transformMat4=g,exports.transformQuat=w,exports.str=N,exports.exactEquals=Y,exports.equals=_,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function u(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function c(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function p(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function f(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function h(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function v(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function d(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function m(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.sqrt(e*e+n*n+o*o+a*a)}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function O(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.sqrt(r*r+e*e+n*n+o*o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function q(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function R(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],s=e*e+n*n+o*o+a*a;return s>0&&(s=1/Math.sqrt(s),t[0]=e*s,t[1]=n*s,t[2]=o*s,t[3]=a*s),t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function y(t,r,e,n){var o=r[0],a=r[1],s=r[2],u=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t[3]=u+n*(e[3]-u),t}function D(r,e){var n,o,a,s,u,i;e=e||1;do{u=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(u>=1);do{i=(a=2*t.RANDOM()-1)*a+(s=2*t.RANDOM()-1)*s}while(i>=1);var c=Math.sqrt((1-u)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*s*c,r}function g(t,r,e){var n=r[0],o=r[1],a=r[2],s=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*s,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*s,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*s,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*s,t}function w(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2],c=e[3],p=c*n+u*a-i*o,x=c*o+i*n-s*a,f=c*a+s*o-u*n,h=-s*n-u*o-i*a;return t[0]=p*c+h*-s+x*-i-f*-u,t[1]=x*c+h*-u+f*-s-p*-i,t[2]=f*c+h*-i+p*-u-x*-s,t[3]=r[3],t}function N(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function _(r,e){var n=r[0],o=r[1],a=r[2],s=r[3],u=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-u)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-p)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}var j=i;exports.sub=j;var L=c;exports.mul=L;var I=p;exports.div=I;var S=m;exports.dist=S;var T=b;exports.sqrDist=T;var z=O;exports.len=z;var F=A;exports.sqrLen=F;var Q=function(){var t=e();return function(r,e,n,o,a,s){var u=void 0,i=void 0;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}();exports.forEach=Q;
},{"./common.js":"EOux"}],"qTfE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.identity=n,exports.setAxisAngle=u,exports.getAxisAngle=p,exports.multiply=i,exports.rotateX=c,exports.rotateY=x,exports.rotateZ=v,exports.calculateW=l,exports.slerp=h,exports.random=M,exports.invert=f,exports.conjugate=d,exports.fromMat3=q,exports.fromEuler=m,exports.str=P,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var r=s(require("./common.js")),t=s(require("./mat3.js")),e=s(require("./vec3.js")),o=s(require("./vec4.js"));function s(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};o.get||o.set?Object.defineProperty(t,e,o):t[e]=r[e]}return t.default=r,t}function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function n(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function u(r,t,e){e*=.5;var o=Math.sin(e);return r[0]=o*t[0],r[1]=o*t[1],r[2]=o*t[2],r[3]=Math.cos(e),r}function p(t,e){var o=2*Math.acos(e[3]),s=Math.sin(o/2);return s>r.EPSILON?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),o}function i(r,t,e){var o=t[0],s=t[1],a=t[2],n=t[3],u=e[0],p=e[1],i=e[2],c=e[3];return r[0]=o*c+n*u+s*i-a*p,r[1]=s*c+n*p+a*u-o*i,r[2]=a*c+n*i+o*p-s*u,r[3]=n*c-o*u-s*p-a*i,r}function c(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+n*u,r[1]=s*p+a*u,r[2]=a*p-s*u,r[3]=n*p-o*u,r}function x(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p-a*u,r[1]=s*p+n*u,r[2]=a*p+o*u,r[3]=n*p-s*u,r}function v(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+s*u,r[1]=s*p-o*u,r[2]=a*p+n*u,r[3]=n*p-a*u,r}function l(r,t){var e=t[0],o=t[1],s=t[2];return r[0]=e,r[1]=o,r[2]=s,r[3]=Math.sqrt(Math.abs(1-e*e-o*o-s*s)),r}function h(t,e,o,s){var a=e[0],n=e[1],u=e[2],p=e[3],i=o[0],c=o[1],x=o[2],v=o[3],l=void 0,h=void 0,M=void 0,f=void 0,d=void 0;return(h=a*i+n*c+u*x+p*v)<0&&(h=-h,i=-i,c=-c,x=-x,v=-v),1-h>r.EPSILON?(l=Math.acos(h),M=Math.sin(l),f=Math.sin((1-s)*l)/M,d=Math.sin(s*l)/M):(f=1-s,d=s),t[0]=f*a+d*i,t[1]=f*n+d*c,t[2]=f*u+d*x,t[3]=f*p+d*v,t}function M(t){var e=r.RANDOM(),o=r.RANDOM(),s=r.RANDOM(),a=Math.sqrt(1-e),n=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*o),t[1]=a*Math.cos(2*Math.PI*o),t[2]=n*Math.sin(2*Math.PI*s),t[3]=n*Math.cos(2*Math.PI*s),t}function f(r,t){var e=t[0],o=t[1],s=t[2],a=t[3],n=e*e+o*o+s*s+a*a,u=n?1/n:0;return r[0]=-e*u,r[1]=-o*u,r[2]=-s*u,r[3]=a*u,r}function d(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r}function q(r,t){var e=t[0]+t[4]+t[8],o=void 0;if(e>0)o=Math.sqrt(e+1),r[3]=.5*o,o=.5/o,r[0]=(t[5]-t[7])*o,r[1]=(t[6]-t[2])*o,r[2]=(t[1]-t[3])*o;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var a=(s+1)%3,n=(s+2)%3;o=Math.sqrt(t[3*s+s]-t[3*a+a]-t[3*n+n]+1),r[s]=.5*o,o=.5/o,r[3]=(t[3*a+n]-t[3*n+a])*o,r[a]=(t[3*a+s]+t[3*s+a])*o,r[n]=(t[3*n+s]+t[3*s+n])*o}return r}function m(r,t,e,o){var s=.5*Math.PI/180;t*=s,e*=s,o*=s;var a=Math.sin(t),n=Math.cos(t),u=Math.sin(e),p=Math.cos(e),i=Math.sin(o),c=Math.cos(o);return r[0]=a*p*c-n*u*i,r[1]=n*u*c+a*p*i,r[2]=n*p*i-a*u*c,r[3]=n*p*c+a*u*i,r}function P(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var A=o.clone;exports.clone=A;var O=o.fromValues;exports.fromValues=O;var g=o.copy;exports.copy=g;var y=o.set;exports.set=y;var j=o.add;exports.add=j;var E=i;exports.mul=E;var I=o.scale;exports.scale=I;var b=o.dot;exports.dot=b;var L=o.lerp;exports.lerp=L;var R=o.length;exports.length=R;var _=R;exports.len=_;var D=o.squaredLength;exports.squaredLength=D;var N=D;exports.sqrLen=N;var V=o.normalize;exports.normalize=V;var Y=o.exactEquals;exports.exactEquals=Y;var w=o.equals;exports.equals=w;var z=function(){var r=e.create(),t=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(s,a,n){var p=e.dot(a,n);return p<-.999999?(e.cross(r,t,a),e.len(r)<1e-6&&e.cross(r,o,a),e.normalize(r,r),u(s,r,Math.PI),s):p>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(e.cross(r,a,n),s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=1+p,V(s,s))}}();exports.rotationTo=z;var T=function(){var r=a(),t=a();return function(e,o,s,a,n,u){return h(r,o,n,u),h(t,s,a,u),h(e,r,t,2*u*(1-u)),e}}();exports.sqlerp=T;var S=function(){var r=t.create();return function(t,e,o,s){return r[0]=o[0],r[3]=o[1],r[6]=o[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],V(t,q(t,r))}}();exports.setAxes=S;
},{"./common.js":"EOux","./mat3.js":"DqWC","./vec3.js":"sfqs","./vec4.js":"RAno"}],"sQDk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=s,exports.fromRotationTranslationValues=u,exports.fromRotationTranslation=p,exports.fromTranslation=i,exports.fromRotation=x,exports.fromMat4=c,exports.copy=f,exports.identity=h,exports.set=M,exports.getDual=l,exports.setDual=P,exports.getTranslation=m,exports.translate=R,exports.rotateX=d,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=y,exports.add=q,exports.multiply=L,exports.scale=T,exports.lerp=_,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=X,exports.equals=Z,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=a(require("./common.js")),r=a(require("./quat.js")),e=a(require("./mat4.js"));function a(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};a.get||a.set?Object.defineProperty(r,e,a):r[e]=t[e]}return r.default=t,r}function n(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function s(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function u(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,x=.5*s,c=.5*u;return p[4]=i*n+x*a-c*e,p[5]=x*n+c*r-i*a,p[6]=c*n+i*e-x*r,p[7]=-i*r-x*e-c*a,p}function p(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function i(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function x(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function c(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),p(a,o,s),a}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function h(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function l(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var b=r.copy;function P(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function m(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],x=r[4],c=r[5],f=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+x,t[5]=s*p+o*u-a*i+c,t[6]=s*i+a*p-n*u+f,t[7]=-a*u-n*p-o*i+h,t}function d(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],x=r[3];return t[0]=u*s+x*a+p*o-i*n,t[1]=p*s+x*n+i*a-u*o,t[2]=i*s+x*o+u*n-p*a,t[3]=x*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],x=r[7],t[4]=u*s+x*a+p*o-i*n,t[5]=p*s+x*n+i*a-u*o,t[6]=i*s+x*o+u*n-p*a,t[7]=x*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],x=e[3];return t[0]=a*x+s*u+n*i-o*p,t[1]=n*x+s*p+o*u-a*i,t[2]=o*x+s*i+a*p-n*u,t[3]=s*x-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],x=e[7],t[4]=a*x+s*u+n*i-o*p,t[5]=n*x+s*p+o*u-a*i,t[6]=o*x+s*i+a*p-n*u,t[7]=s*x-a*u-n*p-o*i,t}function y(r,e,a,n){if(Math.abs(n)<t.EPSILON)return f(r,e);var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,x=Math.cos(n),c=e[0],h=e[1],M=e[2],v=e[3];r[0]=c*x+v*u+h*i-M*p,r[1]=h*x+v*p+M*u-c*i,r[2]=M*x+v*i+c*p-h*u,r[3]=v*x-c*u-h*p-M*i;var l=e[4],b=e[5],P=e[6],m=e[7];return r[4]=l*x+m*u+b*i-P*p,r[5]=b*x+m*p+P*u-l*i,r[6]=P*x+m*i+l*p-b*u,r[7]=m*x-l*u-b*p-P*i,r}function q(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function L(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],x=e[7],c=r[4],f=r[5],h=r[6],M=r[7],v=e[0],l=e[1],b=e[2],P=e[3];return t[0]=a*P+s*v+n*b-o*l,t[1]=n*P+s*l+o*v-a*b,t[2]=o*P+s*b+a*l-n*v,t[3]=s*P-a*v-n*l-o*b,t[4]=a*x+s*u+n*i-o*p+c*P+M*v+f*b-h*l,t[5]=n*x+s*p+o*u-a*i+f*P+M*l+h*v-c*b,t[6]=o*x+s*i+a*p-n*u+h*P+M*b+c*l-f*v,t[7]=s*x-a*u-n*p-o*i+M*P-c*v-f*l-h*b,t}exports.setReal=b;var Y=L;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=Y;var j=r.dot;function _(t,r,e,a){var n=1-a;return j(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=D(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=j;var S=r.length;exports.length=S;var w=S;exports.len=w;var D=r.squaredLength;exports.squaredLength=D;var B=D;function Q(t,r){var e=D(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],x=r[7],c=a*u+n*p+o*i+s*x;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*c)/e,t[5]=(p-n*c)/e,t[6]=(i-o*c)/e,t[7]=(x-s*c)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function X(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function Z(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],x=r[7],c=e[0],f=e[1],h=e[2],M=e[3],v=e[4],l=e[5],b=e[6],P=e[7];return Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(n-f)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-M)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-v)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(p-l)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(l))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(x-P)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"EOux","./quat.js":"qTfE","./mat4.js":"HyAe"}],"8qeD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=v,exports.max=h,exports.round=M,exports.scale=l,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=q,exports.squaredLength=P,exports.negate=A,exports.inverse=O,exports.normalize=y,exports.dot=g,exports.cross=E,exports.lerp=R,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=j,exports.transformMat3=w,exports.transformMat4=D,exports.rotate=L,exports.angle=I,exports.str=T,exports.exactEquals=N,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var r=t(require("./common.js"));function t(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};n.get||n.set?Object.defineProperty(t,e,n):t[e]=r[e]}return t.default=r,t}function e(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function n(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function a(r,t){return r[0]=t[0],r[1]=t[1],r}function s(r,t,e){return r[0]=t,r[1]=e,r}function u(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function i(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function c(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function p(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function x(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function f(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function v(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function h(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function M(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function l(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function d(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function m(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}function b(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function q(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)}function P(r){var t=r[0],e=r[1];return t*t+e*e}function A(r,t){return r[0]=-t[0],r[1]=-t[1],r}function O(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function y(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o),r[0]=t[0]*o,r[1]=t[1]*o),r}function g(r,t){return r[0]*t[0]+r[1]*t[1]}function E(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}function R(r,t,e,n){var o=t[0],a=t[1];return r[0]=o+n*(e[0]-o),r[1]=a+n*(e[1]-a),r}function Y(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function _(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r}function j(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o+e[4],r[1]=e[1]*n+e[3]*o+e[5],r}function w(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r}function D(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[4]*o+e[12],r[1]=e[1]*n+e[5]*o+e[13],r}function L(r,t,e,n){var o=t[0]-e[0],a=t[1]-e[1],s=Math.sin(n),u=Math.cos(n);return r[0]=o*u-a*s+e[0],r[1]=o*s+a*u+e[1],r}function I(r,t){var e=r[0],n=r[1],o=t[0],a=t[1],s=e*e+n*n;s>0&&(s=1/Math.sqrt(s));var u=o*o+a*a;u>0&&(u=1/Math.sqrt(u));var i=(e*o+n*a)*s*u;return i>1?0:i<-1?Math.PI:Math.acos(i)}function T(r){return"vec2("+r[0]+", "+r[1]+")"}function N(r,t){return r[0]===t[0]&&r[1]===t[1]}function S(t,e){var n=t[0],o=t[1],a=e[0],s=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))}var z=q;exports.len=z;var F=i;exports.sub=F;var V=c;exports.mul=V;var k=p;exports.div=k;var B=m;exports.dist=B;var C=b;exports.sqrDist=C;var G=P;exports.sqrLen=G;var H=function(){var r=e();return function(t,e,n,o,a,s){var u=void 0,i=void 0;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,t.length):t.length,u=n;u<i;u+=e)r[0]=t[u],r[1]=t[u+1],a(r,r,s),t[u]=r[0],t[u+1]=r[1];return t}}();exports.forEach=H;
},{"./common.js":"EOux"}],"DMY6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var r=m(require("./gl-matrix/common.js"));exports.glMatrix=r;var e=m(require("./gl-matrix/mat2.js"));exports.mat2=e;var t=m(require("./gl-matrix/mat2d.js"));exports.mat2d=t;var a=m(require("./gl-matrix/mat3.js"));exports.mat3=a;var s=m(require("./gl-matrix/mat4.js"));exports.mat4=s;var o=m(require("./gl-matrix/quat.js"));exports.quat=o;var i=m(require("./gl-matrix/quat2.js"));exports.quat2=i;var x=m(require("./gl-matrix/vec2.js"));exports.vec2=x;var p=m(require("./gl-matrix/vec3.js"));exports.vec3=p;var u=m(require("./gl-matrix/vec4.js"));function m(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};a.get||a.set?Object.defineProperty(e,t,a):e[t]=r[t]}return e.default=r,e}exports.vec4=u;
},{"./gl-matrix/common.js":"EOux","./gl-matrix/mat2.js":"Orun","./gl-matrix/mat2d.js":"GgX4","./gl-matrix/mat3.js":"DqWC","./gl-matrix/mat4.js":"HyAe","./gl-matrix/quat.js":"qTfE","./gl-matrix/quat2.js":"sQDk","./gl-matrix/vec2.js":"8qeD","./gl-matrix/vec3.js":"sfqs","./gl-matrix/vec4.js":"RAno"}],"O1q9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/checks/is-arraylike"),e=require("@thi.ng/math/api"),s=require("./codegen"),r=require("./common"),o=require("./vec3"),i=require("./vec4");exports.get33=((t,e=0)=>t.slice(e,e+9)),exports.set33=((t,e,s=0,r=0)=>(t[s]=e[r],t[s+1]=e[r+1],t[s+2]=e[r+2],t[s+3]=e[r+3],t[s+4]=e[r+4],t[s+5]=e[r+5],t[s+6]=e[r+6],t[s+7]=e[r+7],t[s+8]=e[r+8],t)),exports.setS33=((t,e,s,r,o,i,n,u,p,a,x=0)=>(t[x]=e,t[x+1]=s,t[x+2]=r,t[x+3]=o,t[x+4]=i,t[x+5]=n,t[x+6]=u,t[x+7]=p,t[x+8]=a,t)),exports.identity33=((t,e=0)=>exports.setS33(t||[],1,0,0,0,1,0,0,0,1,e)),exports.rotationX33=((t,e,s=0)=>{const r=Math.sin(e),o=Math.cos(e);return exports.setS33(t||[],1,0,0,0,o,r,0,-r,o,s)}),exports.rotationY33=((t,e,s=0)=>{const r=Math.sin(e),o=Math.cos(e);return exports.setS33(t||[],o,0,-r,0,1,0,r,0,o,s)}),exports.rotationZ33=((t,e,s=0)=>{const r=Math.sin(e),o=Math.cos(e);return exports.setS33(t||[],o,r,0,-r,o,0,0,0,1,s)}),exports.scaleV33=((t,e,s=0,r=0,o=1)=>exports.scaleS33(t,e[r],e[r+o],e[r+2*o],s)),exports.scaleN33=((t,e,s=0)=>exports.scaleS33(t,e,e,e,s)),exports.scaleS33=((t,e,s,r,o=0)=>exports.setS33(t||[],e,0,0,0,s,0,0,0,r,o)),exports.mul33=((t,e,s=0,r=0)=>exports.setS33(t,o.dot3(t,e,s,r,3),o.dot3(t,e,s+1,r,3),o.dot3(t,e,s+2,r,3),o.dot3(t,e,s,r+3,3),o.dot3(t,e,s+1,r+3,3),o.dot3(t,e,s+2,r+3,3),o.dot3(t,e,s,r+6,3),o.dot3(t,e,s+1,r+6,3),o.dot3(t,e,s+2,r+6,3),s)),exports.concat33=((e,s,...r)=>r.reduce((e,r)=>t.isArrayLike(r[0])?exports.mul33(e,r[0],s,r[1]):exports.mul33(e,r,s),e)),exports.mulV33=((t,e,s=0,r=0,i=1)=>o.setS3(t,o.dot3(e,t,r,s,3,i),o.dot3(e,t,r+1,s,3,i),o.dot3(e,t,r+2,s,3,i),s,i)),exports.det33=((t,e=0)=>{const s=t[e],r=t[e+1],o=t[e+2],i=t[e+3],n=t[e+4],u=t[e+5],p=t[e+6],a=t[e+7],x=t[e+8];return s*(x*n-u*a)+r*(-x*i+u*p)+o*(a*i-n*p)}),exports.invert33=((t,e=0)=>{const s=t[e],r=t[e+1],o=t[e+2],i=t[e+3],n=t[e+4],u=t[e+5],p=t[e+6],a=t[e+7],x=t[e+8],c=x*n-u*a,h=-x*i+u*p,l=a*i-n*p;let d=s*c+r*h+o*l;if(d)return d=1/d,exports.setS33(t,c*d,(-x*r+o*a)*d,(u*r-o*n)*d,h*d,(x*s-o*p)*d,(-u*s+o*i)*d,l*d,(-a*s+r*p)*d,(n*s-r*i)*d,e)}),exports.transpose33=((t,e=0)=>exports.setS33(t,t[e],t[e+3],t[e+6],t[e+1],t[e+4],t[e+7],t[e+2],t[e+5],t[e+8],e)),exports.mat33to44=((t,e,s=0,r=0)=>(o.set3(t,e,s,r),o.set3(t,e,s+4,r+3),o.set3(t,e,s+8,r+6),o.setS3(t,0,0,0,s+12),i.setS4(t,0,0,0,1,s+3,4),t));class n{static identity(){return new n(exports.identity33())}static rotationX(t){return new n(exports.rotationX33([],t))}static rotationY(t){return new n(exports.rotationY33([],t))}static rotationZ(t){return new n(exports.rotationZ33([],t))}static scale(t,e=t,s=t){return new n(t instanceof o.Vec3?exports.scaleV33([],t.buf,0,t.i):exports.scaleS33([],t,e,s))}static concat(t,...e){return new n(exports.concat33.apply(null,[exports.get33(t.buf,t.i),0,...e.map(t=>[t.buf,t.i])]))}constructor(t,e=0){this.buf=t||[0,0,0,0,0,0,0,0,0],this.i=e}[Symbol.iterator](){return r.$iter(this.buf,9,this.i)}get length(){return 9}copy(){return new n(exports.get33(this.buf,this.i))}eqDelta(t,s=e.EPS){return r.eqDelta(this.buf,t.buf,9,s,this.i,t.i)}identity(){return exports.identity33(this.buf,this.i),this}set(t){return exports.set33(this.buf,t.buf,this.i,t.i),this}setS(t,e,s,r,o,i,n,u,p){return exports.setS33(this.buf,t,e,s,r,o,i,n,u,p,this.i),this}mul(t){return exports.mul33(this.buf,t.buf,this.i,t.i),this}mulV(t){return exports.mulV33(t.buf,this.buf,t.i,this.i,t.s),t}determinant(){return exports.det33(this.buf,this.i)}invert(){return exports.invert33(this.buf,this.i),this}transpose(){return exports.transpose33(this.buf,this.i),this}toString(){const t=exports.get33(this.buf,this.i).map(t=>t.toFixed(4));return`${t[0]} ${t[3]} ${t[6]}\n${t[1]} ${t[4]} ${t[7]}\n${t[2]} ${t[5]} ${t[8]}`}toJSON(){return exports.get33(this.buf,this.i)}}exports.Mat33=n,s.declareIndices(n.prototype,["m00","m01","m02","m10","m11","m12","m20","m21","m22"]);
},{"@thi.ng/checks/is-arraylike":"aMkR","@thi.ng/math/api":"zd6y","./codegen":"i8Zj","./common":"aZmO","./vec3":"K9zr","./vec4":"Lylz"}],"CMHc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/checks/is-arraylike"),e=require("./codegen"),r=require("./common"),s=require("./mat33"),o=require("./vec3"),i=require("./vec4"),n=require("@thi.ng/math/api");exports.get44=((t,e=0)=>t.slice(e,e+16)),exports.set44=((t,e,r=0,s=0)=>{for(let o=0;o<16;o++)t[r+o]=e[s+o];return t}),exports.setS44=((t,e,r,s,o,i,n,u,p,a,x,c,h,l,m,f,d,b=0)=>(t[b]=e,t[b+1]=r,t[b+2]=s,t[b+3]=o,t[b+4]=i,t[b+5]=n,t[b+6]=u,t[b+7]=p,t[b+8]=a,t[b+9]=x,t[b+10]=c,t[b+11]=h,t[b+12]=l,t[b+13]=m,t[b+14]=f,t[b+15]=d,t)),exports.identity44=((t,e=0)=>exports.setS44(t||[],1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e)),exports.rotationX44=((t,e,r=0)=>{const s=Math.sin(e),o=Math.cos(e);return exports.setS44(t||[],1,0,0,0,0,o,s,0,0,-s,o,0,0,0,0,1,r)}),exports.rotationY44=((t,e,r=0)=>{const s=Math.sin(e),o=Math.cos(e);return exports.setS44(t||[],o,0,-s,0,0,1,0,0,s,0,o,0,0,0,0,1,r)}),exports.rotationZ44=((t,e,r=0)=>{const s=Math.sin(e),o=Math.cos(e);return exports.setS44(t||[],o,s,0,0,-s,o,0,0,0,0,1,0,0,0,0,1,r)}),exports.scaleV44=((t,e,r=0,s=0,o=1)=>exports.scaleS44(t,e[s],e[s+o],e[s+2*o],r)),exports.scaleN44=((t,e,r=0)=>exports.scaleS44(t,e,e,e,r)),exports.scaleS44=((t,e,r,s,o=0)=>exports.setS44(t||[],e,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1,o)),exports.scaleWithCenter44=((t,e,r,s,o,i=0,n=0,u=1)=>exports.concat44(exports.translationV44(t||[],e,i,n,u),i,exports.scaleS44([],r,s,o),exports.translationS44([],-e[n],-e[n+u],-e[n+2*u]))),exports.translationV44=((t,e,r=0,s=0,o=1)=>exports.translationS44(t,e[s],e[s+o],e[s+2*o],r)),exports.translationS44=((t,e,r,s,o=0)=>exports.setS44(t||[],1,0,0,0,0,1,0,0,0,0,1,0,e,r,s,1,o)),exports.frustum=((t,e,r,s,o,i,n,u=0)=>{const p=1/(r-e),a=1/(o-s),x=1/(n-i);return exports.setS44(t||[],2*i*p,0,0,0,0,2*i*a,0,0,(r+e)*p,(o+s)*a,-(n+i)*x,-1,0,0,-n*i*2*x,0,u)}),exports.frustumBounds=((t,e,r,s)=>{const o=r*Math.tan(t*n.DEG2RAD/2),i=o*e;return{left:-i,right:i,bottom:-o,top:o,near:r,far:s}}),exports.perspective=((t,e,r,s,o,i=0)=>{const n=exports.frustumBounds(e,r,s,o);return exports.frustum(t||[],n.left,n.right,n.bottom,n.top,n.near,n.far,i)}),exports.ortho=((t,e,r,s,o,i,n,u=0)=>{const p=1/(r-e),a=1/(o-s),x=1/(n-i);return exports.setS44(t||[],2*p,0,0,0,0,2*a,0,0,0,0,-2*x,0,-(e+r)*p,-(o+s)*a,-(n+i)*x,1,u)}),exports.lookAt=((t,e,r,s,i=0,n=0,u=0,p=0,a=1,x=1,c=1)=>{const h=o.normalize3(o.sub3(o.get3(e,n,a),o.get3(r,u,x))),l=o.normalize3(o.cross3(o.get3(s,p,c),h)),m=o.normalize3(o.cross3([...h],l));return exports.setS44(t||[],l[0],m[0],h[0],0,l[1],m[1],h[1],0,l[2],m[2],h[2],0,-o.dot3(e,l,n,0,a),-o.dot3(e,m,n,0,a),-o.dot3(e,h,n,0,a),1,i)}),exports.mul44=((t,e,r=0,s=0)=>exports.setS44(t,i.dot4(t,e,r,s,4),i.dot4(t,e,r+1,s,4),i.dot4(t,e,r+2,s,4),i.dot4(t,e,r+3,s,4),i.dot4(t,e,r,s+4,4),i.dot4(t,e,r+1,s+4,4),i.dot4(t,e,r+2,s+4,4),i.dot4(t,e,r+3,s+4,4),i.dot4(t,e,r,s+8,4),i.dot4(t,e,r+1,s+8,4),i.dot4(t,e,r+2,s+8,4),i.dot4(t,e,r+3,s+8,4),i.dot4(t,e,r,s+12,4),i.dot4(t,e,r+1,s+12,4),i.dot4(t,e,r+2,s+12,4),i.dot4(t,e,r+3,s+12,4),r)),exports.concat44=((e,r,...s)=>s.reduce((e,s)=>t.isArrayLike(s[0])?exports.mul44(e,s[0],r,s[1]):exports.mul44(e,s,r),e)),exports.mulV344=((t,e,r=0,s=0,i=1)=>o.setS3(t,o.dot3(e,t,s,r,4,i)+e[12],o.dot3(e,t,s+1,r,4,i)+e[13],o.dot3(e,t,s+2,r,4,i)+e[14],r,i)),exports.mulV44=((t,e,r=0,s=0,o=1)=>i.setS4(t,i.dot4(e,t,s,r,4,o),i.dot4(e,t,s+1,r,4,o),i.dot4(e,t,s+2,r,4,o),i.dot4(e,t,s+3,r,4,o),r,o));const u=(t,e=0)=>{const r=t[e],s=t[e+1],o=t[e+2],i=t[e+3],n=t[e+4],u=t[e+5],p=t[e+6],a=t[e+7],x=t[e+8],c=t[e+9],h=t[e+10],l=t[e+11],m=t[e+12],f=t[e+13],d=t[e+14],b=t[e+15];return[r*u-s*n,r*p-o*n,r*a-i*n,s*p-o*u,s*a-i*u,o*a-i*p,x*f-c*m,x*d-h*m,x*b-l*m,c*d-h*f,c*b-l*f,h*b-l*d]};exports.det44=((t,e=0)=>{const r=u(t,e);return r[0]*r[11]-r[1]*r[10]+r[2]*r[9]+r[3]*r[8]-r[4]*r[7]+r[5]*r[6]}),exports.invert44=((t,e=0)=>{const r=t[e],s=t[e+1],o=t[e+2],i=t[e+3],n=t[e+4],p=t[e+5],a=t[e+6],x=t[e+7],c=t[e+8],h=t[e+9],l=t[e+10],m=t[e+11],f=t[e+12],d=t[e+13],b=t[e+14],S=t[e+15],$=u(t,e),g=$[0],w=$[1],y=$[2],M=$[3],V=$[4],q=$[5],v=$[6],k=$[7],A=$[8],D=$[9],z=$[10],C=$[11];let W=g*C-w*z+y*D+M*A-V*k+q*v;if(W)return W=1/W,exports.setS44(t,(p*C-a*z+x*D)*W,(-s*C+o*z-i*D)*W,(d*q-b*V+S*M)*W,(-h*q+l*V-m*M)*W,(-n*C+a*A-x*k)*W,(r*C-o*A+i*k)*W,(-f*q+b*y-S*w)*W,(c*q-l*y+m*w)*W,(n*z-p*A+x*v)*W,(-r*z+s*A-i*v)*W,(f*V-d*y+S*g)*W,(-c*V+h*y-m*g)*W,(-n*D+p*k-a*v)*W,(r*D-s*k+o*v)*W,(-f*M+d*w-b*g)*W,(c*M-h*w+l*g)*W,e)}),exports.transpose44=((t,e=0)=>exports.setS44(t,t[e],t[e+4],t[e+8],t[e+12],t[e+1],t[e+5],t[e+9],t[e+13],t[e+2],t[e+6],t[e+10],t[e+14],t[e+3],t[e+7],t[e+11],t[e+15],e)),exports.normal44=((t,e,r=0,s=0)=>{const o=e[s],i=e[s+1],n=e[s+2],u=e[s+4],p=e[s+5],a=e[s+6],x=e[s+8],c=e[s+9],h=e[s+10],l=h*p-a*c,m=-h*u+a*x,f=c*u-p*x;let d=o*l+i*m+n*f;if(d)return d=1/d,t[r]=l*d,t[r+1]=m*d,t[r+2]=f*d,t[r+3]=(-h*i+n*c)*d,t[r+4]=(h*o-n*x)*d,t[r+5]=(-c*o+i*x)*d,t[r+6]=(a*i-n*p)*d,t[r+7]=(-a*o+n*u)*d,t[r+8]=(p*o-i*u)*d,t}),exports.mat44to33=((t,e,r=0,s=0)=>(o.set3(t,e,r,s),o.set3(t,e,r+3,s+4),o.set3(t,e,r+6,s+8),t));class p{static identity(){return new p(exports.identity44())}static rotationX(t){return new p(exports.rotationX44([],t))}static rotationY(t){return new p(exports.rotationY44([],t))}static rotationZ(t){return new p(exports.rotationZ44([],t))}static scale(t,e=t,r=t){return new p(t instanceof o.Vec3?exports.scaleV44([],t.buf,0,t.i):exports.scaleS44([],t,e,r))}static scaleWithCenter(t,e,r=e,s=r){return new p(exports.scaleWithCenter44([],t.buf,e,r,s,t.i,t.s))}static translation(t,e,r){return new p(t instanceof o.Vec3?exports.translationV44([],t.buf,0,t.i):exports.translationS44([],t,e,r))}static perspective(t,e,r,s){return new p(exports.perspective([],t,e,r,s))}static ortho(t,e,r,s,o,i){return new p(exports.ortho([],t,e,r,s,o,i))}static frustum(t,e,r,s,o,i){return new p(exports.frustum([],t,e,r,s,o,i))}static lookAt(t,e,r){return new p(exports.lookAt([],t.buf,e.buf,r.buf,0,t.i,e.i,r.i,t.s,e.s,r.s))}static concat(t,...e){return new p(exports.concat44.apply(null,[exports.get44(t.buf,t.i),0,...e.map(t=>[t.buf,t.i])]))}constructor(t,e=0){this.buf=t||new Array(16).fill(0),this.i=e}[Symbol.iterator](){return r.$iter(this.buf,16,this.i)}get length(){return 16}copy(){return new p(exports.get44(this.buf,this.i))}eqDelta(t,e=n.EPS){return r.eqDelta(this.buf,t.buf,16,e,this.i,t.i)}identity(){return exports.identity44(this.buf,this.i),this}set(t){return exports.set44(this.buf,t.buf,this.i,t.i),this}setS(t,e,r,s,o,i,n,u,p,a,x,c,h,l,m,f){return exports.setS44(this.buf,t,e,r,s,o,i,n,u,p,a,x,c,h,l,m,f,this.i),this}mul(t){return exports.mul44(this.buf,t.buf,this.i,t.i),this}mulV3(t){return exports.mulV344(t.buf,this.buf,t.i,this.i,t.s),t}mulV(t){return exports.mulV44(t.buf,this.buf,t.i,this.i,t.s),t}determinant(){return exports.det44(this.buf,this.i)}invert(){return exports.invert44(this.buf,this.i),this}transpose(){return exports.transpose44(this.buf,this.i),this}normalMat(t){return!t&&(t=new s.Mat33([])),exports.normal44(t.buf,this.buf,t.i,this.i),t}toMat33(t){return!t&&(t=new s.Mat33([])),exports.mat44to33(t.buf,this.buf,t.i,this.i),t}toString(){const t=exports.get44(this.buf,this.i).map(t=>t.toFixed(4));return`${t[0]} ${t[4]} ${t[8]} ${t[12]}\n${t[1]} ${t[5]} ${t[9]} ${t[13]}\n${t[2]} ${t[6]} ${t[10]} ${t[14]}\n${t[3]} ${t[7]} ${t[11]} ${t[15]}`}toJSON(){return exports.get44(this.buf,this.i)}}exports.Mat44=p,e.declareIndices(p.prototype,["m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33"]);
},{"@thi.ng/checks/is-arraylike":"aMkR","./codegen":"i8Zj","./common":"aZmO","./mat33":"O1q9","./vec3":"K9zr","./vec4":"Lylz","@thi.ng/math/api":"zd6y"}],"dkZe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("gl-matrix"),e=require("@thi.ng/vectors/vec3"),i=require("@thi.ng/vectors/mat44"),s=require("@thi.ng/vectors/mat33");function o(t,e,s,o){let r=e[0],n=e[1],h=e[2],l=e[3],a=r+r,c=n+n,d=h+h,u=r*a,m=r*c,_=r*d,p=n*c,y=n*d,g=h*d,q=l*a,w=l*c,D=l*d,f=o[0],v=o[1],M=o[2];i.setS44(t.buf,(1-(p+g))*f,(m+D)*f,(_-w)*f,0,(m-D)*v,(1-(u+g))*v,(y+q)*v,0,(_+w)*M,(y-q)*M,(1-(u+p))*M,0,s[0],s[1],s[2],1)}function r(t,e){let i=e[0],o=e[1],r=e[2],n=e[3],h=e[4],l=e[5],a=e[6],c=e[7],d=e[8],u=e[9],m=e[10],_=e[11],p=e[12],y=e[13],g=e[14],q=e[15],w=i*l-o*h,D=i*a-r*h,f=i*c-n*h,v=o*a-r*l,M=o*c-n*l,V=r*c-n*a,b=d*y-u*p,x=d*g-m*p,S=d*q-_*p,j=u*g-m*y,N=u*q-_*y,O=m*q-_*g,P=w*O-D*N+f*j+v*S-M*x+V*b;return P?(P=1/P,s.setS33(t.buf,(l*O-a*N+c*j)*P,(a*S-h*O-c*x)*P,(h*N-l*S+c*b)*P,(r*N-o*O-n*j)*P,(i*O-r*S+n*x)*P,(o*S-i*N-n*b)*P,(y*V-g*M+q*v)*P,(g*f-p*V-q*D)*P,(p*M-y*f+q*w)*P),t):null}class n{constructor(){this._position=new e.Vec3,this._rotation=t.quat.identity(t.quat.create()),this._scale=new e.Vec3([1,1,1]),this._model=i.Mat44.identity(),this._modelDirty=!0,this.modelView=i.Mat44.identity(),this.normal=new s.Mat33,this.children=[]}set position(t){this._position.set(t),this._modelDirty=!0}get position(){return this._position}set rotation(t){this._rotation=t,this._modelDirty=!0}get rotation(){return this._rotation}set scale(t){this._scale.set(t),this._modelDirty=!0}get scale(){return this._scale}get model(){return this._modelDirty&&(o(this._model,this.rotation,this.position,this.scale),this._modelDirty=!1),this._model}updateMatrices(t){this.modelView=t.copy().mul(this.model),r(this.normal,this.modelView)}add(t){t.parent=this,this.children.push(t)}}exports.Node=n;
},{"gl-matrix":"DMY6","@thi.ng/vectors/vec3":"K9zr","@thi.ng/vectors/mat44":"CMHc","@thi.ng/vectors/mat33":"O1q9"}],"Yyjp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./node");class t extends e.Node{update(){}resize(e,t){this.width=e,this.height=t}}exports.Scene=t;
},{"./node":"dkZe"}],"wdeG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./node");class t extends e.Node{constructor(e,t,s=4){super(),this.geometry=e,this.material=t,this.type=s}}exports.Mesh=t;
},{"./node":"dkZe"}],"186t":[function(require,module,exports) {
var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var o=new Uint8Array(16);module.exports=function(){return e(o),o}}else{var r=new Array(16);module.exports=function(){for(var e,o=0;o<16;o++)0==(3&o)&&(e=4294967296*Math.random()),r[o]=e>>>((3&o)<<3)&255;return r}}
},{}],"NxCc":[function(require,module,exports) {
for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);function t(o,t){var n=t||0,u=r;return[u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]]].join("")}module.exports=t;
},{}],"A0Zv":[function(require,module,exports) {
var r=require("./lib/rng"),n=require("./lib/bytesToUuid");function e(e,i,u){var a=i&&u||0;"string"==typeof e&&(i="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i)for(var o=0;o<16;++o)i[a+o]=l[o];return i||n(l)}module.exports=e;
},{"./lib/rng":"186t","./lib/bytesToUuid":"NxCc"}],"jdMK":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const e=t(require("uuid/v4"));class r{constructor(t,r,s={}){this.vert=t,this.frag=r,this.uniforms=s,this.id=e.default()}}exports.Material=r;
},{"uuid/v4":"A0Zv"}],"Ubq3":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,r=arguments[3];!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof e&&e.amd?e([],t):"object"==typeof exports?exports.twgl=t():r.twgl=t()}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=9)}([function(e,r,t){"use strict";r.__esModule=!0,r.copyExistingProperties=function(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})},r.copyNamedProperties=function(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})},r.isBuffer=function(e,r){i||(i=e.createBuffer());return r instanceof i.constructor},r.isRenderbuffer=function(e,r){u||(u=e.createRenderbuffer());return r instanceof u.constructor},r.isShader=function(e,r){f||(f=e.createShader(e.VERTEX_SHADER));return r instanceof f.constructor},r.isTexture=function(e,r){s||(s=e.createTexture());return r instanceof s.constructor},r.isSampler=function(e,r){if(!c){if(!e.createSampler)return!1;c=e.createSampler()}return r instanceof c.constructor},r.warn=r.error=void 0;var n,a=(n=t(2))&&n.__esModule?n:{default:n};var o=a.default.console&&a.default.console.error&&"function"==typeof a.default.console.error?a.default.console.error.bind(a.default.console):function(){};r.error=o;var i,u,f,s,c,l=a.default.console&&a.default.console.warn&&"function"==typeof a.default.console.warn?a.default.console.warn.bind(a.default.console):function(){};r.warn=l},function(e,r,t){"use strict";r.__esModule=!0,r.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return o;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return u;if(e instanceof Uint16Array)return f;if(e instanceof Int32Array)return s;if(e instanceof Uint32Array)return c;if(e instanceof Float32Array)return l;throw"unsupported typed array type"},r.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return o;if(e===Uint8Array)return i;if(e===Uint8ClampedArray)return i;if(e===Int16Array)return u;if(e===Uint16Array)return f;if(e===Int32Array)return s;if(e===Uint32Array)return c;if(e===Float32Array)return l;throw"unsupported typed array type"},r.getTypedArrayTypeForGLType=function(e){var r=m[e];if(!r)throw"unknown gl type";return r},r.isArrayBuffer=void 0;var n,a=(n=t(2))&&n.__esModule?n:{default:n};var o=5120,i=5121,u=5122,f=5123,s=5124,c=5125,l=5126,m={},p=m;p[o]=Int8Array,p[i]=Uint8Array,p[u]=Int16Array,p[f]=Uint16Array,p[s]=Int32Array,p[c]=Uint32Array,p[l]=Float32Array,p[32819]=Uint16Array,p[32820]=Uint16Array,p[33635]=Uint16Array,p[5131]=Uint16Array,p[33640]=Uint32Array,p[35899]=Uint32Array,p[35902]=Uint32Array,p[36269]=Uint32Array,p[34042]=Uint32Array;var d=a.default.SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof a.default.SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};r.isArrayBuffer=d},function(e,r,t){"use strict";r.__esModule=!0,r.default=void 0;var n=void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};r.default=n},function(e,r,t){"use strict";r.__esModule=!0,r.add=function(e,r,t){return(t=t||new n(3))[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},r.copy=function(e,r){return(r=r||new n(3))[0]=e[0],r[1]=e[1],r[2]=e[2],r},r.create=function(e,r,t){var a=new n(3);e&&(a[0]=e);r&&(a[1]=r);t&&(a[2]=t);return a},r.cross=function(e,r,t){t=t||new n(3);var a=e[2]*r[0]-e[0]*r[2],o=e[0]*r[1]-e[1]*r[0];return t[0]=e[1]*r[2]-e[2]*r[1],t[1]=a,t[2]=o,t},r.distance=function(e,r){var t=e[0]-r[0],n=e[1]-r[1],a=e[2]-r[2];return Math.sqrt(t*t+n*n+a*a)},r.distanceSq=function(e,r){var t=e[0]-r[0],n=e[1]-r[1],a=e[2]-r[2];return t*t+n*n+a*a},r.divide=function(e,r,t){return(t=t||new n(3))[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},r.divScalar=function(e,r,t){return(t=t||new n(3))[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t},r.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},r.lerp=function(e,r,t,a){return(a=a||new n(3))[0]=(1-t)*e[0]+t*r[0],a[1]=(1-t)*e[1]+t*r[1],a[2]=(1-t)*e[2]+t*r[2],a},r.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},r.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},r.mulScalar=function(e,r,t){return(t=t||new n(3))[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},r.multiply=function(e,r,t){return(t=t||new n(3))[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},r.negate=function(e,r){return(r=r||new n(3))[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r},r.normalize=function(e,r){r=r||new n(3);var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=Math.sqrt(t);a>1e-5?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=0,r[1]=0,r[2]=0);return r},r.setDefaultType=function(e){var r=n;return n=e,r},r.subtract=function(e,r,t){return(t=t||new n(3))[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t};var n=Float32Array},function(e,r,t){"use strict";r.__esModule=!0,r.isWebGL1=function(e){return!e.texStorage2D},r.isWebGL2=function(e){return!!e.texStorage2D},r.glEnumToString=void 0;var n=function(){var e={},r={};return function(t,n){return function(t){var n=t.constructor.name;if(!e[n]){for(var a in t)if("number"==typeof t[a]){var o=r[t[a]];r[t[a]]=o?"".concat(o," | ").concat(a):a}e[n]=!0}}(t),r[n]||"0x"+n.toString(16)}}();r.glEnumToString=n},function(e,r,t){"use strict";r.__esModule=!0,r.createAttributeSetters=X,r.createProgram=I,r.createProgramFromScripts=function(e,r,t,n,a){for(var o=U(t,n,a),i=[],u=0;u<r.length;++u){var f=S(e,r[u],e[w[u]],o.errorCallback);if(!f)return null;i.push(f)}return I(e,i,o)},r.createProgramFromSources=C,r.createProgramInfo=function(e,r,t,n,a){var o=U(t,n,a),i=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=c(e);r?e=r.text:(o.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;var u=C(e,r,o);if(!u)return null;return Y(e,u)},r.createProgramInfoFromProgram=Y,r.createUniformSetters=D,r.createUniformBlockSpecFromProgram=k,r.createUniformBlockInfoFromProgram=z,r.createUniformBlockInfo=function(e,r,t){return z(e,r.program,r.uniformBlockSpec,t)},r.createTransformFeedback=function(e,r,t){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(r.program),L(e,r,t),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),function(e,r,t){for(var n in r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var a=r[n];a&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,a.index,null)}}(e,r,t),n},r.createTransformFeedbackInfo=N,r.bindTransformFeedbackInfo=L,r.setAttributes=V,r.setBuffersAndAttributes=function(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(V(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))},r.setUniforms=function e(r,t){var n=r.uniformSetters||r;var a=arguments.length;for(var o=1;o<a;++o){var i=arguments[o];if(Array.isArray(i))for(var u=i.length,f=0;f<u;++f)e(n,i[f]);else for(var s in i){var c=n[s];c&&c(i[s])}}},r.setUniformBlock=function(e,r,t){G(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)},r.setBlockUniforms=function(e,r){var t=e.uniforms;for(var n in r){var a=t[n];if(a){var o=r[n];o.length?a.set(o):a[0]=o}}},r.bindUniformBlock=G;var n,a=u(t(4)),o=u(t(0)),i=(n=t(2))&&n.__esModule?n:{default:n};function u(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var f=o.error,s=o.warn,c=i.default&&i.default.document&&i.default.document.getElementById?i.default.document.getElementById.bind(i.default.document):function(){return null},l={};function m(e,r){return l[r].bindPoint}function p(e,r){return function(t){e.uniform1i(r,t)}}function d(e,r){return function(t){e.uniform1iv(r,t)}}function y(e,r){return function(t){e.uniform2iv(r,t)}}function b(e,r){return function(t){e.uniform3iv(r,t)}}function v(e,r){return function(t){e.uniform4iv(r,t)}}function E(e,r,t,n){var i=m(0,r);return a.isWebGL2(e)?function(r){var a,u;o.isTexture(e,r)?(a=r,u=null):(a=r.texture,u=r.sampler),e.uniform1i(n,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(i,a),e.bindSampler(t,u)}:function(r){e.uniform1i(n,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(i,r)}}function h(e,r,t,n,i){for(var u=m(0,r),f=new Int32Array(i),s=0;s<i;++s)f[s]=t+s;return a.isWebGL2(e)?function(r){e.uniform1iv(n,f),r.forEach(function(r,n){var a,i;e.activeTexture(e.TEXTURE0+f[n]),o.isTexture(e,r)?(a=r,i=null):(a=r.texture,i=r.sampler),e.bindSampler(t,i),e.bindTexture(u,a)})}:function(r){e.uniform1iv(n,f),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+f[t]),e.bindTexture(u,r)})}}function _(e,r){return function(t){t.value?(e.disableVertexAttribArray(r),e.vertexAttrib4fv(r,t.value)):(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor))}}function A(e,r){return function(t){t.value?(e.disableVertexAttribArray(r),e.vertexAttrib4iv(r,t.value)):(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||e.INT,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor))}}function T(e,r){return function(t){t.value?(e.disableVertexAttribArray(r),e.vertexAttrib4uiv(r,t.value)):(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||e.UNSIGNED_INT,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor))}}function x(e,r,t){var n=t.size,a=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var o=t.size||t.numComponents||n,i=o/a,u=t.type||e.FLOAT,f=l[u].size*o,s=t.normalize||!1,c=t.offset||0,m=f/a,p=0;p<a;++p)e.enableVertexAttribArray(r+p),e.vertexAttribPointer(r+p,i,u,s,f,c+m*p),void 0!==t.divisor&&e.vertexAttribDivisor(r+p,t.divisor)}}l[5126]={Type:Float32Array,size:4,setter:function(e,r){return function(t){e.uniform1f(r,t)}},arraySetter:function(e,r){return function(t){e.uniform1fv(r,t)}}},l[35664]={Type:Float32Array,size:8,setter:function(e,r){return function(t){e.uniform2fv(r,t)}}},l[35665]={Type:Float32Array,size:12,setter:function(e,r){return function(t){e.uniform3fv(r,t)}}},l[35666]={Type:Float32Array,size:16,setter:function(e,r){return function(t){e.uniform4fv(r,t)}}},l[5124]={Type:Int32Array,size:4,setter:p,arraySetter:d},l[35667]={Type:Int32Array,size:8,setter:y},l[35668]={Type:Int32Array,size:12,setter:b},l[35669]={Type:Int32Array,size:16,setter:v},l[5125]={Type:Uint32Array,size:4,setter:function(e,r){return function(t){e.uniform1ui(r,t)}},arraySetter:function(e,r){return function(t){e.uniform1uiv(r,t)}}},l[36294]={Type:Uint32Array,size:8,setter:function(e,r){return function(t){e.uniform2uiv(r,t)}}},l[36295]={Type:Uint32Array,size:12,setter:function(e,r){return function(t){e.uniform3uiv(r,t)}}},l[36296]={Type:Uint32Array,size:16,setter:function(e,r){return function(t){e.uniform4uiv(r,t)}}},l[35670]={Type:Uint32Array,size:4,setter:p,arraySetter:d},l[35671]={Type:Uint32Array,size:8,setter:y},l[35672]={Type:Uint32Array,size:12,setter:b},l[35673]={Type:Uint32Array,size:16,setter:v},l[35674]={Type:Float32Array,size:16,setter:function(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}},l[35675]={Type:Float32Array,size:36,setter:function(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}},l[35676]={Type:Float32Array,size:64,setter:function(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}},l[35685]={Type:Float32Array,size:24,setter:function(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}},l[35686]={Type:Float32Array,size:32,setter:function(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}},l[35687]={Type:Float32Array,size:24,setter:function(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}},l[35688]={Type:Float32Array,size:48,setter:function(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}},l[35689]={Type:Float32Array,size:32,setter:function(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}},l[35690]={Type:Float32Array,size:48,setter:function(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}},l[35678]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:3553},l[35680]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:34067},l[35679]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:32879},l[35682]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:3553},l[36289]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:35866},l[36292]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:35866},l[36293]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:34067},l[36298]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:3553},l[36299]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:32879},l[36300]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:34067},l[36303]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:35866},l[36306]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:3553},l[36307]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:32879},l[36308]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:34067},l[36311]={Type:null,size:0,setter:E,arraySetter:h,bindPoint:35866};var g={};g[5126]={size:4,setter:_},g[35664]={size:8,setter:_},g[35665]={size:12,setter:_},g[35666]={size:16,setter:_},g[5124]={size:4,setter:A},g[35667]={size:8,setter:A},g[35668]={size:12,setter:A},g[35669]={size:16,setter:A},g[5125]={size:4,setter:T},g[36294]={size:8,setter:T},g[36295]={size:12,setter:T},g[36296]={size:16,setter:T},g[35670]={size:4,setter:A},g[35671]={size:8,setter:A},g[35672]={size:12,setter:A},g[35673]={size:16,setter:A},g[35674]={size:4,setter:x,count:2},g[35675]={size:9,setter:x,count:3},g[35676]={size:16,setter:x,count:4};var R=void 0;var P=/^[ \t]*\n/;function F(e,r,t,n){var a=n||f,o=e.createShader(t),i=0;if(P.test(r)&&(i=1,r=r.replace(P,"")),e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(o);return a(function(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}(r,i)+"\n*** Error compiling shader: "+u),e.deleteShader(o),null}return o}function U(e,r,t){var n;if("function"==typeof r&&(t=r,r=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var a=e;t=a.errorCallback,e=a.attribLocations,n=a.transformFeedbackVaryings}var o={errorCallback:t||f,transformFeedbackVaryings:n};if(e){var i={};Array.isArray(e)?e.forEach(function(e,t){i[e]=r?r[t]:t}):i=e,o.attribLocations=i}return o}var w=["VERTEX_SHADER","FRAGMENT_SHADER"];function B(e){return e.indexOf("frag")>=0?R.FRAGMENT_SHADER:e.indexOf("vert")>=0?R.VERTEX_SHADER:void 0}function O(e,r){r.forEach(function(r){e.deleteShader(r)})}function I(e,r,t,n,a){for(var i=U(t,n,a),u=[],f=[],s=0;s<r.length;++s){var l=r[s];if("string"==typeof l){var m=c(l),p=m?m.text:l,d=e[w[s]];m&&m.type&&(d=B(m.type)||d),l=F(e,p,d,i.errorCallback),f.push(l)}o.isShader(e,l)&&u.push(l)}if(u.length!==r.length)return i.errorCallback("not enough shaders for program"),O(e,f),null;var y=e.createProgram();u.forEach(function(r){e.attachShader(y,r)}),i.attribLocations&&Object.keys(i.attribLocations).forEach(function(r){e.bindAttribLocation(y,i.attribLocations[r],r)});var b=i.transformFeedbackVaryings;if(b&&(b.attribs&&(b=b.attribs),Array.isArray(b)||(b=Object.keys(b)),e.transformFeedbackVaryings(y,b,i.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(y),!e.getProgramParameter(y,e.LINK_STATUS)){var v=e.getProgramInfoLog(y);return i.errorCallback("Error in program linking:"+v),e.deleteProgram(y),O(e,f),null}return y}function S(e,r,t,n){var a,o=c(r);if(!o)throw"*** Error: unknown script element"+r;a=o.text;var i=t||B(o.type);if(!i)throw"*** Error: unknown shader type";return F(e,a,i,n)}function C(e,r,t,n,a){for(var o=U(t,n,a),i=[],u=0;u<r.length;++u){var f=F(e,r[u],e[w[u]],o.errorCallback);if(!f)return null;i.push(f)}return I(e,i,o)}function M(e){var r=e.name;return r.startsWith("gl_")||r.startsWith("webgl_")}function D(e,r){var t=0;function n(r,n){var a,o=e.getUniformLocation(r,n.name),i=n.size>1&&"[0]"===n.name.substr(-3),u=n.type,f=l[u];if(!f)throw"unknown type: 0x"+u.toString(16);if(f.bindPoint){var s=t;t+=n.size,a=i?f.arraySetter(e,u,s,o,n.size):f.setter(e,u,s,o,n.size)}else a=f.arraySetter&&i?f.arraySetter(e,o):f.setter(e,o);return a.location=o,a}for(var a={},o=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),i=0;i<o;++i){var u=e.getActiveUniform(r,i);if(!M(u)){var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var s=n(r,u);a[f]=s}}return a}function N(e,r){for(var t={},n=e.getProgramParameter(r,e.TRANSFORM_FEEDBACK_VARYINGS),a=0;a<n;++a){var o=e.getTransformFeedbackVarying(r,a);t[o.name]={index:a,type:o.type,size:o.size}}return t}function L(e,r,t){for(var n in r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var a=r[n];if(a){var o=t[n];o.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,a.index,o.buffer,o.offset,o.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,a.index,o.buffer)}}}function k(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],a=[],o=0;o<t;++o){a.push(o),n.push({});var i=e.getActiveUniform(r,o);if(M(i))break;n[o].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var o=t[0],i=t[1];e.getActiveUniforms(r,a,e[o]).forEach(function(e,r){n[r][i]=e})});for(var u={},f=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS),s=0;s<f;++s){var c=e.getActiveUniformBlockName(r,s),l={index:s,usedByVertexShader:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[c]=l}return{blockSpecs:u,uniformData:n}}var j=/\[\d+\]\.$/;function z(e,r,t,n){var a=t.blockSpecs,o=t.uniformData,i=a[n];if(!i)return s("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(i.size),f=e.createBuffer(),c=i.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(r,i.index,c);var m=n+".";j.test(m)&&(m=m.replace(j,"."));var p={};return i.uniformIndices.forEach(function(e){var r=o[e],t=l[r.type],n=t.Type,a=r.size*t.size,i=r.name;i.substr(0,m.length)===m&&(i=i.substr(m.length)),p[i]=new n(u,r.offset,a/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:f,uniforms:p}}function G(e,r,t){var n=(r.uniformBlockSpec||r).blockSpecs[t.name];if(n){var a=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,a,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function X(e,r){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),a=0;a<n;++a){var o=e.getActiveAttrib(r,a);if(!M(o)){var i=e.getAttribLocation(r,o.name),u=g[o.type],f=u.setter(e,i,u);f.location=i,t[o.name]=f}}return t}function V(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function Y(e,r){var t={program:r,uniformSetters:D(e,r),attribSetters:X(e,r)};return a.isWebGL2(e)&&(t.uniformBlockSpec=k(e,r),t.transformFeedbackInfo=N(e,r)),t}},function(e,r,t){"use strict";r.__esModule=!0,r.axisRotate=function(e,r,t,n){n=n||new a(16);var o=r[0],i=r[1],u=r[2],f=Math.sqrt(o*o+i*i+u*u),s=(o/=f)*o,c=(i/=f)*i,l=(u/=f)*u,m=Math.cos(t),p=Math.sin(t),d=1-m,y=s+(1-s)*m,b=o*i*d+u*p,v=o*u*d-i*p,E=o*i*d-u*p,h=c+(1-c)*m,_=i*u*d+o*p,A=o*u*d+i*p,T=i*u*d-o*p,x=l+(1-l)*m,g=e[0],R=e[1],P=e[2],F=e[3],U=e[4],w=e[5],B=e[6],O=e[7],I=e[8],S=e[9],C=e[10],M=e[11];n[0]=y*g+b*U+v*I,n[1]=y*R+b*w+v*S,n[2]=y*P+b*B+v*C,n[3]=y*F+b*O+v*M,n[4]=E*g+h*U+_*I,n[5]=E*R+h*w+_*S,n[6]=E*P+h*B+_*C,n[7]=E*F+h*O+_*M,n[8]=A*g+T*U+x*I,n[9]=A*R+T*w+x*S,n[10]=A*P+T*B+x*C,n[11]=A*F+T*O+x*M,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);return n},r.axisRotation=function(e,r,t){t=t||new a(16);var n=e[0],o=e[1],i=e[2],u=Math.sqrt(n*n+o*o+i*i),f=(n/=u)*n,s=(o/=u)*o,c=(i/=u)*i,l=Math.cos(r),m=Math.sin(r),p=1-l;return t[0]=f+(1-f)*l,t[1]=n*o*p+i*m,t[2]=n*i*p-o*m,t[3]=0,t[4]=n*o*p-i*m,t[5]=s+(1-s)*l,t[6]=o*i*p+n*m,t[7]=0,t[8]=n*i*p+o*m,t[9]=o*i*p-n*m,t[10]=c+(1-c)*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.copy=f,r.frustum=function(e,r,t,n,o,i,u){u=u||new a(16);var f=r-e,s=n-t,c=o-i;return u[0]=2*o/f,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o/s,u[6]=0,u[7]=0,u[8]=(e+r)/f,u[9]=(n+t)/s,u[10]=i/c,u[11]=-1,u[12]=0,u[13]=0,u[14]=o*i/c,u[15]=0,u},r.getAxis=function(e,r,t){t=t||n.create();var a=4*r;return t[0]=e[a+0],t[1]=e[a+1],t[2]=e[a+2],t},r.getTranslation=function(e,r){return(r=r||n.create())[0]=e[12],r[1]=e[13],r[2]=e[14],r},r.identity=s,r.inverse=c,r.lookAt=function(e,r,t,f){f=f||new a(16);var s=o,c=i,l=u;return n.normalize(n.subtract(e,r,l),l),n.normalize(n.cross(t,l,s),s),n.normalize(n.cross(l,s,c),c),f[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=0,f[4]=c[0],f[5]=c[1],f[6]=c[2],f[7]=0,f[8]=l[0],f[9]=l[1],f[10]=l[2],f[11]=0,f[12]=e[0],f[13]=e[1],f[14]=e[2],f[15]=1,f},r.multiply=function(e,r,t){t=t||new a(16);var n=e[0],o=e[1],i=e[2],u=e[3],f=e[4],s=e[5],c=e[6],l=e[7],m=e[8],p=e[9],d=e[10],y=e[11],b=e[12],v=e[13],E=e[14],h=e[15],_=r[0],A=r[1],T=r[2],x=r[3],g=r[4],R=r[5],P=r[6],F=r[7],U=r[8],w=r[9],B=r[10],O=r[11],I=r[12],S=r[13],C=r[14],M=r[15];return t[0]=n*_+f*A+m*T+b*x,t[1]=o*_+s*A+p*T+v*x,t[2]=i*_+c*A+d*T+E*x,t[3]=u*_+l*A+y*T+h*x,t[4]=n*g+f*R+m*P+b*F,t[5]=o*g+s*R+p*P+v*F,t[6]=i*g+c*R+d*P+E*F,t[7]=u*g+l*R+y*P+h*F,t[8]=n*U+f*w+m*B+b*O,t[9]=o*U+s*w+p*B+v*O,t[10]=i*U+c*w+d*B+E*O,t[11]=u*U+l*w+y*B+h*O,t[12]=n*I+f*S+m*C+b*M,t[13]=o*I+s*S+p*C+v*M,t[14]=i*I+c*S+d*C+E*M,t[15]=u*I+l*S+y*C+h*M,t},r.negate=function(e,r){return(r=r||new a(16))[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=-e[7],r[8]=-e[8],r[9]=-e[9],r[10]=-e[10],r[11]=-e[11],r[12]=-e[12],r[13]=-e[13],r[14]=-e[14],r[15]=-e[15],r},r.ortho=function(e,r,t,n,o,i,u){return(u=u||new a(16))[0]=2/(r-e),u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/(n-t),u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2/(o-i),u[11]=0,u[12]=(r+e)/(e-r),u[13]=(n+t)/(t-n),u[14]=(i+o)/(o-i),u[15]=1,u},r.perspective=function(e,r,t,n,o){o=o||new a(16);var i=Math.tan(.5*Math.PI-.5*e),u=1/(t-n);return o[0]=i/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(t+n)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=t*n*u*2,o[15]=0,o},r.rotateX=function(e,r,t){t=t||new a(16);var n=e[4],o=e[5],i=e[6],u=e[7],f=e[8],s=e[9],c=e[10],l=e[11],m=Math.cos(r),p=Math.sin(r);t[4]=m*n+p*f,t[5]=m*o+p*s,t[6]=m*i+p*c,t[7]=m*u+p*l,t[8]=m*f-p*n,t[9]=m*s-p*o,t[10]=m*c-p*i,t[11]=m*l-p*u,e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotateY=function(e,r,t){t=t||new a(16);var n=e[0],o=e[1],i=e[2],u=e[3],f=e[8],s=e[9],c=e[10],l=e[11],m=Math.cos(r),p=Math.sin(r);t[0]=m*n-p*f,t[1]=m*o-p*s,t[2]=m*i-p*c,t[3]=m*u-p*l,t[8]=m*f+p*n,t[9]=m*s+p*o,t[10]=m*c+p*i,t[11]=m*l+p*u,e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotateZ=function(e,r,t){t=t||new a(16);var n=e[0],o=e[1],i=e[2],u=e[3],f=e[4],s=e[5],c=e[6],l=e[7],m=Math.cos(r),p=Math.sin(r);t[0]=m*n+p*f,t[1]=m*o+p*s,t[2]=m*i+p*c,t[3]=m*u+p*l,t[4]=m*f-p*n,t[5]=m*s-p*o,t[6]=m*c-p*i,t[7]=m*l-p*u,e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotationX=function(e,r){r=r||new a(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.rotationY=function(e,r){r=r||new a(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.rotationZ=function(e,r){r=r||new a(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.scale=function(e,r,t){t=t||new a(16);var n=r[0],o=r[1],i=r[2];t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=n*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=o*e[6],t[7]=o*e[7],t[8]=i*e[8],t[9]=i*e[9],t[10]=i*e[10],t[11]=i*e[11],e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.scaling=function(e,r){return(r=r||new a(16))[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.setAxis=function(e,r,t,n){n!==e&&(n=f(e,n));var a=4*t;return n[a+0]=r[0],n[a+1]=r[1],n[a+2]=r[2],n},r.setDefaultType=function(e){var r=a;return a=e,r},r.setTranslation=function(e,r,t){t=t||s(),e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]);return t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.transformDirection=function(e,r,t){t=t||n.create();var a=r[0],o=r[1],i=r[2];return t[0]=a*e[0]+o*e[4]+i*e[8],t[1]=a*e[1]+o*e[5]+i*e[9],t[2]=a*e[2]+o*e[6]+i*e[10],t},r.transformNormal=function(e,r,t){t=t||n.create();var a=c(e),o=r[0],i=r[1],u=r[2];return t[0]=o*a[0]+i*a[1]+u*a[2],t[1]=o*a[4]+i*a[5]+u*a[6],t[2]=o*a[8]+i*a[9]+u*a[10],t},r.transformPoint=function(e,r,t){t=t||n.create();var a=r[0],o=r[1],i=r[2],u=a*e[3]+o*e[7]+i*e[11]+e[15];return t[0]=(a*e[0]+o*e[4]+i*e[8]+e[12])/u,t[1]=(a*e[1]+o*e[5]+i*e[9]+e[13])/u,t[2]=(a*e[2]+o*e[6]+i*e[10]+e[14])/u,t},r.translate=function(e,r,t){t=t||new a(16);var n=r[0],o=r[1],i=r[2],u=e[0],f=e[1],s=e[2],c=e[3],l=e[4],m=e[5],p=e[6],d=e[7],y=e[8],b=e[9],v=e[10],E=e[11],h=e[12],_=e[13],A=e[14],T=e[15];e!==t&&(t[0]=u,t[1]=f,t[2]=s,t[3]=c,t[4]=l,t[5]=m,t[6]=p,t[7]=d,t[8]=y,t[9]=b,t[10]=v,t[11]=E);return t[12]=u*n+l*o+y*i+h,t[13]=f*n+m*o+b*i+_,t[14]=s*n+p*o+v*i+A,t[15]=c*n+d*o+E*i+T,t},r.translation=function(e,r){return(r=r||new a(16))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},r.transpose=function(e,r){if((r=r||new a(16))===e){var t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,r}var n=e[0],o=e[1],i=e[2],u=e[3],f=e[4],s=e[5],c=e[6],l=e[7],m=e[8],p=e[9],d=e[10],y=e[11],b=e[12],v=e[13],E=e[14],h=e[15];return r[0]=n,r[1]=f,r[2]=m,r[3]=b,r[4]=o,r[5]=s,r[6]=p,r[7]=v,r[8]=i,r[9]=c,r[10]=d,r[11]=E,r[12]=u,r[13]=l,r[14]=y,r[15]=h,r};var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}(t(3));var a=Float32Array,o=n.create(),i=n.create(),u=n.create();function f(e,r){return(r=r||new a(16))[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function s(e){return(e=e||new a(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,r){r=r||new a(16);var t=e[0],n=e[1],o=e[2],i=e[3],u=e[4],f=e[5],s=e[6],c=e[7],l=e[8],m=e[9],p=e[10],d=e[11],y=e[12],b=e[13],v=e[14],E=e[15],h=p*E,_=v*d,A=s*E,T=v*c,x=s*d,g=p*c,R=o*E,P=v*i,F=o*d,U=p*i,w=o*c,B=s*i,O=l*b,I=y*m,S=u*b,C=y*f,M=u*m,D=l*f,N=t*b,L=y*n,k=t*m,j=l*n,z=t*f,G=u*n,X=h*f+T*m+x*b-(_*f+A*m+g*b),V=_*n+R*m+U*b-(h*n+P*m+F*b),Y=A*n+P*f+w*b-(T*n+R*f+B*b),W=g*n+F*f+B*m-(x*n+U*f+w*m),K=1/(t*X+u*V+l*Y+y*W);return r[0]=K*X,r[1]=K*V,r[2]=K*Y,r[3]=K*W,r[4]=K*(_*u+A*l+g*y-(h*u+T*l+x*y)),r[5]=K*(h*t+P*l+F*y-(_*t+R*l+U*y)),r[6]=K*(T*t+R*u+B*y-(A*t+P*u+w*y)),r[7]=K*(x*t+U*u+w*l-(g*t+F*u+B*l)),r[8]=K*(O*c+C*d+M*E-(I*c+S*d+D*E)),r[9]=K*(I*i+N*d+j*E-(O*i+L*d+k*E)),r[10]=K*(S*i+L*c+z*E-(C*i+N*c+G*E)),r[11]=K*(D*i+k*c+G*d-(M*i+j*c+z*d)),r[12]=K*(S*p+D*v+I*s-(M*v+O*s+C*p)),r[13]=K*(k*v+O*o+L*p-(N*p+j*v+I*o)),r[14]=K*(N*s+G*v+C*o-(z*v+S*o+L*s)),r[15]=K*(z*p+M*o+j*s-(k*s+G*p+D*o)),r}},function(e,r,t){"use strict";r.__esModule=!0,r.createAttribsFromArrays=b,r.createBuffersFromArrays=function(e,r){var t={};Object.keys(r).forEach(function(n){t[n]=E(e,r[n],n)}),r.indices?(t.numElements=r.indices.length,t.elementType=n.getGLTypeForTypedArray(y(r.indices),"indices")):t.numElements=function(e){var r,t;for(t=0;t<v.length&&!((r=v[t])in e);++t);t===v.length&&(r=Object.keys(e)[0]);var n=e[r],a=c(n).length,o=d(n,r),i=a/o;if(a%o>0)throw"numComponents "+o+" not correct for length "+a;return i}(r);return t},r.createBufferFromArray=E,r.createBufferFromTypedArray=f,r.createBufferInfoFromArrays=function(e,r,t){var a=b(e,r),o=Object.assign({},t||{});o.attribs=Object.assign({},t?t.attribs:{},a);var u=r.indices;if(u){var s=y(u,"indices");o.indices=f(e,s,e.ELEMENT_ARRAY_BUFFER),o.numElements=s.length,o.elementType=n.getGLTypeForTypedArray(s)}else o.numElements||(o.numElements=function(e,r){var t,n;for(n=0;n<v.length&&!((t=v[n])in r)&&!((t=i.attribPrefix+t)in r);++n);n===v.length&&(t=Object.keys(r)[0]);var a=r[t];e.bindBuffer(e.ARRAY_BUFFER,a.buffer);var o=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var u=function(e,r){return r===e.BYTE?1:r===e.UNSIGNED_BYTE?1:r===e.SHORT?2:r===e.UNSIGNED_SHORT?2:r===e.INT?4:r===e.UNSIGNED_INT?4:r===e.FLOAT?4:0}(e,a.type),f=o/u,s=a.numComponents||a.size,c=f/s;if(c%1!=0)throw"numComponents "+s+" not correct for length "+length;return c}(e,o.attribs));return o},r.setAttribInfoBufferFromArray=function(e,r,t,n){t=y(t),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):u(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)},r.setAttributePrefix=function(e){i.attribPrefix=e},r.setAttributeDefaults_=function(e){a.copyExistingProperties(e,i)},r.getNumComponents_=d,r.getArray_=c;var n=o(t(1)),a=o(t(0));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var i={attribPrefix:""};function u(e,r,t,n,a){e.bindBuffer(r,t),e.bufferData(r,n,a||e.STATIC_DRAW)}function f(e,r,t,n){if(a.isBuffer(e,r))return r;t=t||e.ARRAY_BUFFER;var o=e.createBuffer();return u(e,t,o,r,n),o}function s(e){return"indices"===e}function c(e){return e.length?e:e.data}var l=/coord|texture/i,m=/color|colour/i;function p(e,r){var t;if(r%(t=l.test(e)?2:m.test(e)?4:3)>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+t+" but "+r+" values is not evenly divisible by "+t+". You should specify it.";return t}function d(e,r){return e.numComponents||e.size||p(r,c(e).length)}function y(e,r){if(n.isArrayBuffer(e))return e;if(n.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var t=e.type;return t||(t=s(r)?Uint16Array:Float32Array),new t(e.data)}function b(e,r){var t={};return Object.keys(r).forEach(function(a){if(!s(a)){var o=r[a],u=o.attrib||o.name||o.attribName||i.attribPrefix+a;if(o.value){if(!Array.isArray(o.value)&&!n.isArrayBuffer(o.value))throw new Error("array.value is not array or typedarray");t[u]={value:o.value}}else{var c,l,m,b;if(o.buffer&&o.buffer instanceof WebGLBuffer)c=o.buffer,b=o.numComponents||o.size,l=o.type,m=o.normalize;else if("number"==typeof o||"number"==typeof o.data){var v=o.data||o,E=o.type||Float32Array,h=v*E.BYTES_PER_ELEMENT;l=n.getGLTypeForTypedArrayType(E),m=void 0!==o.normalize?o.normalize:(A=E)===Int8Array||A===Uint8Array,b=o.numComponents||o.size||p(a,v),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,h,o.drawType||e.STATIC_DRAW)}else{var _=y(o,a);c=f(e,_,void 0,o.drawType),l=n.getGLTypeForTypedArray(_),m=void 0!==o.normalize?o.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(_),b=d(o,a)}t[u]={buffer:c,numComponents:b,type:l,normalize:m,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var A}),e.bindBuffer(e.ARRAY_BUFFER,null),t}var v=["position","positions","a_position"];function E(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return f(e,y(r,t),n)}},function(e,r,t){"use strict";r.__esModule=!0,r.setTextureDefaults_=function(e){i.copyExistingProperties(e,s),e.textureColor&&x(e.textureColor)},r.createSampler=I,r.createSamplers=function(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=I(e,r[n])}),t},r.setSamplerParameters=O,r.createTexture=K,r.setEmptyTexture=W,r.setTextureFromArray=Y,r.loadTextureFromUrl=G,r.setTextureFromElement=N,r.setTextureFilteringForSize=S,r.setTextureParameters=B,r.setDefaultTextureColor=x,r.createTextures=function(e,r,t){t=t||L;var n=0,a=[],o={},i={};function u(){0===n&&setTimeout(function(){t(a.length?a:void 0,o,i)},0)}return Object.keys(r).forEach(function(t){var f,s,c=r[t];("string"==typeof(s=c.src)||Array.isArray(s)&&"string"==typeof s[0])&&(f=function(e,r,o){i[t]=o,--n,e&&a.push(e),u()},++n),o[t]=K(e,c,f)}),u(),o},r.resizeTexture=function(e,r,t,n,a){n=n||t.width,a=a||t.height;var o=t.target||e.TEXTURE_2D;e.bindTexture(o,r);var i,u=t.level||0,f=t.internalFormat||t.format||e.RGBA,s=h(f),l=t.format||s.format,m=t.src;i=m&&(c(m)||Array.isArray(m)&&"number"==typeof m[0])?t.type||A(e,m,s.type):t.type||s.type;if(o===e.TEXTURE_CUBE_MAP)for(var p=0;p<6;++p)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,u,f,n,a,0,l,i,null);else e.texImage2D(o,u,f,n,a,0,l,i,null)},r.getNumComponentsForFormat=function(e){var r=d[e];if(!r)throw"unknown format: "+e;return r.numColorComponents},r.getBytesPerElementForInternalFormat=E;var n,a=f(t(4)),o=f(t(1)),i=f(t(0)),u=(n=t(2))&&n.__esModule?n:{default:n};function f(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var s={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},c=o.isArrayBuffer,l=u.default.document&&u.default.document.createElement?u.default.document.createElement("canvas").getContext("2d"):null,m=6407,p=33319,d={},y=d;y[6406]={numColorComponents:1},y[6409]={numColorComponents:1},y[6410]={numColorComponents:2},y[m]={numColorComponents:3},y[6408]={numColorComponents:4},y[6403]={numColorComponents:1},y[36244]={numColorComponents:1},y[p]={numColorComponents:2},y[33320]={numColorComponents:2},y[m]={numColorComponents:3},y[36248]={numColorComponents:3},y[6408]={numColorComponents:4},y[36249]={numColorComponents:4},y[6402]={numColorComponents:1},y[34041]={numColorComponents:2};var b={},v=b;function E(e,r){var t=b[e];if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[r];if(void 0===n)throw"unknown internal format";return n}function h(e){var r=b[e];if(!r)throw"unknown internal format";return{format:r.textureFormat,type:Array.isArray(r.type)?r.type[0]:r.type}}function _(e){return 0==(e&e-1)}function A(e,r,t){return c(r)?o.getGLTypeForTypedArray(r):t||e.UNSIGNED_BYTE}function T(e,r,t,n,a){if(a%1!=0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=a/n)%1)throw"can't guess dimensions"}else if((n=a/t)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(a/(r===e.TEXTURE_CUBE_MAP?6:1));o%1==0?(t=o,n=o):(t=a,n=1)}return{width:t,height:n}}function x(e){s.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}v[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},v[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},v[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},v[m]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},v[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},v[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},v[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},v[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},v[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},v[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},v[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},v[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},v[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},v[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},v[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},v[33323]={textureFormat:p,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},v[36757]={textureFormat:p,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},v[33327]={textureFormat:p,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},v[33328]={textureFormat:p,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},v[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},v[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},v[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},v[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},v[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},v[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},v[32849]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},v[35905]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},v[36194]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},v[36758]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},v[35898]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},v[35901]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},v[34843]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},v[34837]={textureFormat:m,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},v[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},v[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},v[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},v[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},v[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},v[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},v[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},v[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},v[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},v[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},v[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},v[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},v[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},v[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},v[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},v[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},v[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},v[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},v[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},v[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},v[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},v[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},v[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},v[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},v[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},v[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(v).forEach(function(e){var r=v[e];if(r.bytesPerElementMap={},Array.isArray(r.bytesPerElement))r.bytesPerElement.forEach(function(e,t){var n=r.type[t];r.bytesPerElementMap[n]=e});else{var t=r.type;r.bytesPerElementMap[t]=r.bytesPerElement}});var g={};function R(e,r){void 0!==r.colorspaceConversion&&(g.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(g.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(g.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function P(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,g.flipY)}function F(e){g.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),a.isWebGL2(e)&&(g.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),g.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),g.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),g.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),g.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function U(e){e.pixelStorei(e.UNPACK_ALIGNMENT,g.unpackAlignment),a.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,g.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,g.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,g.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,g.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,g.unpackSkipImages))}function w(e,r,t,n){n.minMag&&(t.call(e,r,e.TEXTURE_MIN_FILTER,n.minMag),t.call(e,r,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&t.call(e,r,e.TEXTURE_MIN_FILTER,n.min),n.mag&&t.call(e,r,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(t.call(e,r,e.TEXTURE_WRAP_S,n.wrap),t.call(e,r,e.TEXTURE_WRAP_T,n.wrap),(r===e.TEXTURE_3D||i.isSampler(e,r))&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&t.call(e,r,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&t.call(e,r,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&t.call(e,r,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&t.call(e,r,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&t.call(e,r,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&t.call(e,r,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function B(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),w(e,n,e.texParameteri,t)}function O(e,r,t){w(e,r,e.samplerParameteri,t)}function I(e,r){var t=e.createSampler();return O(e,t,r),t}function S(e,r,t,n,o,i,u){t=t||s.textureOptions,i=i||e.RGBA,u=u||e.UNSIGNED_BYTE;var f=t.target||e.TEXTURE_2D;if(n=n||t.width,o=o||t.height,e.bindTexture(f,r),function(e,r,t,n){if(!a.isWebGL2(e))return _(r)&&_(t);var o=b[n];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}(e,n,o,i))e.generateMipmap(f);else{var c=function(e){var r=b[e];if(!r)throw"unknown internal format";return r.textureFilterable}(i)?e.LINEAR:e.NEAREST;e.texParameteri(f,e.TEXTURE_MIN_FILTER,c),e.texParameteri(f,e.TEXTURE_MAG_FILTER,c),e.texParameteri(f,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(f,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function C(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function M(e,r){return(r=r||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function D(e,r){var t=M(e,r).map(function(e,r){return{face:e,ndx:r}});return t.sort(function(e,r){return e.face-r.face}),t}function N(e,r,t,n){var a=(n=n||s.textureOptions).target||e.TEXTURE_2D,o=n.level||0,i=t.width,f=t.height,c=n.internalFormat||n.format||e.RGBA,m=h(c),p=n.format||m.format,d=n.type||m.type;if(R(e,n),e.bindTexture(a,r),a===e.TEXTURE_CUBE_MAP){var y,b,v=t.width,E=t.height;if(v/6===E)y=E,b=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===v)y=v,b=[0,0,0,1,0,2,0,3,0,4,0,5];else if(v/3==E/2)y=v/3,b=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(v/2!=E/3)throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);y=v/2,b=[0,0,1,0,0,1,1,1,0,2,1,2]}l?(l.canvas.width=y,l.canvas.height=y,i=y,f=y,D(e,n).forEach(function(r){var n=b[2*r.ndx+0]*y,a=b[2*r.ndx+1]*y;l.drawImage(t,n,a,y,y,0,0,y,y),e.texImage2D(r.face,o,c,p,d,l.canvas)}),l.canvas.width=1,l.canvas.height=1):u.default.createImageBitmap&&(i=y,f=y,D(e,n).forEach(function(s){var l=b[2*s.ndx+0]*y,m=b[2*s.ndx+1]*y;e.texImage2D(s.face,o,c,y,y,0,p,d,null),u.default.createImageBitmap(t,l,m,y,y,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(t){R(e,n),e.bindTexture(a,r),e.texImage2D(s.face,o,c,p,d,t),P(e,n),C(n)&&S(e,r,n,i,f,c,d)})}))}else if(a===e.TEXTURE_3D||a===e.TEXTURE_2D_ARRAY){var _=Math.min(t.width,t.height),A=Math.max(t.width,t.height),T=A/_;if(T%1!=0)throw"can not compute 3D dimensions of element";var x=t.width===A?1:0,g=t.height===A?1:0;F(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,t.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(a,o,c,_,_,_,0,p,d,null);for(var w=0;w<T;++w){var O=w*_*x,I=w*_*g;e.pixelStorei(e.UNPACK_SKIP_PIXELS,O),e.pixelStorei(e.UNPACK_SKIP_ROWS,I),e.texSubImage3D(a,o,0,0,w,_,_,1,p,d,t)}U(e)}else e.texImage2D(a,o,c,p,d,t);P(e,n),C(n)&&S(e,r,n,i,f,c,d),B(e,r,n)}function L(){}function k(e){return u.default.ImageBitmap&&e instanceof u.default.ImageBitmap||u.default.ImageData&&e instanceof u.default.ImageData||u.default.HTMLElement&&e instanceof u.default.HTMLElement}function j(e,r,t){return k(e)?(setTimeout(function(){t(null,e)}),e):function(e,r,t){var n;if(t=t||L,u.default.Image){n=new u.default.Image,void 0!==(r=void 0!==r?r:s.crossOrigin)&&(n.crossOrigin=r);var a=function(){n.removeEventListener("error",o),n.removeEventListener("load",f),n=null},o=function(){var r="couldn't load image: "+e;i.error(r),t(r,n),a()},f=function(){t(null,n),a()};return n.addEventListener("error",o),n.addEventListener("load",f),n.src=e,n}if(u.default.ImageBitmap){var c,l,m=function(){t(c,l)},p={};r&&(p.mode="cors"),fetch(e,p).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return u.default.createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){l=e,setTimeout(m)}).catch(function(e){c=e,setTimeout(m)}),n=null}return n}(e,r,t)}function z(e,r,t){var n=(t=t||s.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,r),!1!==t.color){var a=function(e){return e=e||s.textureColor,c(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a)}}function G(e,r,t,n){return n=n||L,t=t||s.textureOptions,z(e,r,t),j((t=Object.assign({},t)).src,t.crossOrigin,function(a,o){a?n(a,r,o):(N(e,r,o,t),n(null,r,o))})}function X(e,r,t,n){n=n||L;var a=t.src;if(6!==a.length)throw"there must be 6 urls for a cubemap";var o=t.level||0,i=t.internalFormat||t.format||e.RGBA,u=h(i),f=t.format||u.format,s=t.type||e.UNSIGNED_BYTE,c=t.target||e.TEXTURE_2D;if(c!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";z(e,r,t),t=Object.assign({},t);var l,m=6,p=[],d=M(e,t);l=a.map(function(a,u){return j(a,t.crossOrigin,(y=d[u],function(a,u){--m,a?p.push(a):u.width!==u.height?p.push("cubemap face img is not a square: "+u.src):(R(e,t),e.bindTexture(c,r),5===m?M(e).forEach(function(r){e.texImage2D(r,o,i,f,s,u)}):e.texImage2D(y,o,i,f,s,u),P(e,t),C(t)&&e.generateMipmap(c)),0===m&&n(p.length?p:void 0,r,l)}));var y})}function V(e,r,t,n){n=n||L;var a=t.src,o=t.internalFormat||t.format||e.RGBA,i=h(o),u=t.format||i.format,f=t.type||e.UNSIGNED_BYTE,s=t.target||e.TEXTURE_2D_ARRAY;if(s!==e.TEXTURE_3D&&s!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";z(e,r,t),t=Object.assign({},t);var c,m=a.length,p=[],d=t.level||0,y=t.width,b=t.height,v=a.length,E=!0;c=a.map(function(a,i){return j(a,t.crossOrigin,(h=i,function(a,i){if(--m,a)p.push(a);else{if(R(e,t),e.bindTexture(s,r),E){E=!1,y=t.width||i.width,b=t.height||i.height,e.texImage3D(s,d,o,y,b,v,0,u,f,null);for(var _=0;_<v;++_)e.texSubImage3D(s,d,0,0,_,y,b,1,u,f,i)}else{var A=i;i.width===y&&i.height===b||(A=l.canvas,l.canvas.width=y,l.canvas.height=b,l.drawImage(i,0,0,y,b)),e.texSubImage3D(s,d,0,0,h,y,b,1,u,f,A),A===l.canvas&&(l.canvas.width=0,l.canvas.height=0)}P(e,t),C(t)&&e.generateMipmap(s)}0===m&&n(p.length?p:void 0,r,c)}));var h})}function Y(e,r,t,n){var i=(n=n||s.textureOptions).target||e.TEXTURE_2D;e.bindTexture(i,r);var u=n.width,f=n.height,l=n.depth,m=n.level||0,p=n.internalFormat||n.format||e.RGBA,d=h(p),y=n.format||d.format,b=n.type||A(e,t,d.type);if(c(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{var v=o.getTypedArrayTypeForGLType(b);t=new v(t)}var _,x=E(p,b),g=t.byteLength/x;if(g%1)throw"length wrong size for format: "+a.glEnumToString(e,y);if(i===e.TEXTURE_3D)if(u||f||l)!u||f&&l?!f||u&&l?(_=T(e,i,u,f,g/l),u=_.width,f=_.height):(_=T(e,i,u,l,g/f),u=_.width,l=_.height):(_=T(e,i,f,l,g/u),f=_.width,l=_.height);else{var w=Math.cbrt(g);if(w%1!=0)throw"can't guess cube size of array of numElements: "+g;u=w,f=w,l=w}else _=T(e,i,u,f,g),u=_.width,f=_.height;if(F(e),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment||1),R(e,n),i===e.TEXTURE_CUBE_MAP){var B=g/6*(x/t.BYTES_PER_ELEMENT);D(e,n).forEach(function(r){var n=B*r.ndx,a=t.subarray(n,n+B);e.texImage2D(r.face,m,p,u,f,0,y,b,a)})}else i===e.TEXTURE_3D?e.texImage3D(i,m,p,u,f,l,0,y,b,t):e.texImage2D(i,m,p,u,f,0,y,b,t);return P(e,n),U(e),{width:u,height:f,depth:l,type:b}}function W(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r);var a=t.level||0,o=t.internalFormat||t.format||e.RGBA,i=h(o),u=t.format||i.format,f=t.type||i.type;if(R(e,t),n===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,a,o,t.width,t.height,0,u,f,null);else n===e.TEXTURE_3D?e.texImage3D(n,a,o,t.width,t.height,t.depth,0,u,f,null):e.texImage2D(n,a,o,t.width,t.height,0,u,f,null);P(e,t)}function K(e,r,t){t=t||L,r=r||s.textureOptions;var n=e.createTexture(),a=r.target||e.TEXTURE_2D,o=r.width||1,i=r.height||1,u=r.internalFormat||e.RGBA,f=h(u),l=r.type||f.type;e.bindTexture(a,n),a===e.TEXTURE_CUBE_MAP&&(e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var m=r.src;if(m)if("function"==typeof m&&(m=m(e,r)),"string"==typeof m)G(e,n,r,t);else if(c(m)||Array.isArray(m)&&("number"==typeof m[0]||Array.isArray(m[0])||c(m[0]))){var p=Y(e,n,m,r);o=p.width,i=p.height,l=p.type}else if(Array.isArray(m)&&("string"==typeof m[0]||k(m[0])))a===e.TEXTURE_CUBE_MAP?X(e,n,r,t):V(e,n,r,t);else{if(!k(m))throw"unsupported src type";N(e,n,m,r),o=m.width,i=m.height}else W(e,n,r);return C(r)&&S(e,n,r,o,i,u,l),B(e,n,r),n}},function(e,r,t){"use strict";r.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};r.primitives=r.v3=r.m4=void 0;var a=f(t(6));r.m4=a;var o=f(t(3));r.v3=o;var i=f(t(10));r.primitives=i;var u=t(11);function f(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=u[e]))})},function(e,r,t){"use strict";r.__esModule=!0,r.create3DFVertices=F,r.createAugmentedTypedArray=m,r.createCubeVertices=g,r.createPlaneVertices=A,r.createSphereVertices=T,r.createTruncatedConeVertices=R,r.createXYQuadVertices=_,r.createCresentVertices=U,r.createCylinderVertices=w,r.createTorusVertices=B,r.createDiscVertices=O,r.deindexVertices=function(e){var r=e.indices,t={},n=r.length;return Object.keys(e).filter(p).forEach(function(a){for(var o=e[a],i=o.numComponents,u=m(i,n,o.constructor),f=0;f<n;++f)for(var s=r[f],c=s*i,l=0;l<i;++l)u.push(o[c+l]);t[a]=u}),t},r.flattenNormals=function(e){if(e.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var r=e.normal,t=r.length,n=0;n<t;n+=9){var a=r[n+0],o=r[n+1],i=r[n+2],u=r[n+3],f=r[n+4],s=r[n+5],c=r[n+6],l=r[n+7],m=r[n+8],p=a+u+c,d=o+f+l,y=i+s+m,b=Math.sqrt(p*p+d*d+y*y);p/=b,d/=b,y/=b,r[n+0]=p,r[n+1]=d,r[n+2]=y,r[n+3]=p,r[n+4]=d,r[n+5]=y,r[n+6]=p,r[n+7]=d,r[n+8]=y}return e},r.makeRandomVertexColors=function(e,r){r=r||{};var t=e.position.numElements,n=m(4,t,Uint8Array),a=r.rand||function(e,r){return r<3?(t=256,Math.random()*t|0):255;var t};if(e.color=n,e.indices)for(var o=0;o<t;++o)n.push(a(o,0),a(o,1),a(o,2),a(o,3));else for(var i=r.vertsPerColor||3,u=t/i,f=0;f<u;++f)for(var s=[a(f,0),a(f,1),a(f,2),a(f,3)],c=0;c<i;++c)n.push(s);return e},r.reorientDirections=b,r.reorientNormals=v,r.reorientPositions=E,r.reorientVertices=h,r.concatVertices=function(e){for(var r,t={},n=function(n){var a=e[n];Object.keys(a).forEach(function(e){t[e]||(t[e]=[]),r||"indices"===e||(r=e);var n=a[e],o=c(n,e),i=s(n),u=i.length/o;t[e].push(u)})},a=0;a<e.length;++a)n(a);var o=t[r],i={};return Object.keys(t).forEach(function(r){var t=function(r){for(var t,n=0,a=0;a<e.length;++a){var o=e[a],i=o[r],u=s(i);n+=u.length,t&&!i.data||(t=i)}return{length:n,spec:t}}(r),n=D(t.spec,t.length);!function(r,t,n){for(var a=0,o=0,i=0;i<e.length;++i){var u=e[i],f=u[r],c=s(f);"indices"===r?(M(c,n,o,a),a+=t[i]):M(c,n,o),o+=c.length}}(r,o,s(n)),i[r]=n}),i},r.duplicateVertices=function(e){var r={};return Object.keys(e).forEach(function(t){var n=e[t],a=s(n),o=D(n,a.length);M(a,s(o),0),r[t]=o}),r},r.createDiscBuffers=r.createDiscBufferInfo=r.createTorusBuffers=r.createTorusBufferInfo=r.createCylinderBuffers=r.createCylinderBufferInfo=r.createCresentBuffers=r.createCresentBufferInfo=r.createXYQuadBuffers=r.createXYQuadBufferInfo=r.createTruncatedConeBuffers=r.createTruncatedConeBufferInfo=r.createSphereBuffers=r.createSphereBufferInfo=r.createPlaneBuffers=r.createPlaneBufferInfo=r.createCubeBuffers=r.createCubeBufferInfo=r.create3DFBuffers=r.create3DFBufferInfo=void 0;var n=f(t(7)),a=f(t(0)),o=f(t(1)),i=f(t(6)),u=f(t(3));function f(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var s=n.getArray_,c=n.getNumComponents_;function l(e,r){var t=0;return e.push=function(){for(var r=0;r<arguments.length;++r){var n=arguments[r];if(n instanceof Array||o.isArrayBuffer(n))for(var a=0;a<n.length;++a)e[t++]=n[a];else e[t++]=n}},e.reset=function(e){t=e||0},e.numComponents=r,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function m(e,r,t){return l(new(t||Float32Array)(e*r),e)}function p(e){return"indices"!==e}function d(e,r,t){for(var n=e.length,a=new Float32Array(3),o=0;o<n;o+=3)t(r,[e[o],e[o+1],e[o+2]],a),e[o]=a[0],e[o+1]=a[1],e[o+2]=a[2]}function y(e,r,t){t=t||u.create();var n=r[0],a=r[1],o=r[2];return t[0]=n*e[0]+a*e[1]+o*e[2],t[1]=n*e[4]+a*e[5]+o*e[6],t[2]=n*e[8]+a*e[9]+o*e[10],t}function b(e,r){return d(e,r,i.transformDirection),e}function v(e,r){return d(e,i.inverse(r),y),e}function E(e,r){return d(e,r,i.transformPoint),e}function h(e,r){return Object.keys(e).forEach(function(t){var n=e[t];t.indexOf("pos")>=0?E(n,r):t.indexOf("tan")>=0||t.indexOf("binorm")>=0?b(n,r):t.indexOf("norm")>=0&&v(n,r)}),e}function _(e,r,t){return e=e||2,{position:{numComponents:2,data:[(r=r||0)+-1*(e*=.5),(t=t||0)+-1*e,r+1*e,t+-1*e,r+-1*e,t+1*e,r+1*e,t+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function A(e,r,t,n,a){e=e||1,r=r||1,t=t||1,n=n||1,a=a||i.identity();for(var o=(t+1)*(n+1),u=m(3,o),f=m(3,o),s=m(2,o),c=0;c<=n;c++)for(var l=0;l<=t;l++){var p=l/t,d=c/n;u.push(e*p-.5*e,0,r*d-.5*r),f.push(0,1,0),s.push(p,d)}for(var y=t+1,b=m(3,t*n*2,Uint16Array),v=0;v<n;v++)for(var E=0;E<t;E++)b.push((v+0)*y+E,(v+1)*y+E,(v+0)*y+E+1),b.push((v+1)*y+E,(v+1)*y+E+1,(v+0)*y+E+1);return h({position:u,normal:f,texcoord:s,indices:b},a)}function T(e,r,t,n,a,o,i){if(r<=0||t<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||0;for(var u=(a=a||Math.PI)-n,f=(i=i||2*Math.PI)-o,s=(r+1)*(t+1),c=m(3,s),l=m(3,s),p=m(2,s),d=0;d<=t;d++)for(var y=0;y<=r;y++){var b=y/r,v=d/t,E=f*b+o,h=u*v+n,_=Math.sin(E),A=Math.cos(E),T=Math.sin(h),x=A*T,g=Math.cos(h),R=_*T;c.push(e*x,e*g,e*R),l.push(x,g,R),p.push(1-b,v)}for(var P=r+1,F=m(3,r*t*2,Uint16Array),U=0;U<r;U++)for(var w=0;w<t;w++)F.push((w+0)*P+U,(w+0)*P+U+1,(w+1)*P+U),F.push((w+1)*P+U,(w+0)*P+U+1,(w+1)*P+U+1);return{position:c,normal:l,texcoord:p,indices:F}}var x=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function g(e){for(var r=(e=e||1)/2,t=[[-r,-r,-r],[+r,-r,-r],[-r,+r,-r],[+r,+r,-r],[-r,-r,+r],[+r,-r,+r],[-r,+r,+r],[+r,+r,+r]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]],o=m(3,24),i=m(3,24),u=m(2,24),f=m(3,12,Uint16Array),s=0;s<6;++s){for(var c=x[s],l=0;l<4;++l){var p=t[c[l]],d=n[s],y=a[l];o.push(p),i.push(d),u.push(y)}var b=4*s;f.push(b+0,b+1,b+2),f.push(b+0,b+2,b+3)}return{position:o,normal:i,texcoord:u,indices:f}}function R(e,r,t,n,a,o,i){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(a<1)throw Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===o||o,f=void 0===i||i,s=(u?2:0)+(f?2:0),c=(n+1)*(a+1+s),l=m(3,c),p=m(3,c),d=m(2,c),y=m(3,n*(a+s)*2,Uint16Array),b=n+1,v=Math.atan2(e-r,t),E=Math.cos(v),h=Math.sin(v),_=a+(f?2:0),A=u?-2:0;A<=_;++A){var T=A/a,x=t*T,g=void 0;A<0?(x=0,T=1,g=e):A>a?(x=t,T=1,g=r):g=e+A/a*(r-e),-2!==A&&A!==a+2||(g=0,T=0),x-=t/2;for(var R=0;R<b;++R){var P=Math.sin(R*Math.PI*2/n),F=Math.cos(R*Math.PI*2/n);l.push(P*g,x,F*g),p.push(A<0||A>a?0:P*E,A<0?-1:A>a?1:h,A<0||A>a?0:F*E),d.push(R/n,1-T)}}for(var U=0;U<a+s;++U)for(var w=0;w<n;++w)y.push(b*(U+0)+0+w,b*(U+0)+1+w,b*(U+1)+1+w),y.push(b*(U+0)+0+w,b*(U+1)+1+w,b*(U+1)+0+w);return{position:l,normal:p,texcoord:d,indices:y}}function P(e,r){r=r||[];for(var t=[],n=0;n<e.length;n+=4){var a=e[n],o=e.slice(n+1,n+4);o.push.apply(o,r);for(var i=0;i<a;++i)t.push.apply(t,o)}return t}function F(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],r=P([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),t=P([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,a={position:m(3,n),texcoord:m(2,n),normal:m(3,n),color:m(4,n,Uint8Array),indices:m(3,n/3,Uint16Array)};a.position.push(e),a.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),a.normal.push(r),a.color.push(t);for(var o=0;o<n;++o)a.indices.push(o);return a}function U(e,r,t,n,a,o,i){if(a<=0)throw Error("subdivisionDown must be > 0");var f=2,s=(i=i||1)-(o=o||0),c=2*(a+1)*(2+f),l=m(3,c),p=m(3,c),d=m(2,c);function y(e,r,t){return e+(r-e)*t}function b(r,t,i,c,m,b){for(var v=0;v<=a;v++){var E=t/(f-1),h=v/a,_=2*(E-.5),A=(o+h*s)*Math.PI,T=Math.sin(A),x=Math.cos(A),g=y(e,r,T),R=_*n,P=x*e,F=T*g;l.push(R,P,F);var U=u.add(u.multiply([0,T,x],i),c);p.push(U),d.push(E*m+b,h)}}for(var v=0;v<f;v++){var E=2*(v/(f-1)-.5);b(r,v,[1,1,1],[0,0,0],1,0),b(r,v,[0,0,0],[E,0,0],0,0),b(t,v,[1,1,1],[0,0,0],1,0),b(t,v,[0,0,0],[E,0,0],0,1)}var h=m(3,2*a*(2+f),Uint16Array);function _(e,r){for(var t=0;t<a;++t)h.push(e+t+0,e+t+1,r+t+0),h.push(e+t+1,r+t+1,r+t+0)}var A=a+1;return _(0*A,4*A),_(5*A,7*A),_(6*A,2*A),_(3*A,1*A),{position:l,normal:p,texcoord:d,indices:h}}function w(e,r,t,n,a,o){return R(e,e,r,t,n,a,o)}function B(e,r,t,n,a,o){if(t<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");a=a||0;for(var i=(o=o||2*Math.PI)-a,u=t+1,f=n+1,s=u*f,c=m(3,s),l=m(3,s),p=m(2,s),d=m(3,t*n*2,Uint16Array),y=0;y<f;++y)for(var b=y/n,v=b*Math.PI*2,E=Math.sin(v),h=e+E*r,_=Math.cos(v),A=_*r,T=0;T<u;++T){var x=T/t,g=a+x*i,R=Math.sin(g),P=Math.cos(g),F=R*h,U=P*h,w=R*E,B=P*E;c.push(F,A,U),l.push(w,_,B),p.push(x,1-b)}for(var O=0;O<n;++O)for(var I=0;I<t;++I){var S=1+I,C=1+O;d.push(u*O+I,u*C+I,u*O+S),d.push(u*C+I,u*C+S,u*O+S)}return{position:c,normal:l,texcoord:p,indices:d}}function O(e,r,t,n,a){if(r<3)throw Error("divisions must be at least 3");a=a||1,n=n||0;for(var o=(r+1)*((t=t||1)+1),i=m(3,o),u=m(3,o),f=m(2,o),s=m(3,t*r*2,Uint16Array),c=0,l=e-n,p=r+1,d=0;d<=t;++d){for(var y=n+l*Math.pow(d/t,a),b=0;b<=r;++b){var v=2*Math.PI*b/r,E=y*Math.cos(v),h=y*Math.sin(v);if(i.push(E,0,h),u.push(0,1,0),f.push(1-b/r,d/t),d>0&&b!==r){var _=c+(b+1),A=c+b,T=c+b-p,x=c+(b+1)-p;s.push(_,A,T),s.push(_,T,x)}}c+=r+1}return{position:i,normal:u,texcoord:f,indices:s}}function I(e){return function(r){var t=e.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(r,t)}}function S(e){return function(r){var t=e.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(r,t)}}var C=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function M(e,r,t,n){n=n||0;for(var a=e.length,o=0;o<a;++o)r[t+o]=e[o]+n}function D(e,r){var t=s(e),n=new t.constructor(r),o=n;return t.numComponents&&t.numElements&&l(n,t.numComponents),e.data&&(o={data:n},a.copyNamedProperties(C,e,o)),o}var N=S(F);r.create3DFBufferInfo=N;var L=I(F);r.create3DFBuffers=L;var k=S(g);r.createCubeBufferInfo=k;var j=I(g);r.createCubeBuffers=j;var z=S(A);r.createPlaneBufferInfo=z;var G=I(A);r.createPlaneBuffers=G;var X=S(T);r.createSphereBufferInfo=X;var V=I(T);r.createSphereBuffers=V;var Y=S(R);r.createTruncatedConeBufferInfo=Y;var W=I(R);r.createTruncatedConeBuffers=W;var K=S(_);r.createXYQuadBufferInfo=K;var H=I(_);r.createXYQuadBuffers=H;var q=S(U);r.createCresentBufferInfo=q;var Z=I(U);r.createCresentBuffers=Z;var Q=S(w);r.createCylinderBufferInfo=Q;var $=I(w);r.createCylinderBuffers=$;var J=S(B);r.createTorusBufferInfo=J;var ee=I(B);r.createTorusBuffers=ee;var re=S(O);r.createDiscBufferInfo=re;var te=I(O);r.createDiscBuffers=te},function(e,r,t){"use strict";r.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};r.addExtensionsToContext=E,r.getContext=function(e,r){return function(e,r){for(var t=["webgl2","webgl","experimental-webgl"],n=null,a=0;a<t.length;++a)if(n=e.getContext(t[a],r)){d.addExtensionsToContext&&E(n);break}return n}(e,r)},r.getWebGLContext=function(e,r){return function(e,r){for(var t=["webgl","experimental-webgl"],n=null,a=0;a<t.length;++a)if(n=e.getContext(t[a],r)){d.addExtensionsToContext&&E(n);break}return n}(e,r)},r.resizeCanvasToDisplaySize=function(e,r){r=r||1,r=Math.max(0,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;if(e.width!==t||e.height!==n)return e.width=t,e.height=n,!0;return!1},r.setDefaults=function(e){i.copyExistingProperties(e,d),a.setAttributeDefaults_(e),o.setTextureDefaults_(e)};var a=p(t(7));Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=a[e]))});var o=p(t(8));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=o[e]))});var i=p(t(0)),u=p(t(4));Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=u[e]))});var f=t(12);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=f[e]))});var s=t(13);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=s[e]))});var c=t(5);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=c[e]))});var l=t(1);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=l[e]))});var m=t(14);function p(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=m[e]))});var d={addExtensionsToContext:!0};var y=/^(.*?)_/;function b(e,r){u.glEnumToString(e,0);var t=e.getExtension(r);if(t){var n={},a=y.exec(r)[1],o="_"+a;for(var f in t){var s=t[f],c="function"==typeof s,l=c?a:o,m=f;f.endsWith(l)&&(m=f.substring(0,f.length-l.length)),void 0!==e[m]?c||e[m]===s||i.warn(m,e[m],s,f):c?e[m]=function(e){return function(){return e.apply(t,arguments)}}(s):(e[m]=s,n[m]=s)}n.constructor={name:t.constructor.name},u.glEnumToString(n,0)}return t}var v=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function E(e){for(var r=0;r<v.length;++r)b(e,v[r])}},function(e,r,t){"use strict";r.__esModule=!0,r.drawBufferInfo=a,r.drawObjectList=function(e,r){var t=null,o=null;r.forEach(function(r){if(!1!==r.active){var i=r.programInfo,u=r.vertexArrayInfo||r.bufferInfo,f=!1,s=void 0===r.type?e.TRIANGLES:r.type;i!==t&&(t=i,e.useProgram(i.program),f=!0),(f||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&e.bindVertexArray(null),o=u,n.setBuffersAndAttributes(e,i,u)),n.setUniforms(i,r.uniforms),a(e,u,s,r.count,r.offset,r.instanceCount)}}),o.vertexArrayObject&&e.bindVertexArray(null)};var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}(t(5));function a(e,r,t,n,a,o){t=void 0===t?e.TRIANGLES:t;var i=r.indices,u=r.elementType,f=void 0===n?r.numElements:n;a=void 0===a?0:a,u||i?void 0!==o?e.drawElementsInstanced(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,a,o):e.drawElements(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,a):void 0!==o?e.drawArraysInstanced(t,a,f,o):e.drawArrays(t,a,f)}},function(e,r,t){"use strict";r.__esModule=!0,r.bindFramebufferInfo=function(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},r.createFramebufferInfo=function(e,r,t,o){var c=e.FRAMEBUFFER,l=e.createFramebuffer();e.bindFramebuffer(c,l),t=t||e.drawingBufferWidth,o=o||e.drawingBufferHeight;var m=0,p={framebuffer:l,attachments:[],width:t,height:o};return(r=r||u).forEach(function(r){var u=r.attachment,l=r.format,d=function(e){return f[e]}(l);if(d||(d=i+m++),!u)if(function(e){return s[e]}(l))u=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,l,t,o);else{var y=Object.assign({},r);y.width=t,y.height=o,void 0===y.auto&&(y.auto=!1,y.min=y.min||y.minMag||e.LINEAR,y.mag=y.mag||y.minMag||e.LINEAR,y.wrapS=y.wrapS||y.wrap||e.CLAMP_TO_EDGE,y.wrapT=y.wrapT||y.wrap||e.CLAMP_TO_EDGE),u=n.createTexture(e,y)}if(a.isRenderbuffer(e,u))e.framebufferRenderbuffer(c,d,e.RENDERBUFFER,u);else{if(!a.isTexture(e,u))throw"unknown attachment type";e.framebufferTexture2D(c,d,r.texTarget||e.TEXTURE_2D,u,r.level||0)}p.attachments.push(u)}),p},r.resizeFramebufferInfo=function(e,r,t,o,i){o=o||e.drawingBufferWidth,i=i||e.drawingBufferHeight,r.width=o,r.height=i,(t=t||u).forEach(function(t,u){var f=r.attachments[u],s=t.format;if(a.isRenderbuffer(e,f))e.bindRenderbuffer(e.RENDERBUFFER,f),e.renderbufferStorage(e.RENDERBUFFER,s,o,i);else{if(!a.isTexture(e,f))throw"unknown attachment type";n.resizeTexture(e,f,t,o,i)}})};var n=o(t(8)),a=o(t(0));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var i=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],f={};f[34041]=33306,f[6401]=36128,f[36168]=36128,f[6402]=36096,f[33189]=36096;var s={};s[32854]=!0,s[32855]=!0,s[36194]=!0,s[34041]=!0,s[33189]=!0,s[6401]=!0,s[36168]=!0},function(e,r,t){"use strict";r.__esModule=!0,r.createVertexArrayInfo=function(e,r,t){var a=e.createVertexArray();e.bindVertexArray(a),r.length||(r=[r]);return r.forEach(function(r){n.setBuffersAndAttributes(e,r,t)}),e.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:a}},r.createVAOAndSetAttributes=a,r.createVAOFromBufferInfo=function(e,r,t){return a(e,r.attribSetters||r,t.attribs,t.indices)};var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}(t(5));function a(e,r,t,a){var o=e.createVertexArray();return e.bindVertexArray(o),n.setAttributes(r,t),a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bindVertexArray(null),o}}])});
},{}],"bRKL":[function(require,module,exports) {
"use strict";var r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)Object.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=r(require("twgl.js"));class e{constructor(r,e){this.gl=r,this.programInfos={},this.objects=[],e.children.forEach(e=>{const o=e,s=this.getProgram(o.material),a=t.createBufferInfoFromArrays(r,o.geometry.attributes),i=t.createVertexArrayInfo(r,s,a);this.objects.push({programInfo:s,vertexArrayInfo:i,mesh:o,type:o.type})})}draw(r,e,o=null){const s=this.gl;s.viewport(0,0,e.width,e.height),t.bindFramebufferInfo(s,o),this.objects.forEach(r=>{const{mesh:t}=r;t.updateMatrices(e.view),r.uniforms=Object.assign({},t.material.uniforms,{matModel:t.model,matView:e.view,matProj:e.projection,matModelView:t.modelView,matNormal:t.normal})}),t.drawObjectList(s,this.objects)}getProgram({id:r,vert:e,frag:o}){return this.programInfos[r]||(this.programInfos[r]=t.createProgramInfo(this.gl,[e,o])),this.programInfos[r]}}exports.Command=e;
},{"twgl.js":"Ubq3"}],"pX+i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/errors/illegal-arguments");function r(r){return null!=r&&r[Symbol.iterator]||e.illegalArgs(`value is not iterable: ${r}`),r}exports.ensureIterable=r;
},{"@thi.ng/errors/illegal-arguments":"uRQP"}],"13aX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-array"),r=require("@thi.ng/checks/is-arraylike"),s=require("./ensure-iterable");function i(r){return e.isArray(r)?r:[...s.ensureIterable(r)]}function t(e){return r.isArrayLike(e)?e:[...s.ensureIterable(e)]}exports.ensureArray=i,exports.ensureArrayLike=t;
},{"@thi.ng/checks/is-array":"EzY8","@thi.ng/checks/is-arraylike":"aMkR","./ensure-iterable":"pX+i"}],"zYdP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/errors/illegal-arguments"),r=require("../func/ensure-array");function*t(t,l=1,n=!0,i=!0){const o=r.ensureArray(t);if((l<0||l>o.length)&&e.illegalArgs(`wrong number of wrap items: got ${l}, but max: ${o.length}`),n)for(let e=o.length,r=e-l;r<e;r++)yield o[r];if(yield*o,i)for(let e=0;e<l;e++)yield o[e]}exports.wrap=t;
},{"@thi.ng/errors/illegal-arguments":"uRQP","../func/ensure-array":"13aX"}],"N4rn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../reduce");function r(t){return t?e.reduce(r(),t):e.reducer(()=>void 0,(e,r)=>r)}exports.last=r;
},{"../reduce":"UerL"}],"IixE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../iterator");function t(...r){const n=e.$iter(t,r,e.iterator);if(n)return n;let i,o,u=r[0];return"number"==typeof r[1]?(o=r[1],i=r[2]):(o=u,i=r[1]),([e,t,r])=>{let n=[],s=0;return[e,e=>(i&&n.length>0&&(e=r(e,n),n=[]),t(e)),(e,t)=>(s<=0?(n.length<u&&n.push(t),n.length===u&&(e=r(e,n),n=o<u?n.slice(o):[],s=o-u)):s--,e)]}}exports.partition=t;
},{"../iterator":"fhdf"}],"aO4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../iterator"),r=require("../reduced");function t(...u){return u.length>2&&e.$iter(t,u,e.iterator)||(([e,t,n])=>{const[d,c,s]=u[0];let i=u.length>1&&null!=u[1]?u[1]:d();return[e,e=>{let u=c(i);return u!==i&&(e=r.unreduced(n(e,u))),i=u,t(e)},(e,t)=>(i=s(i,t),r.isReduced(i)?r.ensureReduced(n(e,i.deref())):n(e,i))]})}exports.scan=t;
},{"../iterator":"fhdf","../reduced":"N1be"}],"T15Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polygonArea=(e=>{let r=0;for(let t=e.length-1,o=t,s=0;t>=0;o=s,s++,t--)r+=e[o].cross(e[s]);return r/2});
},{}],"HDWr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/errors/illegal-arguments"),t=require("@thi.ng/vectors/vec2");exports.centroid=((t,r)=>{const s=t.length;!s&&e.illegalArgs("no points available"),!r&&(r=t[0].empty());for(let e=s;--e>=0;)r.add(t[e]);return r.divN(s)}),exports.centerOfWeight=((e,r)=>{let s=0,n=0,o=0;for(let t=e.length-1,l=e[t],i=e[0],c=0;c<=t;l=i,i=e[++c]){const e=l.cross(i);s+=e,n+=(l.x+i.x)*e,o+=(l.y+i.y)*e}return n*=s=1/(3*s),o*=s,r?r.setS(n,o):new t.Vec2([n,o])});
},{"@thi.ng/errors/illegal-arguments":"uRQP","@thi.ng/vectors/vec2":"oJI8"}],"FWip":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./api");exports.absDiff=((e,s)=>Math.abs(e-s)),exports.sign=((s,t=e.EPS)=>s>t?1:s<-t?-1:0);
},{"./api":"zd6y"}],"JS/o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@thi.ng/math/abs"),e=require("@thi.ng/math/api");exports.corner=((r,e,o)=>{const t=r.x,s=r.y;return(e.x-t)*(o.y-s)-(o.x-t)*(e.y-s)}),exports.classify=((o,t,s,n=e.EPS)=>r.sign(exports.corner(o,t,s),n)),exports.clockwise2=((r,e,o)=>exports.corner(r,e,o)<0),exports.classifyPointInTriangle2=((e,o,t,s)=>{const n=exports.clockwise2(o,t,s)?1:-1;return r.sign(Math.min(n*exports.corner(o,s,e),n*exports.corner(t,o,e),n*exports.corner(s,t,e)))}),exports.pointInTriangle2=((r,e,o,t)=>{const s=exports.clockwise2(e,o,t)?1:-1;return s*exports.corner(e,t,r)>=0&&s*exports.corner(o,e,r)>=0&&s*exports.corner(t,o,r)>=0});
},{"@thi.ng/math/abs":"FWip","@thi.ng/math/api":"zd6y"}],"dYlv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@thi.ng/checks/is-function"),e=require("@thi.ng/transducers/func/comp"),t=require("@thi.ng/transducers/iter/range"),n=require("@thi.ng/transducers/iter/repeat"),i=require("@thi.ng/transducers/iter/tuples"),s=require("@thi.ng/transducers/iter/wrap"),u=require("@thi.ng/transducers/reduce"),a=require("@thi.ng/transducers/rfn/last"),c=require("@thi.ng/transducers/rfn/push"),p=require("@thi.ng/transducers/transduce"),o=require("@thi.ng/transducers/xform/map"),d=require("@thi.ng/transducers/xform/mapcat"),m=require("@thi.ng/transducers/xform/partition"),h=require("@thi.ng/transducers/xform/scan"),g=require("./internal/area"),l=require("./internal/centroid"),q=require("./internal/corner"),x=(r,e,t,n,i,s)=>{const u=r[s[e]],a=r[s[t]],c=r[s[n]];if(q.corner(u,a,c)>0){for(let p=0;p<i;p++)if(p!==e&&p!==t&&p!==n&&q.pointInTriangle2(r[s[p]],u,a,c))return;return[u,a,c]}};function f(...e){return p.transduce(h.scan(u.reducer(()=>[e[0]],(r,e)=>p.transduce(d.mapcat(e),c.push(),r))),a.last(),r.isFunction(e[1])?n.repeat(e[1],e[2]||1):e[1])}exports.earCut=(r=>{const e=[];let n=r.length;const i=[...g.polygonArea(r)>0?t.range(n):t.range(n-1,-1,-1)];let s,u,a,c=2*n-1,p=n-1;for(;c>0&&n>2;)void 0!==(a=x(r,s=n<=p?0:p,p=n<=(p=s+1)?0:p,u=n<=(u=p+1)?0:u,n,i))?(e.push(a),i.splice(p,1),c=2*--n):c--;return e}),exports.triFan=(r=>{const t=l.centroid(r);return p.transduce(e.comp(m.partition(2,1),o.map(([r,e])=>[r,e,t])),c.push(),s.wrap(r,1,!1,!0))}),exports.quadFan=(r=>{const t=l.centroid(r);return p.transduce(e.comp(m.partition(3,1),o.map(([r,e,n])=>[r.mixNewN(e,.5),e,e.mixNewN(n,.5),t])),c.push(),s.wrap(r,1,!0,!0))}),exports.edgeSplit=(r=>{const t=l.centroid(r);return p.transduce(e.comp(m.partition(2,1),d.mapcat(([r,e])=>{const n=r.mixNewN(e,.5);return[[r,n,t],[n,e,t]]})),c.push(),s.wrap(r,1,!1,!0))}),exports.rimTris=(r=>{const t=p.transduce(e.comp(m.partition(2,1),o.map(r=>r[0].mixNewN(r[1],.5))),c.push(),s.wrap(r,1,!1,!0));return p.transduce(e.comp(m.partition(2,1),o.map(r=>[r[0][0],r[1][1],r[1][0]])),c.push(),[t],s.wrap([...i.tuples(t,r)],1,!0,!1))}),exports.inset=((r=.5,t=!1)=>n=>{const u=l.centroid(n),a=n.map(e=>e.mixNewN(u,r));return p.transduce(e.comp(m.partition(2,1),o.map(([[r,e],[t,n]])=>[r,e,n,t])),c.push(),t?[a]:[],s.wrap([...i.tuples(n,a)],1,!1,!0))}),exports.tessellate=f;
},{"@thi.ng/checks/is-function":"Bufo","@thi.ng/transducers/func/comp":"9vBN","@thi.ng/transducers/iter/range":"GT77","@thi.ng/transducers/iter/repeat":"dQxW","@thi.ng/transducers/iter/tuples":"BCky","@thi.ng/transducers/iter/wrap":"zYdP","@thi.ng/transducers/reduce":"UerL","@thi.ng/transducers/rfn/last":"N4rn","@thi.ng/transducers/rfn/push":"8/nZ","@thi.ng/transducers/transduce":"iqGa","@thi.ng/transducers/xform/map":"WUst","@thi.ng/transducers/xform/mapcat":"pk6b","@thi.ng/transducers/xform/partition":"IixE","@thi.ng/transducers/xform/scan":"aO4q","./internal/area":"T15Y","./internal/centroid":"HDWr","./internal/corner":"JS/o"}],"OJ1V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.axisBounds=((e,t)=>{let o=1/0,n=-1/0;for(let r=e.length;--r>=0;){const s=e[r][t];s<o&&(o=s),s>n&&(n=s)}return[o,n]}),exports.bounds=((e,t,o)=>{for(let n=e.length;--n>=0;){const r=e[n];t.min(r),o.max(r)}return[t,o]}),exports.collBounds=(e=>{let t=e.length-1,o=t>0?e[t].bounds():void 0;for(;--t>=0;)o=o.union(e[t].bounds());return o});
},{}],"aCnP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.remap=((e,t,r,s,i)=>{for(let o=t.length;--o>=0;){const l=t[o];l.buf=e,l.i=r+o*i,l.s=s}return e}),exports.collateWith=((e,t,r,s)=>{r=Object.assign({start:0,cstride:1,estride:s},r);const{start:i,cstride:o,estride:l}=r;return exports.remap(e(r.buf||new Array(i+t.length*l).fill(0),t,i,o,l),t,i,o,l)});
},{}],"TjKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/errors/illegal-arguments"),e=require("@thi.ng/vectors/vec3"),r=require("./internal/bounds"),s=require("./internal/collate");class i{constructor(t,e){this.points=t,this.attribs=e}*[Symbol.iterator](){yield*this.vertices()}collate(t){return s.collateWith(e.Vec3.intoBuffer,this.points,t,3)}vertices(){return this.points}boundsRaw(){return r.bounds(this.points,e.Vec3.MAX.copy(),e.Vec3.MIN.copy())}bounds(){return this.boundsRaw()}centroid(r){const s=this.points,i=s.length;!i&&t.illegalArgs("no points available"),!r&&(r=e.vec3());for(let t=i;--t>=0;)r.add(s[t]);return r.divN(i)}center(t){const e=this.centroid().neg();return this.translate(t?e.add(t):e)}flip(){return this.points.reverse(),this}scale(t){const e=this.points;for(let r=e.length;--r>=0;)e[r].mul(t);return this}translate(t){const e=this.points;for(let r=e.length;--r>=0;)e[r].add(t);return this}transform(t){const e=this.points;for(let r=e.length;--r>=0;)t.mulV3(e[r]);return this}_copy(){return e.Vec3.mapBuffer(e.Vec3.intoBuffer([],this.points),this.points.length)}_toJSON(t){return{type:t,attribs:this.attribs,points:this.points.map(t=>t.toJSON())}}}exports.PointContainer3=i;
},{"@thi.ng/errors/illegal-arguments":"uRQP","@thi.ng/vectors/vec3":"K9zr","./internal/bounds":"OJ1V","./internal/collate":"aCnP"}],"I1os":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/vectors/vec3"),t=require("@thi.ng/geom/tessellate"),s=require("@thi.ng/geom/container3"),r=require("@thi.ng/transducers/xform/mapcat");class o{constructor(e){this.attributes=e}}exports.Geometry=o,exports.tessellate3=(e=>3==e.length?[[e[0],e[1],e[2]]]:4==e.length?[[e[0],e[1],e[2]],[e[0],e[2],e[3]]]:void 0);class c extends s.PointContainer3{constructor(e,t,s){super(e,s),this.faces=t}tessellate(...e){return[...r.mapcat(s=>t.tessellate.apply(null,[s,...e]),this.faces)]}}exports.Polygon3=c;class n extends c{constructor(e,t){super(e,[e],t)}}exports.Quad3=n;class i{constructor(t=e.Vec3.ZERO.copy(),s=e.Vec3.ONE.copy()){this.position=t,this.size=s}vertices(t){const s=this.position,r=s.addNew(this.size);return[s,new e.Vec3([s.x,s.y,r.z]),new e.Vec3([r.x,s.y,r.z]),new e.Vec3([r.x,s.y,s.z]),new e.Vec3([s.x,r.y,s.z]),new e.Vec3([s.x,r.y,r.z]),r,new e.Vec3([r.x,r.y,s.z])]}toPolygon(e){const t=this.vertices(e),s=[[t[2],t[3],t[7],t[6]],[t[0],t[1],t[5],t[4]],[t[4],t[5],t[6],t[7]],[t[0],t[3],t[2],t[1]],[t[1],t[2],t[6],t[5]],[t[0],t[4],t[7],t[3]]];return new c(t,s)}}exports.AABB=i;
},{"@thi.ng/vectors/vec3":"K9zr","@thi.ng/geom/tessellate":"dYlv","@thi.ng/geom/container3":"TjKX","@thi.ng/transducers/xform/mapcat":"pk6b"}],"dQDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/vectors/vec3"),e=require("@thi.ng/vectors/mat44"),i=require("./node");class h extends i.Node{constructor(t,i){super(),this._view=e.Mat44.identity(),this._projection=e.Mat44.identity(),this.width=t,this.height=i}set width(t){this._width=t}get width(){return this._width}set height(t){this._height=t}get height(){return this._height}get projection(){return this._projection}get view(){return this._view}}exports.Camera=h;class s extends h{constructor(){super(...arguments),this._fov=30,this._near=.01,this._far=1e3,this._projectionCached=!1,this._target=new t.Vec3,this._up=new t.Vec3([0,1,0]),this._viewCached=!1}set width(t){this._width=t,this._projectionCached=!1}get width(){return this._width}set height(t){this._height=t,this._projectionCached=!1}get height(){return this._height}set fov(t){this._fov=t,this._projectionCached=!1}get fov(){return this._fov}get aspect(){return this.width/this.height}set near(t){this._near=t,this._projectionCached=!1}get near(){return this._near}set far(t){this._far=t,this._projectionCached=!1}get far(){return this._far}set position(t){this._position.set(t),this._viewCached=!1}get position(){return this._position}set target(t){this._target.set(t),this._viewCached=!1}get target(){return this._target}set up(t){this._up.set(t),this._viewCached=!1}get up(){return this._up}get pivotDistance(){return this.target.dist(this.position)}get projection(){return this._projectionCached||(e.perspective(this._projection.buf,this.fov,this.aspect,this.near,this.far),this._projectionCached=!0),this._projection}get view(){return this._viewCached||(e.lookAt(this._view.buf,this.position.buf,this.target.buf,this.up.buf),this._viewCached=!0),this._view}}exports.PerspectiveCamera=s;class r extends h{constructor(){super(...arguments),this.left=-1,this.right=1,this.top=1,this.bottom=-1,this.near=0,this.far=1e3,this._projectionCached=!1}get projection(){return this._projectionCached||(e.ortho(this._projection.buf,this.left,this.right,this.bottom,this.top,this.near,this.far),this._projectionCached=!0),this._projection}}exports.OrthoCamera=r;
},{"@thi.ng/vectors/vec3":"K9zr","@thi.ng/vectors/mat44":"CMHc","./node":"dkZe"}],"VdOx":[function(require,module,exports) {
module.exports="// #version 300 es\n\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\nuniform mat4 matModelView;\nuniform mat4 matProj;\n\nattribute vec3 position;\nattribute vec2 texcoord;\nattribute vec2 barycentric;\n\nvarying vec2 vBarycentric;\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = texcoord;\n  vBarycentric = barycentric;\n\n  gl_Position = matProj * matModelView * vec4(position, 1.0);\n}";
},{}],"UteO":[function(require,module,exports) {
module.exports="// #version 300 es\n\n#extension GL_OES_standard_derivatives : enable\n\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\n#define PI      3.141592653589793\n\nuniform float width;\nuniform float feather;\nuniform bool removeEdge;\nuniform float squeezeMin;\nuniform float squeezeMax;\nuniform float dashOffset;\nuniform float dashRepeat;\nuniform float dashLength;\nuniform vec4 colorEdge;\nuniform vec4 colorFill;\n\nvarying vec2 vBarycentric;\n\n// out vec4 fragColor;\n\nvec3 baryCoord(vec2 bary) {\n  return vec3(bary.x, bary.y, removeEdge ? 1.0 : 1.0 - bary.x - bary.y);\n}\n\nfloat positionAlong(vec3 bary) {\n  return bary.y * step(bary.x, bary.y) * step(bary.x, bary.z) +\n         bary.z * step(bary.y, bary.x) * step(bary.y, bary.z) +\n         bary.x * step(bary.z, bary.y) * step(bary.z, bary.x);\n}\n\nfloat gridFactor(vec3 bary, float width, float feather) {\n  vec3 d = fwidth(bary);\n  vec3 a3 = smoothstep(d * (width - 1.5), d * (width + feather), bary);\n  return min(min(a3.x, a3.y), a3.z);\n}\n\nfloat aastep(float threshold, float dist) {\n  float af = fwidth(dist) * 0.5;\n  return smoothstep(threshold - af, threshold + af, dist);\n}\n\nvoid main() {\n  vec3 bary = baryCoord(vBarycentric);\n  float pa = positionAlong(bary);\n\n  float thickness = width;\n  thickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(pa * PI)));\n  float pattern = fract((pa + dashOffset) * dashRepeat);\n  thickness *= 1.0 - aastep(dashLength, pattern);\n\n  float g = 1.0 - gridFactor(bary, thickness, feather);\n\n  gl_FragColor = mix(colorFill, colorEdge, g);\n}";
},{}],"vO+U":[function(require,module,exports) {
module.exports="// #version 300 es\n\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\nuniform mat4 matModelView;\nuniform mat4 matProj;\n\nattribute vec3 position;\nattribute vec3 color;\n\nvarying vec3 vColor;\n\nvoid main() {\n  vColor = color;\n\n  gl_Position = matProj * matModelView * vec4(position, 1.0);\n}";
},{}],"e6Fu":[function(require,module,exports) {
module.exports="// #version 300 es\n\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\nvarying vec3 vColor;\n\n// out vec4 fragColor;\n\nvoid main(){\n  gl_FragColor = vec4(vColor, 1.0);\n}";
},{}],"wFFt":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@thi.ng/vectors/vec3"),t=require("@thi.ng/vectors/vec4"),a=require("@thi.ng/transducers/xform/mapcat"),s=require("@thi.ng/transducers/xform/flatten"),n=require("@thi.ng/transducers/xform/map"),i=require("@thi.ng/transducers/rfn/push"),c=require("@thi.ng/transducers/func/comp"),o=require("@thi.ng/transducers/transduce"),u=require("@thi.ng/transducers/iter/repeat"),l=require("@pngu/gl/application"),d=require("@pngu/gl/scene"),h=require("@pngu/gl/mesh"),m=require("@pngu/gl/material"),p=require("@pngu/gl/command"),g=require("@pngu/gl/geometry"),f=require("@pngu/gl/camera"),q=e(require("../shaders/wire/vert.glsl")),w=e(require("../shaders/wire/frag.glsl")),E=e(require("../shaders/wire/line.vert")),_=e(require("../shaders/wire/line.frag"));exports.defaultParams={width:1.4,feather:.1,removeEdge:!0,squeezeMin:1,squeezeMax:1,dashOffset:0,dashRepeat:0,dashLength:.5,colorEdge:new t.Vec4([.3,.3,.3,1]),colorFill:new t.Vec4([0,0,0,.25]),cameraUp:new r.Vec3([0,1,0]),cameraPos:new r.Vec3([0,0,8])};class v extends l.Application{constructor(){super(...arguments),this.vd=new r.Vec3}set params(e){const r=this.mat.uniforms;r.width=e.width,r.feather=e.feather,r.removeEdge=e.removeEdge,r.squeezeMin=e.squeezeMin,r.squeezeMax=e.squeezeMax,r.dashOffset=e.dashOffset,r.dashRepeat=e.dashRepeat,r.dashLength=e.dashLength,r.colorEdge=e.colorEdge,r.colorFill=e.colorFill,this.camera.up=e.cameraUp,this.camera.position=e.cameraPos}init(e){super.init(e),this.camera=new f.PerspectiveCamera(e.canvas.clientWidth,e.canvas.clientHeight),this.camera.position=exports.defaultParams.cameraPos;const t=(new g.AABB).toPolygon().tessellate(g.tessellate3),l=o.transduce(c.comp(a.mapcat(e=>e),n.map(e=>e.subNewN(.5))),i.push(),t),v=r.Vec3.intoBuffer(new Float32Array(3*t.length*3),l),A={data:[...s.flatten(u.repeat([[1,0],[0,0],[0,1],[0,1],[1,0],[0,0]],6))],numComponents:2},M=new g.Geometry({position:v,barycentric:A,texcoord:[...s.flatten(u.repeat([[1,0],[0,0],[0,1],[1,0],[0,1],[1,1]],6))]}),P=new g.Geometry({position:[...s.flatten([[0,0,0],[1,0,0],[0,0,0],[0,1,0],[0,0,0],[0,0,1]])],color:[...s.flatten([[1,0,0,1],[1,0,0,1],[0,1,0,1],[0,1,0,1],[0,0,1,1],[0,0,1,1]])]});this.mat=new m.Material(q.default,w.default);const x=new d.Scene;x.add(new h.Mesh(M,this.mat)),x.add(new h.Mesh(P,new m.Material(E.default,_.default),e.LINES)),this.cmd=new p.Command(e,x)}render(e){const r=this.gl;r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.SAMPLE_COVERAGE),r.enable(r.SAMPLE_ALPHA_TO_COVERAGE),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this.cmd.draw(e,this.camera)}}exports.App=v;
},{"@thi.ng/vectors/vec3":"K9zr","@thi.ng/vectors/vec4":"Lylz","@thi.ng/transducers/xform/mapcat":"pk6b","@thi.ng/transducers/xform/flatten":"FhYa","@thi.ng/transducers/xform/map":"WUst","@thi.ng/transducers/rfn/push":"8/nZ","@thi.ng/transducers/func/comp":"9vBN","@thi.ng/transducers/transduce":"iqGa","@thi.ng/transducers/iter/repeat":"dQxW","@pngu/gl/application":"gU22","@pngu/gl/scene":"Yyjp","@pngu/gl/mesh":"wdeG","@pngu/gl/material":"jdMK","@pngu/gl/command":"bRKL","@pngu/gl/geometry":"I1os","@pngu/gl/camera":"dQDg","../shaders/wire/vert.glsl":"VdOx","../shaders/wire/frag.glsl":"UteO","../shaders/wire/line.vert":"vO+U","../shaders/wire/line.frag":"e6Fu"}],"llWI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HOME={id:"home",match:["home"]},exports.UI={id:"ui",match:["ui"]},exports.ORIENT={id:"orient",match:["orient"]};
},{}],"wCDR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../events");function t(t,r,s,n,u){return["a",Object.assign({},r,{onclick:r=>{r.preventDefault(),t.bus.dispatch([e.ev.ROUTE_TO,[s,n]])}}),u]}exports.routeLink=t;
},{"../events":"4b/7"}],"I/SW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./route-link");function o(o){const t=o.ui;return["div",t.root,["div",t.logo,[e.routeLink,t.link,"home",{},"pngupngu"]]]}exports.home=o;
},{"./route-link":"wCDR"}],"6ajC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeAttribs=((s,e)=>{if(!e)return s;const t=Object.assign({},s,e);return s.class&&e.class&&(t.class=s.class+" "+e.class),s.style&&e.style&&(t.style=Object.assign({},s.style,e.style)),t});
},{}],"woRN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./utils/merge-attribs");exports.button=(e=>(!(e=Object.assign({tag:"a",tagDisabled:"span",preventDefault:!0,attribs:{}},e)).attribs.role&&(e.attribs.role="button"),(s,a,...i)=>a.disabled?[e.tagDisabled,Object.assign({},t.mergeAttribs(e.attribsDisabled,a.attribs),{disabled:!0}),...i]:[e.tag,Object.assign({},t.mergeAttribs(e.attribs,a.attribs),{onclick:e.preventDefault?t=>(t.preventDefault(),a.onclick(t)):a.onclick}),...i]));
},{"./utils/merge-attribs":"6ajC"}],"SDbb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/transducers/xform/mapcat");exports.panel=((t,r,...a)=>["div",r.container,...e.mapcat(([e,...t])=>[["div",r.label,e],["div",r.content,...t]],a)]);
},{"@thi.ng/transducers/xform/mapcat":"pk6b"}],"QmyF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.option=(([e,o,p],t)=>["option",{value:e,disabled:!!p,selected:e===t},o]),exports.optgroup=((e,o,p)=>["optgroup",Object.assign({},e,{label:e.label||"--"}),...o.map(e=>exports.option(e,p))]),exports.dropdown=((e,o,p,t)=>["select",o,...p.map(e=>exports.option(e,t))]),exports.groupedDropdown=((e,o,p,t)=>["select",o,...p.map(e=>exports.optgroup(e[0],e[1],t))]);
},{}],"n8n5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/hdom-components/dropdown"),t=e=>{};exports.select=((n,{attribs:o,onchange:r=t},s,a)=>["div",o.container,[e.dropdown,Object.assign({onchange:e=>r(e.target.value)},o.dropdown),s,a],["span",o.triangle]]),exports.create=(e=>(t,n,...o)=>[exports.select,{attribs:n.attribs||e.attribs,onchange:n.onchange||e.onchange},...o]);
},{"@thi.ng/hdom-components/dropdown":"QmyF"}],"33rF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./interval");exports.norm=((e,t,r)=>r!==t?(e-t)/(r-t):0),exports.fit=((e,t,r,o,p)=>o+(p-o)*exports.norm(e,t,r)),exports.fitClamped=((t,r,o,p,s)=>p+(s-p)*e.clamp01(exports.norm(t,r,o))),exports.fit01=((t,r,o)=>r+(o-r)*e.clamp01(t)),exports.fit10=((t,r,o)=>o+(r-o)*e.clamp01(t)),exports.fit11=((t,r,o)=>r+(o-r)*(.5+.5*e.clamp11(t)));
},{"./interval":"PBUS"}],"ryPz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/api/api"),r=require("../func/compr"),t=require("../iterator");function i(...u){return t.$iter(i,u)||(t=>{const i=t[2],o=u[0];let n=e.SEMAPHORE;return r.compR(t,o?(e,r)=>(e=o(n,r)?e:i(e,r),n=r,e):(e,r)=>(e=n===r?e:i(e,r),n=r,e))})}exports.dedupe=i;
},{"@thi.ng/api/api":"jIkc","../func/compr":"IqcY","../iterator":"fhdf"}],"mjlp":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),function(t){t[t.IDLE=0]="IDLE",t[t.ACTIVE=1]="ACTIVE",t[t.DONE=2]="DONE",t[t.ERROR=3]="ERROR",t[t.DISABLED=4]="DISABLED"}(t=exports.State||(exports.State={})),exports.__State=exports.State,exports.DEBUG=!1;
},{}],"kQ3j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@thi.ng/api/api"),s=require("@thi.ng/checks/implements-function"),e=require("@thi.ng/checks/is-function"),i=require("@thi.ng/checks/is-string"),r=require("@thi.ng/errors/illegal-arity"),n=require("@thi.ng/errors/illegal-state"),h=require("@thi.ng/transducers/func/comp"),u=require("@thi.ng/transducers/reduced"),o=require("@thi.ng/transducers/rfn/push"),l=require("./api");function c(t,s,e,i){return new a(t,s,e,i)}exports.subscription=c;class a{constructor(s,e,i,r){this.state=0,this.parent=i,this.id=r||`sub-${a.NEXT_ID++}`,this.last=t.SEMAPHORE,this.subs=[],s&&this.subs.push(s),e&&(this.xform=e(o.push()))}deref(){return this.last!==t.SEMAPHORE?this.last:void 0}getState(){return this.state}subscribe(...i){let n,h,u;switch(this.ensureState(),i.length){case 1:case 2:e.isFunction(i[0])?(h=i[0],u=i[1]||`xform-${a.NEXT_ID++}`):(n=i[0],e.isFunction(i[1])?h=i[1]:u=i[1]);break;case 3:[n,h,u]=i;break;default:r.illegalArity(i.length)}return s.implementsFunction(n,"subscribe")?n.parent=this:n=new a(n,h,this,u),this.last!==t.SEMAPHORE&&n.next(this.last),this.addWrapped(n)}subscribeAll(...t){const s=[];for(let e of t)s.push(this.subscribe(e));return s}transform(...t){const s=t.length-1;return i.isString(t[s])?this.subscribe(h.comp(...t.slice(0,s)),t[s]):this.subscribe(h.comp(...t))}unsubscribe(t){if(l.DEBUG&&console.log(this.id,"unsub start",t?t.id:"self"),!t){let t=!0;return this.parent&&(t=this.parent.unsubscribe(this)),this.state=2,this.cleanup(),t}if(this.subs){l.DEBUG&&console.log(this.id,"unsub child",t.id);const s=this.subs.indexOf(t);if(s>=0)return this.subs.splice(s,1),this.subs.length||this.unsubscribe(),!0}return!1}next(t){if(this.state<2)if(this.xform){const s=this.xform[2]([],t),e=u.unreduced(s),i=e.length;for(let t=0;t<i;t++)this.dispatch(e[t]);u.isReduced(s)&&this.done()}else this.dispatch(t)}done(){if(l.DEBUG&&console.log(this.id,"done start"),this.state<2){if(this.xform){const t=this.xform[1]([]),s=u.unreduced(t),e=s.length;for(let i=0;i<e;i++)this.dispatch(s[i])}this.state=2;for(let t of[...this.subs])t.done&&t.done();this.unsubscribe(),l.DEBUG&&console.log(this.id,"done")}}error(t){this.state=3;let s=!1;if(this.subs&&this.subs.length)for(let e of this.subs.slice())e.error&&(e.error(t),s=!0);s||(console.log(this.id,"unhandled error:",t),this.parent&&(l.DEBUG&&console.log(this.id,"unsubscribing..."),this.unsubscribe(),this.state=3))}addWrapped(t){return this.subs.push(t),this.state=1,t}dispatch(t){l.DEBUG&&console.log(this.id,"dispatch",t),this.last=t;const s=this.subs;let e;if(1==s.length){e=s[0];try{e.next&&e.next(t)}catch(i){e.error?e.error(i):this.error(i)}}else for(let r=s.length-1;r>=0;r--){e=s[r];try{e.next&&e.next(t)}catch(i){e.error?e.error(i):this.error(i)}}}ensureState(){this.state>=2&&n.illegalState(`operation not allowed in ${l.__State[this.state]} state`)}cleanup(){l.DEBUG&&console.log(this.id,"cleanup"),this.subs.length=0,delete this.parent,delete this.xform,delete this.last}}a.NEXT_ID=0,exports.Subscription=a;
},{"@thi.ng/api/api":"jIkc","@thi.ng/checks/implements-function":"1ayp","@thi.ng/checks/is-function":"Bufo","@thi.ng/checks/is-string":"YRs3","@thi.ng/errors/illegal-arity":"r3zx","@thi.ng/errors/illegal-state":"htig","@thi.ng/transducers/func/comp":"9vBN","@thi.ng/transducers/reduced":"N1be","@thi.ng/transducers/rfn/push":"8/nZ","./api":"mjlp"}],"2B10":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/checks/is-string"),s=require("@thi.ng/errors/illegal-arity"),t=require("./api"),r=require("./subscription");function i(e,s){return new c(e,s)}exports.stream=i;class c extends r.Subscription{constructor(...t){let i,c;switch(t.length){case 0:break;case 1:e.isString(t[0])?c=t[0]:i=t[0];break;case 2:[i,c]=t;break;default:s.illegalArity(t.length)}super(null,null,null,c||`stream-${r.Subscription.NEXT_ID++}`),this.src=i}subscribe(...e){const s=super.subscribe.apply(this,e);return 1===this.subs.length&&(this._cancel=this.src&&this.src(this)||(()=>void 0)),s}unsubscribe(e){const s=super.unsubscribe(e);return!s||e&&this.subs&&this.subs.length||this.cancel(),s}done(){this.cancel(),super.done(),delete this.src,delete this._cancel}error(e){super.error(e),this.cancel()}cancel(){if(this._cancel){t.DEBUG&&console.log(this.id,"cancel");const e=this._cancel;delete this._cancel,e()}}}exports.Stream=c;
},{"@thi.ng/checks/is-string":"YRs3","@thi.ng/errors/illegal-arity":"r3zx","./api":"mjlp","./subscription":"kQ3j"}],"BKGr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../stream"),t=require("../subscription");function r(r,n,s=!1){return new e.Stream(e=>{let t=t=>e.next(t);return r.addEventListener(n,t,s),()=>r.removeEventListener(n,t,s)},`event-${n}-${t.Subscription.NEXT_ID++}`)}exports.fromEvent=r;
},{"../stream":"2B10","../subscription":"kQ3j"}],"nap+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./subscription");function s(e){return new r(e)}exports.merge=s;class r extends e.Subscription{constructor(s){super(null,(s=s||{}).xform,null,s.id||`streammerge-${e.Subscription.NEXT_ID++}`),this.sources=new Map,this.autoClose=!1!==s.close,s.src&&this.addAll(s.src)}add(s){this.ensureState(),this.sources.set(s,s.subscribe({next:s=>{s instanceof e.Subscription?this.add(s):this.next(s)},done:()=>this.markDone(s),__owner:this},`in-${s.id}`))}addAll(e){for(let s of e)this.add(s)}remove(e){const s=this.sources.get(e);return!!s&&(this.sources.delete(e),s.unsubscribe(),!0)}removeID(e){for(let s of this.sources)if(s[0].id===e)return this.remove(s[0]);return!1}removeAll(e){let s=!0;for(let r of e)s=this.remove(r)&&s;return s}removeAllIDs(e){let s=!0;for(let r of e)s=this.removeID(r)&&s;return s}unsubscribe(e){if(!e){for(let e of this.sources.values())e.unsubscribe();this.state=2,this.sources.clear()}return super.unsubscribe(e)}markDone(e){this.remove(e),this.autoClose&&!this.sources.size&&this.done()}}exports.StreamMerge=r;
},{"./subscription":"kQ3j"}],"2f/f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/rstream/from/event"),t=require("@thi.ng/rstream/stream-merge"),o=require("@thi.ng/transducers/xform/map");var s;function r(s,r){let m,a=!1;r=Object.assign({id:"gestures",zoom:1,absZoom:!0,minZoom:.25,maxZoom:4,smooth:1,eventOpts:{capture:!0},preventDefault:!0,local:!0,scale:!1},r);let c=Math.min(Math.max(r.zoom,r.minZoom),r.maxZoom);const n=window.devicePixelRatio||1;return t.merge({id:r.id,src:["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel","wheel"].map(t=>e.fromEvent(s,t,r.eventOpts)),xform:o.map(e=>{let t,o;r.preventDefault&&e.preventDefault(),e.touches?(o={touchstart:0,touchmove:2,touchend:3,touchcancel:3}[e.type],t=e.changedTouches[0]):(o={mousedown:0,mousemove:a?2:1,mouseup:3,wheel:4}[e.type],t=e);const u=[0|t.clientX,0|t.clientY];if(r.local){const e=s.getBoundingClientRect();u[0]-=e.left,u[1]-=e.top}r.scale&&(u[0]*=n,u[1]*=n);const i={pos:u,zoom:c};switch(o){case 0:a=!0,m=[...u];break;case 3:a=!1,m=null;break;case 2:i.click=m,i.delta=[u[0]-m[0],u[1]-m[1]];break;case 4:i.zoom=c=r.absZoom?Math.min(Math.max(c+e.deltaY*r.smooth,r.minZoom),r.maxZoom):e.deltaY*r.smooth}return[o,i]})})}!function(e){e[e.START=0]="START",e[e.MOVE=1]="MOVE",e[e.DRAG=2]="DRAG",e[e.END=3]="END",e[e.ZOOM=4]="ZOOM"}(s=exports.GestureType||(exports.GestureType={})),exports.__GestureType=exports.GestureType,exports.gestureStream=r;
},{"@thi.ng/rstream/from/event":"BKGr","@thi.ng/rstream/stream-merge":"nap+","@thi.ng/transducers/xform/map":"WUst"}],"AmR+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../iterator"),r=require("../func/compr");function t(o,u){return u?e.iterator1(t(o),u):e=>{const t=e[2];return r.compR(e,(e,r)=>o(r)?t(e,r):e)}}exports.filter=t;
},{"../iterator":"fhdf","../func/compr":"IqcY"}],"4WRK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const s=require("@thi.ng/rstream/subscription");function e(s,e){return new t(s,e)}exports.takeUntil=e;class t extends s.Subscription{constructor(e,t){super(null,null,null,t||`takeuntil-${s.Subscription.NEXT_ID++}`);const u=this;this.sideSub=e.subscribe({next(){setTimeout(()=>u.unsubscribe())},done(){u.done()}})}unsubscribe(s){const e=super.unsubscribe(s);return s&&this.subs.length||this.sideSub.unsubscribe(),e}done(){super.done(),this.sideSub.unsubscribe()}}exports.TakeUntil=t;
},{"@thi.ng/rstream/subscription":"kQ3j"}],"01QI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@thi.ng/rstream-gestures"),e=require("@thi.ng/rstream/stream-merge"),t=require("@thi.ng/transducers/xform/filter"),s=require("@thi.ng/transducers/xform/map"),o=require("@pngu/core/rstream/take-until");exports.streamDrag=(n=>{const m=r.gestureStream(n).transform(t.filter(r=>0==r[0]),s.map(e=>{const n=r.gestureStream(document.body),m=n.transform(t.filter(r=>1==r[0]),"move"),a=n.transform(t.filter(r=>3==r[0]),"end");return m.subscribe(o.takeUntil(a)).transform(s.map(r=>{const t=e[1].pos,s=[r[1].pos[0]-t[0],r[1].pos[1]-t[1]];return{pos:t,zoom:e[1].zoom,click:t,delta:s}}))}));return e.merge({src:[m]})});
},{"@thi.ng/rstream-gestures":"2f/f","@thi.ng/rstream/stream-merge":"nap+","@thi.ng/transducers/xform/filter":"AmR+","@thi.ng/transducers/xform/map":"WUst","@pngu/core/rstream/take-until":"4WRK"}],"kuJ2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/math/interval"),t=require("@thi.ng/math/fit"),r=require("@thi.ng/transducers/xform/map"),i=require("@thi.ng/transducers/xform/dedupe"),n=require("@thi.ng/transducers/iter/range"),s=require("./utils"),a=e=>{};exports.slider=(()=>{let n,o;return{init(c,d,{max:p,min:m,step:u,onchange:l=a},g){const x=Math.floor((p-m)/u);o=c,n=s.streamDrag(c).transform(r.map(({pos:r,delta:i})=>{const{left:n,width:s}=c.getBoundingClientRect(),a=e.clamp(t.fit(r[0]+i[0]-n,0,s,0,x),0,x);return m+Math.floor(a+.5)*u}),i.dedupe()).subscribe({next:l}),l(g)},render(e,{max:r,min:i,attribs:n,precision:s=2},a){const c=o?t.fit(a,i,r,0,o.getBoundingClientRect().width):0;return["div",n.container,["div",Object.assign({style:{width:`${c.toFixed(3)}px`}},n.handle),["span",n.value,a.toFixed(s)]]]},release(){n.done()}}}),exports.create=(e=>{const t=exports.slider();return(r,i,n)=>[t,Object.assign({},e,i),n]}),exports.multiSlider=((e,t)=>{const i={min:t.min,max:t.max,step:t.step,precision:t.precision,attribs:t.attribs.slider},s=[...r.map(()=>exports.create(i),n.range(e))];return(i,a,o)=>["div",a.attribs?a.attribs.container:t.attribs.container,...r.map(e=>[s[e],{min:a.min||t.min,max:a.max||t.max,step:a.step||t.step,precision:a.precision||t.precision,attribs:a.attribs?a.attribs.slider:t.attribs.slider,onchange:r=>(a.onchange||t.onchange)((o[e]=r,o))},o[e]],n.range(e))]});
},{"@thi.ng/math/interval":"PBUS","@thi.ng/math/fit":"33rF","@thi.ng/transducers/xform/map":"WUst","@thi.ng/transducers/xform/dedupe":"ryPz","@thi.ng/transducers/iter/range":"GT77","./utils":"01QI"}],"SZZi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkbox=((e,{id:t,onchange:c,attribs:a},i)=>["div",a.container,["input",Object.assign({id:t,type:"checkbox",onchange:e=>c(e.target.checked),checked:i},a.input)],["label",Object.assign({for:t},a.label)]]),exports.create=(e=>(t,c,a)=>[exports.checkbox,{id:c.id||e.id,attribs:c.attribs||e.attribs,onchange:c.onchange||e.onchange},a]);
},{}],"SODI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/hdom-components/button"),t=require("@pngu/ui/panel"),o=require("@pngu/ui/select"),r=require("@pngu/ui/slider"),i=require("@pngu/ui/checkbox"),c=require("../events");exports.uiRoute=(({ui:n,bus:a,views:u})=>{const s=e.button({attribs:n.button}),l=e.button({attribs:n.inlineButton}),d=e.button({attribs:n.cbutton}),h=e=>a.dispatch([c.ev.SET_VALUE,e]),p=e=>a.dispatch([c.ev.SET_CHECKED,e]),b=[[1,"fuck growth"],[2,"hello 100 you"]],m=o.create({attribs:n.inlineSelect}),g=o.create({attribs:n.cselect}),k=r.create({min:0,max:100,step:2,onchange:h,attribs:n.inlineSlider}),v=r.create({min:0,max:100,step:2,onchange:h,attribs:n.cslider}),f=i.create({id:"chk1",onchange:p,attribs:n.inlineCheckbox}),x=i.create({id:"chk2",onchange:p,attribs:n.checkbox});return()=>["div",n.root,["div","Lorem ipsum dolor sit amet,"],["div","Lorem ipsum dolor sit amet,"],["div","a button",[l,{onclick:console.log},"hello 100 you"],"select growth",[m,{},b,1],"slider",[k,{},u.value.deref()]],["div","another button",[l,{onclick:console.log},"hello 100 you"],"select you",[m,{},b,2],"checked",[f,{},u.checked.deref()]],[t.panel,n.panel,["param1",["div",n.container2,[d,{},"fuck"],[d,{},"You"]]],["param2",[d,{},"Fuck"]],["param3",["div",n.container2,[d,{},"cao"],[s,{},"B"]]],["growth",[g,{},b,1]],["param3",[d,{},"caoB"]],["param5",[v,{},u.value.deref()]],["checked",[x,{},u.checked.deref()]],["param3",[d,{},"caoB"]]]]});
},{"@thi.ng/hdom-components/button":"woRN","@pngu/ui/panel":"SDbb","@pngu/ui/select":"n8n5","@pngu/ui/slider":"kuJ2","@pngu/ui/checkbox":"SZZi","../events":"4b/7"}],"BjvI":[function(require,module,exports) {
function e(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var r=!0;document.body.appendChild(e)}var n=e.getBoundingClientRect(),o=getComputedStyle(e),i=(0|n.height)+t(o.getPropertyValue("margin-top"))+t(o.getPropertyValue("margin-bottom")),d=(0|n.width)+t(o.getPropertyValue("margin-left"))+t(o.getPropertyValue("margin-right"));return r&&document.body.removeChild(e),[d,i]}function t(e){return parseFloat(e)||0}module.exports=e;
},{}],"Atir":[function(require,module,exports) {
var e=require("element-size");module.exports=i;var t=new Float32Array(2);function i(i,r,n){var s="SVG"===i.nodeName.toUpperCase();return i.style.position=i.style.position||"absolute",i.style.top=0,i.style.left=0,a.scale=parseFloat(n||1),a.parent=r,a();function a(){var r=a.parent||i.parentNode;if("function"==typeof r)var n=r(t)||t,o=n[0],l=n[1];else if(r&&r!==document.body){var p=e(r);o=0|p[0],l=0|p[1]}else o=window.innerWidth,l=window.innerHeight;return s?(i.setAttribute("width",o*a.scale+"px"),i.setAttribute("height",l*a.scale+"px")):(i.width=o*a.scale,i.height=l*a.scale),i.style.width=o+"px",i.style.height=l+"px",a}}
},{"element-size":"BjvI"}],"s0ZF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=(e,{init:t,update:a,release:s},r)=>{let i,n,o=0,d=0;return{init(s,p,...l){i=s,exports.adaptDPI(i,i.width,i.height),n=i.getContext(e,r),d=Date.now(),t&&t(i,n,p,...l),a&&a(i,n,p,d,o++,...l)},render:(e,...t)=>(n&&a&&a(i,n,e,Date.now()-d,o++,...t),["canvas",t[0]]),release(e,...t){s&&s(i,n,e,...t)}}};exports.canvasWebGL=((t,a)=>e("webgl",t,a)),exports.canvasWebGL2=((t,a)=>e("webgl2",t,a)),exports.canvas2D=((t,a)=>e("2d",t,a)),exports.adaptDPI=((e,t,a)=>{const s=window.devicePixelRatio||1;return 1!=s&&(e.style.width=`${t}px`,e.style.height=`${a}px`),e.width=t*s,e.height=a*s,s});
},{}],"l38o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/errors/illegal-arguments");function r(r,...t){let[s,a,n,u,c,l,o,i]=t;switch(t.length){case 1:return(...e)=>r(s,...e);case 2:return(...e)=>r(s,a,...e);case 3:return(...e)=>r(s,a,n,...e);case 4:return(...e)=>r(s,a,n,u,...e);case 5:return(...e)=>r(s,a,n,u,c,...e);case 6:return(...e)=>r(s,a,n,u,c,l,...e);case 7:return(...e)=>r(s,a,n,u,c,l,o,...e);case 8:return(...e)=>r(s,a,n,u,c,l,o,i,...e);default:e.illegalArgs()}}exports.partial=r,exports.foo=r((e,r)=>e+r,"a");
},{"@thi.ng/errors/illegal-arguments":"uRQP"}],"ivl3":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("twgl.js"),t=e(require("canvas-fit")),a=require("@thi.ng/hdom-components/canvas"),i=require("@thi.ng/compose/partial"),s=require("@pngu/ui/panel"),l=require("@pngu/ui/checkbox"),d=require("@pngu/ui/slider");exports.canvas=((e,{init:i,update:s,release:l})=>{let d;return a.canvasWebGL({init(a,s,l){r.addExtensionsToContext(s),(d=t.default(a))(),e.init(s),i&&i(a,s)},update(r,t,a,i,l,d,n){e.params=n,e.render(i),s&&s(r,t)},release(e,r,t){l&&l(e,r)}})}),exports.controls=((e,r)=>{const t=(e,t,a,s,l)=>({min:e,max:t,step:a,onchange:i.partial(r,s),attribs:l}),a=l.create({id:"removeEdge",onchange:i.partial(r,"removeEdge"),attribs:e.checkbox}),n=d.create(t(0,10,.01,"width",e.slider)),o=d.create(t(0,1,.01,"feather",e.slider)),u=d.create(t(0,1,.01,"squeezeMin",e.slider)),c=d.create(t(0,1,.01,"squeezeMax",e.slider)),h=d.create(t(0,1,.01,"dashOffset",e.slider)),p=d.create(t(0,10,1,"dashRepeat",e.slider)),g=d.create(t(0,1,.01,"dashLength",e.slider)),m=d.multiSlider(4,t(0,1,.01,"ambColor",e.multislider4)),f=d.multiSlider(4,t(0,1,.01,"lightColor",e.multislider4));return(r,t)=>[s.panel,e.panel,["width",[n,{},t.width]],["feather",[o,{},t.feather]],["removeEdge",[a,{},t.removeEdge]],["squeezeMin",[u,{},t.squeezeMin]],["squeezeMax",[c,{},t.squeezeMax]],["dashOffset",[h,{},t.dashOffset]],["dashRepeat",[p,{},t.dashRepeat]],["dashLength",[g,{},t.dashLength]],["colorEdge",[m,{},t.colorEdge]],["colorFill",[f,{},t.colorFill]]]});
},{"twgl.js":"Ubq3","canvas-fit":"Atir","@thi.ng/hdom-components/canvas":"s0ZF","@thi.ng/compose/partial":"l38o","@pngu/ui/panel":"SDbb","@pngu/ui/checkbox":"SZZi","@pngu/ui/slider":"kuJ2"}],"1wgY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/rstream/from/event"),t=require("@thi.ng/transducers/xform/dedupe"),r=require("@thi.ng/math/eqdelta");exports.fromOrientation=((a=.1)=>e.fromEvent(window,"deviceorientation").transform(t.dedupe((e,t)=>r.eqDelta(e.alpha,t.alpha,a)&&r.eqDelta(e.beta,t.beta,a)&&r.eqDelta(e.gamma,t.gamma,a))));
},{"@thi.ng/rstream/from/event":"BKGr","@thi.ng/transducers/xform/dedupe":"ryPz","@thi.ng/math/eqdelta":"SDG2"}],"AjQB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/vectors/vec2"),t=require("@thi.ng/vectors/vec3"),r=require("@thi.ng/vectors/mat44"),s=require("@thi.ng/math/api"),a=require("@thi.ng/transducers/xform/map"),n=require("@thi.ng/transducers/func/comp"),o=require("@thi.ng/transducers/xform/filter"),i=require("gl-matrix");function c(e,r){let s=r[0],a=r[1],n=r[2],o=r[3],i=e[0],c=e[1],u=e[2],m=a*u-n*c,p=n*i-s*u,g=s*c-a*i,l=a*g-n*p,V=n*m-s*g,h=s*p-a*m,w=2*o;return m*=w,p*=w,g*=w,l*=2,V*=2,h*=2,t.setS3(e.buf,i+m+l,c+p+V,u+g+h),e}function u(e,t,r,a){let n=t*s.DEG2RAD,o=r*s.DEG2RAD,i=a*s.DEG2RAD,c=Math.cos(n),u=Math.sin(n),m=Math.cos(o),p=Math.sin(o),g=Math.cos(i),l=Math.sin(i),V=m*g,h=m*l,w=p*g,d=p*l;return e[0]=V+d*u,e[4]=w*u-h,e[8]=c*p,e[1]=c*l,e[5]=c*g,e[9]=-u,e[2]=h*u-w,e[6]=d+V*u,e[10]=c*m,e}const m=(e,t,r,s)=>{e.setS(t[0]-r[0],-(t[1]-r[1]),0).divN(s);const a=e.magSq();return a>1?e.normalize():e.setS(e[0],e[1],Math.sqrt(1-a))};exports.dragCamera=((r,{width:s,height:u,speed:p=5})=>{const g=Math.max(s,u),l=new e.Vec2([s,u]).mulN(.5),V=new t.Vec3,h=new t.Vec3,w=new t.Vec3,d=new t.Vec3,q=new t.Vec3,M=new t.Vec3,x=i.quat.create(),f=new t.Vec3,A=new t.Vec3,v=new t.Vec3;return n.comp(o.filter(e=>0==e[0]||2==e[0]),a.map(({0:e,1:{pos:t}})=>0==e?(m(V,t,l,g),q.set(r.up),M.set(r.position).sub(r.target),{up:q,position:r.position,target:r.target}):(m(h,t,l,g).sub(V),d.set(q).cross(M).normalize().mulN(h[0]),w.set(q).mulN(h[1]).add(d).cross(M).normalize(),i.quat.setAxisAngle(x,w,h.magSq()*p),{up:c(f.set(q),x),position:v.set(r.target).add(c(A.set(M),x)),target:r.target})))}),exports.moveCamera=((r,{width:s,height:u,speed:p=5})=>{const g=Math.max(s,u),l=new e.Vec2([s,u]).mulN(.5),V=new t.Vec3,h=new t.Vec3,w=new t.Vec3,d=r.up.copy(),q=r.position.copy().sub(r.target),M=i.quat.create(),x=new t.Vec3,f=new t.Vec3,A=new t.Vec3;return n.comp(o.filter(e=>1==e[0]),a.map(({1:{pos:e}})=>(m(V,e,l,g).sub(t.Vec3.Z_AXIS),w.set(d).cross(q).normalize().mulN(V[0]),h.set(d).mulN(V[1]).add(w).cross(q).normalize(),i.quat.setAxisAngle(M,h,V.magSq()*p),A.set(r.target).add(c(f.set(q.normalize().mulN(r.pivotDistance)),M)),{up:c(x.set(d),M),position:A,target:r.target})))}),exports.orientCamera=(e=>{const n=new t.Vec3,o=new t.Vec3,i=new t.Vec3,c=r.Mat44.identity(),m=r.Mat44.rotationX(-90*s.DEG2RAD);return a.map(r=>(u(c,r.beta,r.alpha,-r.gamma).mul(m),{up:c.mulV3(n.set(t.Vec3.Y_AXIS)),position:i.set(e.target).add(c.mulV3(o.set(t.Vec3.Z_AXIS)).mulN(e.pivotDistance)),target:e.target}))}),exports.zoomCamera=(e=>{const r=new t.Vec3,s=new t.Vec3;return n.comp(o.filter(e=>4==e[0]),a.map(({1:{zoom:t}})=>{r.set(e.target).sub(e.position);const a=Math.pow(Math.E,.01*t)*r.mag();return s.set(e.target).sub(r.normalize().mulN(a)),{up:e.up,position:s,target:e.target}}))});
},{"@thi.ng/vectors/vec2":"oJI8","@thi.ng/vectors/vec3":"K9zr","@thi.ng/vectors/mat44":"CMHc","@thi.ng/math/api":"zd6y","@thi.ng/transducers/xform/map":"WUst","@thi.ng/transducers/func/comp":"9vBN","@thi.ng/transducers/xform/filter":"AmR+","gl-matrix":"DMY6"}],"uHqn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@thi.ng/rstream-gestures"),r=require("@thi.ng/rstream/stream-merge"),t=require("@pngu/cube/scenes/wire"),i=require("@pngu/cube/components/wire"),a=require("@pngu/core/rstream/from-orientation"),s=require("@pngu/gl/camera-ui"),n=require("./route-link"),o=require("../events");exports.orientRoute=(({bus:u,views:m,ui:c})=>{let p;const g=new t.App,h=i.canvas(g,{init(t){const i=e.gestureStream(t,{absZoom:!1}),n={width:t.width,height:t.height};p=r.merge({src:[i.transform(s.moveCamera(g.camera,n)),a.fromOrientation(.01).transform(s.orientCamera(g.camera)),i.transform(s.zoomCamera(g.camera))]}).subscribe({next({up:e,position:r}){u.dispatch([o.ev.SET_PARAM,["cameraUp",e]]),u.dispatch([o.ev.SET_PARAM,["cameraPos",r]])}}),u.dispatch([o.ev.SET_RAF,!0])},release(){p.unsubscribe(),u.dispatch([o.ev.SET_RAF,!1])}});return()=>{const e=m.params.deref();return["div",c.root,[h,c.ca,e],["div",c.logoBr,[n.routeLink,c.link,"home",{},"pngupngu"]]]}});
},{"@thi.ng/rstream-gestures":"2f/f","@thi.ng/rstream/stream-merge":"nap+","@pngu/cube/scenes/wire":"wFFt","@pngu/cube/components/wire":"ivl3","@pngu/core/rstream/from-orientation":"1wgY","@pngu/gl/camera-ui":"AjQB","./route-link":"wCDR","../events":"4b/7"}],"foLc":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@pngu/ui/styles"),r=require("@pngu/cube/scenes/wire"),n=require("./events"),i=e(require("./routes")),s=require("./components/home"),o=require("./components/uiroute"),l=require("./components/orient-route");exports.CONFIG={router:{useFragment:!0,defaultRouteID:i.HOME.id,routes:[i.HOME,i.UI,i.ORIENT]},events:n.handlers.events,effects:n.handlers.effects,components:{[i.HOME.id]:s.home,[i.UI.id]:o.uiRoute,[i.ORIENT.id]:l.orientRoute},domRoot:"app",initialState:{raf:!1,value:50,checked:!1,params:r.defaultParams},views:{raf:"raf",value:"value",checked:"checked",params:"params"},ui:{root:t.root,logo:{class:"absolute red center-child"},logoBr:{class:"absolute red bottom-1 right-1"},nav:{class:"list ma0 pa0"},link:{class:"pointer link red"},button:t.button,checkbox:t.checkbox,select:t.select,slider:t.slider,inlineButton:t.inlineButton,inlineSelect:t.inlineSelect,inlineSlider:t.inlineSlider,inlineCheckbox:t.inlineCheckbox,panel:t.addClass(t.panel,"w5","container"),container2:{class:"dg gtc2"},cbutton:t.addClass(t.button,"db mr-2 ctrl"),cselect:t.addClass(t.select,"mr-2 ctrl","container"),cslider:t.addClass(t.slider,"mr-2 ctrl","container")}};
},{"@pngu/ui/styles":"Hjqe","@pngu/cube/scenes/wire":"wFFt","./events":"4b/7","./routes":"llWI","./components/home":"I/SW","./components/uiroute":"SODI","./components/orient-route":"uHqn"}],"9B6d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./app"),r=require("./config");new e.App(r.CONFIG).start();
},{"./app":"+YSF","./config":"foLc"}]},{},["9B6d"], null)