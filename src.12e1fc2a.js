parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function aa(a){return a&&a.__esModule?{d:a.default}:{d:a}}var ia={};const xd="*";const T=Symbol();const Nd=()=>{};var Ud={};const c=void 0===Ud?(r,o="assertion failed")=>{if("function"==typeof r&&!r()||!r)throw new Error(o)}:Nd;const xc=(e,t={})=>{const r=Reflect.ownKeys(e),o=Reflect.ownKeys(t),n=Symbol("isa");function p(t){for(let o of r){const r=Object.getOwnPropertyDescriptor(t.prototype,o);!r||r.configurable?Object.defineProperty(t.prototype,o,{value:e[o],writable:!0}):console.log(`not patching: ${t.name}.${o.toString()}`)}return Object.defineProperty(t.prototype,n,{value:!0}),t}for(let i of o)Object.defineProperty(p,i,{value:t[i],enumerable:t.propertyIsEnumerable(i)});return Object.defineProperty(p,Symbol.hasInstance,{value:e=>!!e[n]}),p};class Vd extends Error{constructor(r){super("illegal argument(s)"+(void 0!==r?": "+r:""))}}const ca=r=>{throw new Vd(r)};class le extends Error{constructor(r){super(`illegal arity: ${r}`)}}const R=r=>{throw new le(r)};class ne extends Error{constructor(t){super("illegal state"+(void 0!==t?": "+t:""))}}const Ab=t=>{throw new ne(t)};class qe extends Error{constructor(r){super("unsupported operation"+(void 0!==r?": "+r:""))}}const Pb=r=>{throw new qe(r)};const Sb=(t,i)=>{if(t)for(let e,r=0,s=t.length;r<s;r++)if((e=t[r])[0].call(e[1],i),i.canceled)return};const re=xc({addListener(t,i,e){let r=(this._listeners=this._listeners||{})[t];return r||(r=this._listeners[t]=[]),-1===this.__listener(r,i,e)&&(r.push([i,e]),!0)},removeListener(t,i,e){if(!this._listeners)return!1;const r=this._listeners[t];if(r){const t=this.__listener(r,i,e);if(-1!==t)return r.splice(t,1),!0}return!1},notify(t){this._listeners&&(void 0===t.target&&(t.target=this),Sb(this._listeners[t.id],t),Sb(this._listeners[xd],t))},__listener(t,i,e){let r=t.length;for(;--r>=0;){const s=t[r];if(s[0]===i&&s[1]===e)break}return r}});const se=xc({addWatch(t,h){return this._watches=this._watches||{},!this._watches[t]&&(this._watches[t]=h,!0)},removeWatch(t){if(this._watches)return!!this._watches[t]&&(delete this._watches[t],!0)},notifyWatches(t,h){if(!this._watches)return;const e=this._watches;for(let i in e)e[i](i,t,h)}});const da=o=>"function"==typeof o;const z=(n,t)=>null!=n&&"function"==typeof n[t];const o=Array.isArray;const Be=r=>null!=r&&"function"!=typeof r&&void 0!==r.length;const Ce=e=>null!=e&&"function"==typeof e[Symbol.iterator];const Gb=t=>null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator];const u=t=>"number"==typeof t;const Ob=Object.getPrototypeOf,I=e=>{let $;return null!=e&&"object"==typeof e&&(null===($=Ob(e))||null===Ob($))};const He=e=>e instanceof Promise;const N=s=>"string"==typeof s;const bc=Array.isArray,Je=N,i=t=>bc(t)?t.slice():Object.assign({},t),Ne=(t,$)=>(e,r)=>(e=i(e),e[t]=$?$(e[t],r):r,e),Oe=(t,$)=>e=>e?$(e[t]):void 0,db=t=>bc(t)?t:Je(t)?t.length>0?t.split("."):[]:null!=t?[t]:[];const hb=t=>{const $=db(t);let[e,r,a,o]=$;switch($.length){case 0:return t=>t;case 1:return t=>t?t[e]:void 0;case 2:return t=>t&&(t=t[e])?t[r]:void 0;case 3:return t=>t&&(t=t[e])&&(t=t[r])?t[a]:void 0;case 4:return t=>t&&(t=t[e])&&(t=t[r])&&(t=t[a])?t[o]:void 0;default:const t=$[$.length-1];let n=$=>$?$[t]:void 0;for(let e=$.length-1;--e>=0;)n=Oe($[e],n);return n;}};const cb=t=>{const $=db(t);let[e,r,a,o]=$;switch($.length){case 0:return(t,$)=>$;case 1:return(t,$)=>(t=i(t),t[e]=$,t);case 2:return(t,$)=>{let a;return(t=i(t))[e]=a=i(t[e]),a[r]=$,t};case 3:return(t,$)=>{let o,n;return(t=i(t))[e]=o=i(t[e]),o[r]=n=i(o[r]),n[a]=$,t};case 4:return(t,$)=>{let n,f,s;return(t=i(t))[e]=n=i(t[e]),n[r]=f=i(n[r]),f[a]=s=i(f[a]),s[o]=$,t};default:let t;for(let e=$.length;--e>=0;)t=Ne($[e],t);return t;}};const pb=(t,$,e)=>cb($)(t,e);const bb=(t,$,e,...r)=>cb($)(t,e.apply(null,(r.unshift(hb($)(t)),r)));const yb=Object.getPrototypeOf({}),j=(e,t)=>{let $;return e===t||(null==e?e==t:"function"==typeof e.equiv?e.equiv(t):null==t?e==t:"function"==typeof t.equiv?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(null!=($=Object.getPrototypeOf(e))&&$!==yb||null!=($=Object.getPrototypeOf(t))&&$!==yb?"function"!=typeof e&&void 0!==e.length&&"function"!=typeof t&&void 0!==t.length?Bb(e,t):e instanceof Set&&t instanceof Set?Db(e,t):e instanceof Map&&t instanceof Map?Eb(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:Fb(e,t)))};const Bb=(e,t,$=j)=>{let o=e.length;if(o===t.length)for(;--o>=0&&$(e[o],t[o]););return o<0};const Db=(e,t,$=j)=>e.size===t.size&&$([...e.keys()].sort(),[...t.keys()].sort());const Eb=(e,t,$=j)=>e.size===t.size&&$([...e].sort(),[...t].sort());const Fb=(e,t,$=j)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let o in e)if(!t.hasOwnProperty(o)||!$(e[o],t[o]))return!1;return!0};let Xe=0;const Ye=()=>Xe++;class Ze{constructor(t,i,s,e=!0,r=j){this.parent=t,this.id=`view-${Ye()}`,this.tx=s||(t=>t),this.path=db(i),this.isDirty=!0,this.isLazy=e;const h=hb(this.path),$=this.parent.deref();this.unprocessed=$?h($):void 0,e||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),t.addWatch(this.id,(t,i,s)=>{const $=i?h(i):i,a=s?h(s):s;r(a,$)||(e?this.unprocessed=a:this.state=this.tx(a),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}var $e=ia&&ia.__decorate||function(e,t,r,i){var $,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var k=e.length-1;k>=0;k--)($=e[k])&&(s=(a<3?$(s):a>3?$(t,r,s):$(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};let K=class{constructor(e,t){t&&!t(e)&&Ab("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(pb(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(bb(this._value,e,t,...r))}addWatch(e,t){return!1}removeWatch(e){return!1}notifyWatches(e,t){}addView(e,t,r=!0){return new Ze(this,e,t,r)}release(){return delete this._watches,delete this._value,!0}};K=$e([se],K),ia.Atom=K,ia.Atom=K;let ab,_a;let bf=[],df=[];const ef=$=>ab&&ab.length>=$?ab:ab=new Int32Array($),jf=$=>_a&&_a.length>=$?_a:_a=new Int32Array($),cc=($,e,s,a,r)=>{const t=e.length,c=$.linear;if($.distance=t,0!==r){for(let $=0,s=0;$<t;$++,s+=3)c[s]=a,c[s+1]=$,c[s+2]=e[$];if(2===r){const a=$[s];for(let $=0;$<t;$++)a[$]=e[$]}}return $},of=($,e,s=2,a=j)=>{const r={distance:0,adds:{},dels:{},const:{},linear:[]};if($===e||null==$&&null==e)return r;if(null==$||0===$.length)return cc(r,e,"adds",1,s);if(null==e||0===e.length)return cc(r,$,"dels",-1,s);const t=$.length>=e.length;let c,l,n,h;t?(c=e,l=$):(c=$,l=e),n=c.length,h=l.length;const d=n+1,o=h-n,i=o+d,q=n+h+3,O=jf(q).fill(-1,0,q),f=ef(q).fill(-1,0,q),v=bf,u=df;v.length=0,u.length=0;const P=($,e,s)=>{const r=$+d;let t,o;e>s?(t=O[r-1],o=e):(t=O[r+1],o=s);let i=o-$;for(;i<n&&o<h&&a(c[i],l[o]);)i++,o++;return O[r]=u.length/3,u.push(i,o,t),o};let g,p,_=-1;do{for(p=(g=-++_)+d;g<o;g++,p++)f[p]=P(g,f[p-1]+1,f[p+1]);for(p=(g=o+_)+d;g>o;g--,p--)f[p]=P(g,f[p-1]+1,f[p+1]);f[i]=P(o,f[i-1]+1,f[i+1])}while(f[i]!==h);if(r.distance=o+2*_,0!==s){for(_=3*O[i];_>=0;)v.push(_),_=3*u[_+2];2===s?pf(v,u,r,c,l,t):zf(v,u,r,c,l,t)}return r};const pf=($,e,s,a,r,t)=>{const c=s.linear,l=s.const;let n,h,d,o,i=$.length,q=0,O=0;for(t?(n=s.dels,h=s.adds,d=-1,o=1):(n=s.adds,h=s.dels,d=1,o=-1);--i>=0;){const s=$[i],t=e[s],f=e[s+1],v=f-t;for(;q<t||O<f;){const $=O-q;v>$?(c.push(d,O,n[O]=r[O]),O++):v<$?(c.push(o,q,h[q]=a[q]),q++):(c.push(0,q,l[q]=a[q]),q++,O++)}}},zf=($,e,s,a,r,t)=>{const c=s.linear,l=t?-1:1,n=t?1:-1;let h=$.length,d=0,o=0;for(;--h>=0;){const s=$[h],t=e[s],i=e[s+1],q=i-t;for(;d<t||o<i;){const $=o-d;q>$?(c.push(l,o,r[o]),o++):q<$?(c.push(n,d,a[d]),d++):(c.push(0,d,a[d]),d++,o++)}}};const Af=(t,e,n=2,$=j)=>t===e?{distance:0}:0===n?Cf(t,e,$):Lf(t,e,$);const Cf=(t,e,n)=>{let $=0;for(let i in t){const r=e[i];(void 0===r||!n(t[i],r))&&$++}for(let i in e)!(i in t)&&$++;return{distance:$}},Lf=(t,e,n)=>{let $=0;const i=[],r=[],a=[];for(let f in t){const i=e[f];void 0===i?(r.push(f),$++):n(t[f],i)||(a.push(f,i),$++)}for(let f in e)f in t||(i.push(f),$++);return{distance:$,adds:i,dels:r,edits:a}};const za=Array.isArray,Qf=Math.max,Cc=(()=>{const $=new Array(2048);for(let r=2,n=$.length;r<n;r++)$[r]=r-2;return $})(),pg=$=>{if($<=Cc.length)return Cc.slice(0,$);const r=new Array($);for(;--$>=2;)r[$]=$-2;return r},ib=($,r,n,t,a,H=0)=>{const e=a[1];if(e.__skip)return;if(!1===e.__diff)return V(t),void r.replaceChild($,n,H,a);let _=e.__impl;if(_&&_!==r)return _.diffTree($,_,n,t,a,H);const o=of(t,a,1,U);if(0===o.distance)return;const g=o.linear,A=r.getChild(n,H);let p,T,b,c,O,E,h,x;if(0!==g[0]||t[1].key!==e.key)return V(t),void r.replaceChild($,n,H,a);if((x=t.__release)&&x!==a.__release&&V(t),0!==g[3]&&(og(r,A,t[1],a[1]),2===o.distance))return;const P=g.length,S=t.length-1,d=mg(g),i=pg(S+1);for(p=2,T=6;T<P;p++,T+=3)if(-1===(h=g[T])){if(x=g[T+2],za(x)){if(void 0!==(O=x[1].key)&&void 0!==d[O][2])O=(E=d[O])[0],ib($,r,A,t[O],a[E[2]],i[O]);else for(c=g[T+1],V(x),r.removeChild(A,i[c]),b=S;b>=c;b--)i[b]=Qf(i[b]-1,0);}else"string"==typeof x&&r.setContent(A,"");}else if(1===h)if("string"==typeof(x=g[T+2]))r.setContent(A,x);else if(za(x)&&(void 0===(O=x[1].key)||void 0===d[O][0]))for(c=g[T+1],r.createTree($,A,x,i[c]),b=S;b>=c;b--)i[b]++;(x=a.__init)&&x!=t.__init&&x.apply(a,[A,...a.__args])};const og=($,r,n,t)=>{const a=Af(n,t,2,j);$.removeAttribs(r,a.dels,n);let H,e,_,o=T;for(H=(_=a.edits).length;(H-=2)>=0;){const a=_[H];0===a.indexOf("on")&&$.removeAttribs(r,[a],n),"value"!==a?$.setAttrib(r,a,_[H+1],t):o=_[H+1]}for(H=(_=a.adds).length;--H>=0;)"value"!==(e=_[H])?$.setAttrib(r,e,t[e],t):o=t[e];o!==T&&$.setAttrib(r,"value",o,t)};const V=$=>{if(za($)){let r;if((r=$[1])&&!1===r.__release)return;for($.__release&&($.__release.apply($.__this,$.__args),delete $.__release),r=$.length;--r>=2;)V($[r])}};const mg=$=>{let r,n,t;const a={};for(let H=$.length;(H-=3)>=0;)n=$[H+2],za(n)&&void 0!==(r=n[1].key)&&(!(t=a[r])&&(a[r]=t=[,,]),t[$[H]+1]=$[H+1]);return a},nb=Object.getPrototypeOf({}),U=($,r)=>{let n;return $===r||(null==$?$==r:"function"==typeof $.equiv?$.equiv(r):null==r?$==r:"function"==typeof r.equiv?r.equiv($):"string"!=typeof $&&"string"!=typeof r&&(null!=(n=Object.getPrototypeOf($))&&n!==nb||null!=(n=Object.getPrototypeOf(r))&&n!==nb?"function"!=typeof $&&void 0!==$.length&&"function"!=typeof r&&void 0!==r.length?Bb($,r,U):$ instanceof Set&&r instanceof Set?Db($,r,U):$ instanceof Map&&r instanceof Map?Eb($,r,U):$ instanceof Date&&r instanceof Date?$.getTime()===r.getTime():$ instanceof RegExp&&r instanceof RegExp?$.toString()===r.toString():$!=$&&r!=r:!(!1===$.__diff||!1===r.__diff)&&Fb($,r,U)))};const lg="http://www.w3.org/2000/svg";const kg=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;const gg="animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view".split(" ").reduce((e,o)=>(e[o]=1,e),{});const tg="area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr ?xml".split(" ").reduce((e,o)=>(e[o]=1,e),{});const Uf={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&apos;"};const Tf={button:1,option:1,text:1,textarea:1};const ug=new RegExp(`[${Object.keys(Uf)}]`,"g");const Of=$=>{let n,r="";for(let e in $)n=$[e],da(n)&&(n=n($)),null!=n&&(r+=`${e}:${n};`);return r};const Kf=(e,t)=>{if(null==e||!t||!t.length)return e;const r=Object.assign({},e);for(let n of t){const e=r[n];z(e,"deref")&&(r[n]=e.deref())}return r};const ra=o,Hb=Gb,sa=(e,t,r,$,s)=>{if(ra($)){const o=$[0];if("function"==typeof o)return sa(e,t,r,o.apply(null,[e.ctx,...$.slice(1)]),s);const n=$[1];if(n.__impl)return n.__impl.createTree(e,r,$,s);const c=t.createElement(r,o,n,s);if($.length>2){const r=$.length;for(let s=2;s<r;s++)sa(e,t,c,$[s])}return $.__init&&$.__init.apply($.__this,[c,...$.__args]),c}if(Hb($)){const s=[];for(let o of $)s.push(sa(e,t,r,o));return s}return null==$?r:t.createTextElement(r,$)};const ta=(e,t,r,$,s=0)=>{if(ra($)){const o=t.getChild(r,s);"function"==typeof $[0]&&ta(e,t,r,$[0].apply(null,[e.ctx,...$.slice(1)]),s);const n=$[1];if(n.__impl)return n.__impl.hydrateTree(e,r,$,s);$.__init&&$.__init.apply($.__this,[o,...$.__args]);for(let e in n)0===e.indexOf("on")&&t.setAttrib(o,e,n[e]);for(let r=$.length,s=2;s<r;s++)ta(e,t,o,$[s],s-2)}else if(Hb($))for(let o of $)ta(e,t,r,o,s),s++};const Jf=(e,t,r,$)=>{const s=gg[t]?document.createElementNS(lg,t):document.createElement(t);return e&&(null==$?e.appendChild(s):e.insertBefore(s,e.children[$])),r&&hf(s,r),s};const Ef=(e,t,r)=>{const $=document.createTextNode(t);return e&&(void 0===r?e.appendChild($):e.insertBefore($,e.children[r])),$};const Df=(e,t)=>e.children[t];const yf=(e,t,r,$,s)=>(t.removeChild(r,$),t.createTree(e,r,s,$));const qf=(e,t)=>e.textContent=t;const hf=(e,t)=>{for(let r in t)Ub(e,r,t[r],t);return e};const Ub=(e,t,r,$)=>{if(t.startsWith("__"))return;const s=0===t.indexOf("on");if(s||"function"!=typeof r||(r=r($)),void 0!==r&&!1!==r)switch(t){case"style":Ve(e,r);break;case"value":_e(e,r);break;case"id":case"checked":case"scrollTop":case"scrollLeft":e[t]=r;break;default:s?Ue(e,t.substr(2),r):e.setAttribute(t,r);}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e};const _e=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if(void 0!==(r=e.value)&&"string"==typeof t){const $=t.length-(r.length-e.selectionStart);e.value=t,e.selectionStart=e.selectionEnd=$;break}default:e.value=t;}};const We=(e,t,r)=>{for(let $=t.length;--$>=0;){const s=t[$];0===s.indexOf("on")?Te(e,s.substr(2),r[s]):e[s]?e[s]=null:e.removeAttribute(s)}};const Ve=(e,t)=>(e.setAttribute("style",Of(t)),e);const Ue=(e,t,r)=>{ra(r)?e.addEventListener(t,...r):e.addEventListener(t,r)};const Te=(e,t,r)=>{ra(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r)};const Se=(e,t)=>{const r=e.children[t];void 0!==r&&e.removeChild(r)};const fa=o,Re=Gb,Qe=I,Me=(e,r)=>{let $,i,n,t,o=e[0],a=Qe(e[1]);return"string"==typeof o&&($=kg.exec(o))||ca(`${o} is not a valid tag name`),o!==$[1]||!a||r&&!e[1].key?(t=a?Object.assign({},e[1]):{},i=$[2],n=$[3],i&&(t.id=i),n&&(n=n.replace(/\./g," "),t.class?t.class+=" "+n:t.class=n),t.__skip&&e.length<3?[$[1],t,""]:[$[1],t,...e.slice(a?2:1)]):e};const Le=(e,r)=>w(r,e,e.ctx,[0],!1!==e.keys,!1!==e.span);const w=(e,r,$,i,n,t)=>{if(null!=e){if(fa(e)){if(0===e.length)return;let o,a,p=e[1];if(p&&(a=p.__impl)&&(a=a.normalizeTree))return a(r,e);const l=e[0];if("function"==typeof l)return w(l.apply(null,[$,...e.slice(1)]),r,$,i,n,t);if("function"==typeof l.render){const a=[$,...e.slice(1)];return o=w(l.render.apply(l,a),r,$,i,n,t),fa(o)&&(o.__this=l,o.__init=l.init,o.__release=l.release,o.__args=a),o}if(!1===(p=(o=Me(e,n))[1]).__normalize)return o;if(n&&void 0===p.key&&(p.key=i.join("-")),o.length>2){const e=o[0],a=[e,p];t=t&&!Tf[e];for(let p=2,l=2,s=0,X=o.length;p<X;p++){let e=o[p];if(null!=e){const o=fa(e);if(o&&fa(e[0])||!o&&Re(e))for(let p of e)void 0!==(p=w(p,r,$,i.concat(s),n,t))&&(a[l++]=p),s++;else void 0!==(e=w(e,r,$,i.concat(s),n,t))&&(a[l++]=e),s++}}return a}return o}return"function"==typeof e?w(e($),r,$,i,n,t):"function"==typeof e.toHiccup?w(e.toHiccup(r.ctx),r,$,i,n,t):"function"==typeof e.deref?w(e.deref(),r,$,i,n,t):t?["span",n?{key:i.join("-")}:{},e.toString()]:e.toString()}};const Ke={createTree(e,t,r,$){return sa(e,this,t,r,$)},hydrateTree(e,t,r,$){return ta(e,this,t,r,$)},diffTree(e,t,r,$,a){ib(e,this,t,r,$,a)},normalizeTree:Le,getElementById:e=>document.getElementById(e),getChild:Df,createElement:Jf,createTextElement:Ef,replaceChild(e,t,r,$){yf(e,this,t,r,$)},removeChild:Se,setContent:qf,removeAttribs:We,setAttrib:Ub};const Ge=(e,o)=>N(e)?o.getElementById(e):e;const Fe=(r,e={},t=Ke)=>{const $=Object.assign({root:"app"},e);let o=[],a=!0;const m=Ge($.root,t),i=()=>{if(a){$.ctx=Kf(e.ctx,$.autoDerefKeys);const s=t.normalizeTree($,r);null!=s&&($.hydrate?(t.hydrateTree($,m,s),$.hydrate=!1):t.diffTree($,m,o,s),o=s),a&&requestAnimationFrame(i)}};return requestAnimationFrame(i),()=>a=!1};const Ee="--set-value";const De="--update-value";const ze="--toggle-value";const we="--cancel";const ve="--dispatch";const ue="--dispatch-async";const pe="--dispatch-now";const oe="--delay";const me="--fetch";const kb="--state";const ke="--redo";const je="--undo";const Ga=we,ob=pe,n=kb;class ie{constructor(t,e){this.handlers={},this.effects={},this.eventQueue=[],this.priorities=[],this.addBuiltIns(),t&&this.addHandlers(t),e&&this.addEffects(e)}addBuiltIns(){this.addEffects({[ve]:[t=>this.dispatch(t),-999],[ue]:[([t,e,r,s])=>{const i=this.effects[t];if(i){const t=i(e,this);He(t)?t.then(t=>this.dispatch([r,t])).catch(t=>this.dispatch([s,t])):console.warn("async effect did not return Promise")}else console.warn(`skipping invalid async effect: ${t}`)},-999],[oe]:[([t,e])=>new Promise(r=>setTimeout(()=>r(e),t)),1e3],[me]:[t=>fetch(t).then(t=>{if(!t.ok)throw new Error(t.statusText);return t}),1e3]})}addHandler(t,e){const r=o(e)?e.map(sb):da(e)?[{pre:e}]:[e];r.length>0?(this.handlers[t]&&(this.removeHandler(t),console.warn(`overriding handler for ID: ${t}`)),this.handlers[t]=r):ca(`no handlers in spec for ID: ${t}`)}addHandlers(t){for(let e in t)this.addHandler(e,t[e])}addEffect(t,e,r=1){this.effects[t]&&(this.removeEffect(t),console.warn(`overriding effect for ID: ${t}`)),this.effects[t]=e;const s=[t,r],i=this.priorities;for(let $=0;$<i.length;$++)if(s[1]<i[$][1])return void i.splice($,0,s);i.push(s)}addEffects(t){for(let e in t){const r=t[e];o(r)?this.addEffect(e,r[0],r[1]):this.addEffect(e,r)}}instrumentWith(t,e){const r=t.map(sb),s=this.handlers;for(let i of e||Object.keys(s)){const t=s[i];t&&(s[i]=r.concat(t))}}removeHandler(t){delete this.handlers[t]}removeHandlers(t){for(let e of t)this.removeHandler(e)}removeEffect(t){delete this.effects[t];const e=this.priorities;for(let r=e.length-1;r>=0;r--)if(t===e[r][0])return void e.splice(r,1)}removeEffects(t){for(let e of t)this.removeEffect(e)}context(){return this.currCtx}dispatch(...t){this.eventQueue.push(...t)}dispatchNow(...t){(this.currQueue||this.eventQueue).push(...t)}dispatchLater(t,e=17){setTimeout(()=>this.dispatch(t),e)}processQueue(t){if(this.eventQueue.length>0){this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=t||{};for(let e of this.currQueue)this.processEvent(t,e);return this.currQueue=this.currCtx=void 0,this.processEffects(t),!0}return!1}processEvent(t,e){const r=this.handlers[e[0]];if(!r)return void console.warn(`missing handler for event type: ${e[0].toString()}`);const s=r.length-1;let i=!1;for(let $=0;$<=s&&!t[Ga];$++){const s=r[$];s.pre&&this.mergeEffects(t,s.pre(t[n],e,this,t)),i=i||!!s.post}if(i)for(let $=s;$>=0&&!t[Ga];$--){const s=r[$];s.post&&this.mergeEffects(t,s.post(t[n],e,this,t))}}processEffects(t){const e=this.effects;for(let r of this.priorities){const s=r[0],i=t[s];if(void 0!==i){const r=e[s];if(s!==n)for(let e of i)r(e,this,t);else r(i,this,t)}}}mergeEffects(t,e){if(e)for(let r in e){const s=e[r];if(null!=s)if(r===n||r===Ga)t[r]=s;else if(r===ob){if(o(s[0]))for(let t of s)t&&this.dispatchNow(t);else this.dispatchNow(s);}else if(t[r]||(t[r]=[]),o(s[0]))for(let e of s)void 0!==e&&t[r].push(e);else t[r].push(s)}}}class he extends ie{constructor(t,e,r){super(e,r),this.state=t||new K({})}deref(){return this.state.deref()}addBuiltIns(){super.addBuiltIns(),this.addHandlers({[Ee]:(t,[e,[r,s]])=>({[n]:pb(t,r,s)}),[De]:(t,[e,[r,s,...i]])=>({[n]:bb(t,r,s,...i)}),[ze]:(t,[e,r])=>({[n]:bb(t,r,t=>!t)}),[je]:tb("undo"),[ke]:tb("redo")}),this.addEffects({[n]:[t=>this.state.reset(t),-1e3]})}processQueue(t){if(this.eventQueue.length>0){const e=this.state.deref();this.currQueue=[...this.eventQueue],this.eventQueue.length=0,t=this.currCtx=Object.assign({},t,{[n]:e});for(let r of this.currQueue)this.processEvent(t,r);return this.currQueue=this.currCtx=void 0,this.processEffects(t),this.state.deref()!==e}return!1}}const sb=t=>da(t)?{pre:t}:t,tb=t=>(e,[r,s],i,$)=>{let h=s?s[0]:"history";if(z($[h],t)){const e=$[h][t]();return{[n]:i.state.deref(),[ob]:s?void 0!==e?s[1]:s[2]:void 0}}console.warn("no history in context")};const ub=(e,$)=>{const t=cb(e);return(e,[r,o])=>({[kb]:t(e,$?$(o):o)})};const Y="route-changed";var wa={};var ge=wa&&wa.__decorate||function(t,e,r,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(s=(a<3?o(s):a>3?o(e,r,s):o(e,r))||s);return a>3&&s&&Object.defineProperty(e,r,s),s};let xa=class{constructor(t){t.authenticator=t.authenticator||((t,e,r)=>({id:t.id,title:t.title,params:r})),t.prefix=void 0===t.prefix?"/":t.prefix,t.separator=t.separator||"/",this.config=t}addListener(t,e,r){return!1}removeListener(t,e,r){return!1}notify(t){}start(){if(this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.current={id:t.id,title:t.title,params:{}},this.notify({id:Y,value:this.current})}}route(t){"#"===t.charAt(0)&&(t=t.substr(1)),t=t.substr(this.config.prefix.length);const e=this.config.routes,r=t.split(this.config.separator);let i;for(let o=0,a=e.length;o<a;o++){const t=e[o],a=this.matchRoute(r,t);if(a){i=a;break}}if(!i){if(!this.handleRouteFailure())return;const t=this.routeForID(this.config.defaultRouteID);i={id:t.id,title:t.title,params:{}}}return j(i,this.current)||(this.current=i,this.notify({id:Y,value:i})),i}format(...t){let e,[r,i,o]=t;switch(t.length){case 3:e={id:r,params:i};break;case 2:N(r)?e={id:r,params:i}:(o=i,e=r);break;case 1:e=N(r)?{id:r}:r;break;default:R(t.length);}const a=this.routeForID(e.id);if(a){const t=e.params||{};return(o?"#":"")+this.config.prefix+a.match.map(e=>"?"===e.charAt(0)?null!=(e=t[e.substr(1)])?e:"NULL":e).join(this.config.separator)}ca(`invalid route ID: ${e.id.toString()}`)}routeForID(t){return this.config.routes.find(e=>e.id===t)}matchRoute(t,e){const r=e.match,i=r.length;if(t.length===i){const o={};for(let e=0;e<i;e++){const i=r[e];if("?"===i.charAt(0))o[i.substr(1)]=t[e];else if(t[e]!==i)return}if(e.validate&&!this.validateRouteParams(o,e.validate))return;return e.auth?this.config.authenticator(e,t,o):{id:e.id,title:e.title,params:o}}}validateRouteParams(t,e){for(let r in e)if(void 0!==t[r]){const i=e[r];if(i.coerce&&(t[r]=i.coerce(t[r])),i.check&&!i.check(t[r]))return!1}return!0}handleRouteFailure(){return!0}};xa=ge([re],xa),wa.BasicRouter=xa,wa.BasicRouter=xa;class fe extends xa{constructor(t){super(t),this.useFragment=!1!==t.useFragment}start(){if(window.addEventListener("popstate",this.handlePopChange()),this.useFragment&&window.addEventListener("hashchange",this.handleHashChange()),this.config.initialRouteID){const t=this.routeForID(this.config.initialRouteID);this.route(this.format({id:t.id,title:t.title}))}else this.route(this.useFragment?location.hash:location.pathname)}release(){window.removeEventListener("popstate",this.popHandler),this.useFragment&&window.removeEventListener("hashchange",this.hashHandler)}route(t,e=!0){const i=this.current,r=super.route(t);return j(r,i)||(this.currentPath=this.format(r),e&&history.pushState(this.currentPath,r.title||window.document.title||"",this.currentPath)),r}routeTo(t){this.useFragment&&(location.hash=t),this.route(t)}format(...t){let e;switch(t.length){case 2:e={id:t[0],params:t[1]};break;case 1:e=N(t[0])?{id:t[0]}:t[0];break;default:R(t.length);}return super.format(e,this.useFragment)}handlePopChange(){return this.popHandler=this.popHandler||(t=>{this.route(t.state||(this.useFragment?location.hash:location.pathname),!1)}).bind(this)}handleHashChange(){return this.hashHandler=this.hashHandler||(t=>{if(!this.ignoreHashChange){const e=t.newURL.substr(t.newURL.indexOf("#"));e!==this.currentPath&&this.route(e,!1)}}).bind(this)}handleRouteFailure(){return this.ignoreHashChange=!0,location.hash=this.format({id:this.routeForID(this.config.defaultRouteID).id}),this.ignoreHashChange=!1,!0}}var ya={};ya.JSON="load-json";ya.ROUTE_TO="route-to";var G={};G.ROUTE_TO="route-to";G.BG_ACTIVE="bg-active";function ee(e,{init:$,update:r,release:a}){let t;return Qd({init(r,a,n){var $Atir$$interop$default=aa(Td);h.addExtensionsToContext(a),(t=$Atir$$interop$default.d(r))(),e.init(a),$&&$(r,a)},update($,a,t,n,i,s,o){e.params=o,e.render(n,i),r&&r($,a)},release(e,$,r){a&&a(e,$)}})}var Fa,h={};!function(r,e){if("object"==typeof h)h=e();else if("function"==typeof Fa&&Fa.amd)Fa([],e);else if("object"==typeof h){var t=e();h.twgl=t}else r.twgl=e()}("undefined"!=typeof self?self:h,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)t.d(n,o,function(e){return r[e]}.bind(null,o));return n},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s="./src/twgl-full.js")}({"./src/attributes.js":function(r,e,t){e.__esModule=!0,e.createAttribsFromArrays=s,e.createBuffersFromArrays=function(r,e){var t={};Object.keys(e).forEach(function(n){t[n]=A(r,e[n],n)}),e.indices?(t.numElements=e.indices.length,t.elementType=n.getGLTypeForTypedArray(p(e.indices),"indices")):t.numElements=function(r){var e,t;for(t=0;t<_.length&&!((e=_[t])in r);++t);t===_.length&&(e=Object.keys(r)[0]);var n=r[e],o=v(n).length,a=y(n,e),u=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return u}(e);return t},e.createBufferFromArray=A,e.createBufferFromTypedArray=c,e.createBufferInfoFromArrays=function(r,e,t){var o=s(r,e),a=Object.assign({},t||{});a.attribs=Object.assign({},t?t.attribs:{},o);var f=e.indices;if(f){var i=p(f,"indices");a.indices=c(r,i,r.ELEMENT_ARRAY_BUFFER),a.numElements=i.length,a.elementType=n.getGLTypeForTypedArray(i)}else a.numElements||(a.numElements=function(r,e){var t,n;for(n=0;n<_.length&&!((t=_[n])in e)&&!((t=u.attribPrefix+t)in e);++n);n===_.length&&(t=Object.keys(e)[0]);var o=e[t];r.bindBuffer(r.ARRAY_BUFFER,o.buffer);var a=r.getBufferParameter(r.ARRAY_BUFFER,r.BUFFER_SIZE);r.bindBuffer(r.ARRAY_BUFFER,null);var f=function(r,e){return e===r.BYTE?1:e===r.UNSIGNED_BYTE?1:e===r.SHORT?2:e===r.UNSIGNED_SHORT?2:e===r.INT?4:e===r.UNSIGNED_INT?4:e===r.FLOAT?4:0}(r,o.type),c=a/f,i=o.numComponents||o.size,v=c/i;if(v%1!=0)throw"numComponents "+i+" not correct for length "+length;return v}(r,a.attribs));return a},e.setAttribInfoBufferFromArray=function(r,e,t,n){t=p(t),void 0!==n?(r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.bufferSubData(r.ARRAY_BUFFER,n,t)):f(r,r.ARRAY_BUFFER,e.buffer,t,e.drawType)},e.setAttributePrefix=function(r){u.attribPrefix=r},e.setAttributeDefaults_=function(r){o.copyExistingProperties(r,u)},e.getNumComponents_=y,e.getArray_=v;var n=a(t("./src/typedarrays.js")),o=a(t("./src/helper.js"));function a(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}var u={attribPrefix:""};function f(r,e,t,n,o){r.bindBuffer(e,t),r.bufferData(e,n,o||r.STATIC_DRAW)}function c(r,e,t,n){if(o.isBuffer(r,e))return e;t=t||r.ARRAY_BUFFER;var a=r.createBuffer();return f(r,t,a,e,n),a}function i(r){return"indices"===r}function v(r){return r.length?r:r.data}var b=/coord|texture/i,l=/color|colour/i;function E(r,e){var t;if(e%(t=b.test(r)?2:l.test(r)?4:3)>0)throw"Can not guess numComponents for attribute '"+r+"'. Tried "+t+" but "+e+" values is not evenly divisible by "+t+". You should specify it.";return t}function y(r,e){return r.numComponents||r.size||E(e,v(r).length)}function p(r,e){if(n.isArrayBuffer(r))return r;if(n.isArrayBuffer(r.data))return r.data;Array.isArray(r)&&(r={data:r});var t=r.type;return t||(t=i(e)?Uint16Array:Float32Array),new t(r.data)}function s(r,e){var t={};return Object.keys(e).forEach(function(o){if(!i(o)){var a=e[o],f=a.attrib||a.name||a.attribName||u.attribPrefix+o;if(a.value){if(!Array.isArray(a.value)&&!n.isArrayBuffer(a.value))throw new Error("array.value is not array or typedarray");t[f]={value:a.value}}else{var v,b,l,s;if(a.buffer&&a.buffer instanceof WebGLBuffer)v=a.buffer,s=a.numComponents||a.size,b=a.type,l=a.normalize;else if("number"==typeof a||"number"==typeof a.data){var _=a.data||a,A=a.type||Float32Array,T=_*A.BYTES_PER_ELEMENT;b=n.getGLTypeForTypedArrayType(A),l=void 0!==a.normalize?a.normalize:(P=A)===Int8Array||P===Uint8Array,s=a.numComponents||a.size||E(o,_),v=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,v),r.bufferData(r.ARRAY_BUFFER,T,a.drawType||r.STATIC_DRAW)}else{var R=p(a,o);v=c(r,R,void 0,a.drawType),b=n.getGLTypeForTypedArray(R),l=void 0!==a.normalize?a.normalize:function(r){return r instanceof Int8Array||r instanceof Uint8Array}(R),s=y(a,o)}t[f]={buffer:v,numComponents:s,type:b,normalize:l,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}var P}),r.bindBuffer(r.ARRAY_BUFFER,null),t}var _=["position","positions","a_position"];function A(r,e,t){var n="indices"===t?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER;return c(r,p(e,t),n)}},"./src/draw.js":function(r,e,t){e.__esModule=!0,e.drawBufferInfo=o,e.drawObjectList=function(r,e){var t=null,a=null;e.forEach(function(e){if(!1!==e.active){var u=e.programInfo,f=e.vertexArrayInfo||e.bufferInfo,c=!1,i=void 0===e.type?r.TRIANGLES:e.type;u!==t&&(t=u,r.useProgram(u.program),c=!0),(c||f!==a)&&(a&&a.vertexArrayObject&&!f.vertexArrayObject&&r.bindVertexArray(null),a=f,n.setBuffersAndAttributes(r,u,f)),n.setUniforms(u,e.uniforms),o(r,f,i,e.count,e.offset,e.instanceCount)}}),a.vertexArrayObject&&r.bindVertexArray(null)};var n=function(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}(t("./src/programs.js"));function o(r,e,t,n,o,a){t=void 0===t?r.TRIANGLES:t;var u=e.indices,f=e.elementType,c=void 0===n?e.numElements:n;o=void 0===o?0:o,f||u?void 0!==a?r.drawElementsInstanced(t,c,void 0===f?r.UNSIGNED_SHORT:e.elementType,o,a):r.drawElements(t,c,void 0===f?r.UNSIGNED_SHORT:e.elementType,o):void 0!==a?r.drawArraysInstanced(t,o,c,a):r.drawArrays(t,o,c)}},"./src/framebuffers.js":function(r,e,t){e.__esModule=!0,e.bindFramebufferInfo=function(r,e,t){t=t||r.FRAMEBUFFER,e?(r.bindFramebuffer(t,e.framebuffer),r.viewport(0,0,e.width,e.height)):(r.bindFramebuffer(t,null),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight))},e.createFramebufferInfo=function(r,e,t,a){var v=r.FRAMEBUFFER,b=r.createFramebuffer();r.bindFramebuffer(v,b),t=t||r.drawingBufferWidth,a=a||r.drawingBufferHeight;var l=0,E={framebuffer:b,attachments:[],width:t,height:a};return(e=e||f).forEach(function(e){var f=e.attachment,b=e.format,y=function(r){return c[r]}(b);if(y||(y=u+l++),!f)if(function(r){return i[r]}(b))f=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,f),r.renderbufferStorage(r.RENDERBUFFER,b,t,a);else{var p=Object.assign({},e);p.width=t,p.height=a,void 0===p.auto&&(p.auto=!1,p.min=p.min||p.minMag||r.LINEAR,p.mag=p.mag||p.minMag||r.LINEAR,p.wrapS=p.wrapS||p.wrap||r.CLAMP_TO_EDGE,p.wrapT=p.wrapT||p.wrap||r.CLAMP_TO_EDGE),f=n.createTexture(r,p)}if(o.isRenderbuffer(r,f))r.framebufferRenderbuffer(v,y,r.RENDERBUFFER,f);else{if(!o.isTexture(r,f))throw"unknown attachment type";r.framebufferTexture2D(v,y,e.texTarget||r.TEXTURE_2D,f,e.level||0)}E.attachments.push(f)}),E},e.resizeFramebufferInfo=function(r,e,t,a,u){a=a||r.drawingBufferWidth,u=u||r.drawingBufferHeight,e.width=a,e.height=u,(t=t||f).forEach(function(t,f){var c=e.attachments[f],i=t.format;if(o.isRenderbuffer(r,c))r.bindRenderbuffer(r.RENDERBUFFER,c),r.renderbufferStorage(r.RENDERBUFFER,i,a,u);else{if(!o.isTexture(r,c))throw"unknown attachment type";n.resizeTexture(r,c,t,a,u)}})};var n=a(t("./src/textures.js")),o=a(t("./src/helper.js"));function a(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}var u=36064,f=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],c={};c[34041]=33306,c[6401]=36128,c[36168]=36128,c[6402]=36096,c[33189]=36096;var i={};i[32854]=!0,i[32855]=!0,i[36194]=!0,i[34041]=!0,i[33189]=!0,i[6401]=!0,i[36168]=!0},"./src/helper.js":function(r,e,t){e.__esModule=!0,e.copyExistingProperties=function(r,e){Object.keys(e).forEach(function(t){e.hasOwnProperty(t)&&r.hasOwnProperty(t)&&(e[t]=r[t])})},e.copyNamedProperties=function(r,e,t){r.forEach(function(r){var n=e[r];void 0!==n&&(t[r]=n)})},e.isBuffer=function(r,e){o||(o=r.createBuffer());return e instanceof o.constructor},e.isRenderbuffer=function(r,e){a||(a=r.createRenderbuffer());return e instanceof a.constructor},e.isShader=function(r,e){u||(u=r.createShader(r.VERTEX_SHADER));return e instanceof u.constructor},e.isTexture=function(r,e){f||(f=r.createTexture());return e instanceof f.constructor},e.isSampler=function(r,e){if(!c){if(!r.createSampler)return!1;c=r.createSampler()}return e instanceof c.constructor},e.warn=e.error=void 0;var n="undefined"!=typeof console&&console.error&&"function"==typeof console.error?console.error.bind(console):function(){};e.error=n;var o,a,u,f,c,i="undefined"!=typeof console&&console.warn&&"function"==typeof console.warn?console.warn.bind(console):function(){};e.warn=i},"./src/m4.js":function(r,e,t){e.__esModule=!0,e.axisRotate=function(r,e,t,n){n=n||new o(16);var a=e[0],u=e[1],f=e[2],c=Math.sqrt(a*a+u*u+f*f),i=(a/=c)*a,v=(u/=c)*u,b=(f/=c)*f,l=Math.cos(t),E=Math.sin(t),y=1-l,p=i+(1-i)*l,s=a*u*y+f*E,_=a*f*y-u*E,A=a*u*y-f*E,T=v+(1-v)*l,R=u*f*y+a*E,P=a*f*y+u*E,x=u*f*y-a*E,d=b+(1-b)*l,F=r[0],m=r[1],O=r[2],B=r[3],U=r[4],I=r[5],M=r[6],S=r[7],C=r[8],j=r[9],L=r[10],w=r[11];n[0]=p*F+s*U+_*C,n[1]=p*m+s*I+_*j,n[2]=p*O+s*M+_*L,n[3]=p*B+s*S+_*w,n[4]=A*F+T*U+R*C,n[5]=A*m+T*I+R*j,n[6]=A*O+T*M+R*L,n[7]=A*B+T*S+R*w,n[8]=P*F+x*U+d*C,n[9]=P*m+x*I+d*j,n[10]=P*O+x*M+d*L,n[11]=P*B+x*S+d*w,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]);return n},e.axisRotation=function(r,e,t){t=t||new o(16);var n=r[0],a=r[1],u=r[2],f=Math.sqrt(n*n+a*a+u*u),c=(n/=f)*n,i=(a/=f)*a,v=(u/=f)*u,b=Math.cos(e),l=Math.sin(e),E=1-b;return t[0]=c+(1-c)*b,t[1]=n*a*E+u*l,t[2]=n*u*E-a*l,t[3]=0,t[4]=n*a*E-u*l,t[5]=i+(1-i)*b,t[6]=a*u*E+n*l,t[7]=0,t[8]=n*u*E+a*l,t[9]=a*u*E-n*l,t[10]=v+(1-v)*b,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.copy=c,e.frustum=function(r,e,t,n,a,u,f){f=f||new o(16);var c=e-r,i=n-t,v=a-u;return f[0]=2*a/c,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=2*a/i,f[6]=0,f[7]=0,f[8]=(r+e)/c,f[9]=(n+t)/i,f[10]=u/v,f[11]=-1,f[12]=0,f[13]=0,f[14]=a*u/v,f[15]=0,f},e.getAxis=function(r,e,t){t=t||n.create();var o=4*e;return t[0]=r[o+0],t[1]=r[o+1],t[2]=r[o+2],t},e.getTranslation=function(r,e){return(e=e||n.create())[0]=r[12],e[1]=r[13],e[2]=r[14],e},e.identity=i,e.inverse=v,e.lookAt=function(r,e,t,c){c=c||new o(16);var i=a,v=u,b=f;return n.normalize(n.subtract(r,e,b),b),n.normalize(n.cross(t,b,i),i),n.normalize(n.cross(b,i,v),v),c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=0,c[4]=v[0],c[5]=v[1],c[6]=v[2],c[7]=0,c[8]=b[0],c[9]=b[1],c[10]=b[2],c[11]=0,c[12]=r[0],c[13]=r[1],c[14]=r[2],c[15]=1,c},e.multiply=function(r,e,t){t=t||new o(16);var n=r[0],a=r[1],u=r[2],f=r[3],c=r[4],i=r[5],v=r[6],b=r[7],l=r[8],E=r[9],y=r[10],p=r[11],s=r[12],_=r[13],A=r[14],T=r[15],R=e[0],P=e[1],x=e[2],d=e[3],F=e[4],m=e[5],O=e[6],B=e[7],U=e[8],I=e[9],M=e[10],S=e[11],C=e[12],j=e[13],L=e[14],w=e[15];return t[0]=n*R+c*P+l*x+s*d,t[1]=a*R+i*P+E*x+_*d,t[2]=u*R+v*P+y*x+A*d,t[3]=f*R+b*P+p*x+T*d,t[4]=n*F+c*m+l*O+s*B,t[5]=a*F+i*m+E*O+_*B,t[6]=u*F+v*m+y*O+A*B,t[7]=f*F+b*m+p*O+T*B,t[8]=n*U+c*I+l*M+s*S,t[9]=a*U+i*I+E*M+_*S,t[10]=u*U+v*I+y*M+A*S,t[11]=f*U+b*I+p*M+T*S,t[12]=n*C+c*j+l*L+s*w,t[13]=a*C+i*j+E*L+_*w,t[14]=u*C+v*j+y*L+A*w,t[15]=f*C+b*j+p*L+T*w,t},e.negate=function(r,e){return(e=e||new o(16))[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e[4]=-r[4],e[5]=-r[5],e[6]=-r[6],e[7]=-r[7],e[8]=-r[8],e[9]=-r[9],e[10]=-r[10],e[11]=-r[11],e[12]=-r[12],e[13]=-r[13],e[14]=-r[14],e[15]=-r[15],e},e.ortho=function(r,e,t,n,a,u,f){return(f=f||new o(16))[0]=2/(e-r),f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=2/(n-t),f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2/(a-u),f[11]=0,f[12]=(e+r)/(r-e),f[13]=(n+t)/(t-n),f[14]=(u+a)/(a-u),f[15]=1,f},e.perspective=function(r,e,t,n,a){a=a||new o(16);var u=Math.tan(.5*Math.PI-.5*r),f=1/(t-n);return a[0]=u/e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(t+n)*f,a[11]=-1,a[12]=0,a[13]=0,a[14]=t*n*f*2,a[15]=0,a},e.rotateX=function(r,e,t){t=t||new o(16);var n=r[4],a=r[5],u=r[6],f=r[7],c=r[8],i=r[9],v=r[10],b=r[11],l=Math.cos(e),E=Math.sin(e);t[4]=l*n+E*c,t[5]=l*a+E*i,t[6]=l*u+E*v,t[7]=l*f+E*b,t[8]=l*c-E*n,t[9]=l*i-E*a,t[10]=l*v-E*u,t[11]=l*b-E*f,r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]);return t},e.rotateY=function(r,e,t){t=t||new o(16);var n=r[0],a=r[1],u=r[2],f=r[3],c=r[8],i=r[9],v=r[10],b=r[11],l=Math.cos(e),E=Math.sin(e);t[0]=l*n-E*c,t[1]=l*a-E*i,t[2]=l*u-E*v,t[3]=l*f-E*b,t[8]=l*c+E*n,t[9]=l*i+E*a,t[10]=l*v+E*u,t[11]=l*b+E*f,r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]);return t},e.rotateZ=function(r,e,t){t=t||new o(16);var n=r[0],a=r[1],u=r[2],f=r[3],c=r[4],i=r[5],v=r[6],b=r[7],l=Math.cos(e),E=Math.sin(e);t[0]=l*n+E*c,t[1]=l*a+E*i,t[2]=l*u+E*v,t[3]=l*f+E*b,t[4]=l*c-E*n,t[5]=l*i-E*a,t[6]=l*v-E*u,t[7]=l*b-E*f,r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]);return t},e.rotationX=function(r,e){e=e||new o(16);var t=Math.cos(r),n=Math.sin(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.rotationY=function(r,e){e=e||new o(16);var t=Math.cos(r),n=Math.sin(r);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.rotationZ=function(r,e){e=e||new o(16);var t=Math.cos(r),n=Math.sin(r);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.scale=function(r,e,t){t=t||new o(16);var n=e[0],a=e[1],u=e[2];t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=n*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=a*r[6],t[7]=a*r[7],t[8]=u*r[8],t[9]=u*r[9],t[10]=u*r[10],t[11]=u*r[11],r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]);return t},e.scaling=function(r,e){return(e=e||new o(16))[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.setAxis=function(r,e,t,n){n!==r&&(n=c(r,n));var o=4*t;return n[o+0]=e[0],n[o+1]=e[1],n[o+2]=e[2],n},e.setDefaultType=function(r){var e=o;return o=r,e},e.setTranslation=function(r,e,t){t=t||i(),r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11]);return t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.transformDirection=function(r,e,t){t=t||n.create();var o=e[0],a=e[1],u=e[2];return t[0]=o*r[0]+a*r[4]+u*r[8],t[1]=o*r[1]+a*r[5]+u*r[9],t[2]=o*r[2]+a*r[6]+u*r[10],t},e.transformNormal=function(r,e,t){t=t||n.create();var o=v(r),a=e[0],u=e[1],f=e[2];return t[0]=a*o[0]+u*o[1]+f*o[2],t[1]=a*o[4]+u*o[5]+f*o[6],t[2]=a*o[8]+u*o[9]+f*o[10],t},e.transformPoint=function(r,e,t){t=t||n.create();var o=e[0],a=e[1],u=e[2],f=o*r[3]+a*r[7]+u*r[11]+r[15];return t[0]=(o*r[0]+a*r[4]+u*r[8]+r[12])/f,t[1]=(o*r[1]+a*r[5]+u*r[9]+r[13])/f,t[2]=(o*r[2]+a*r[6]+u*r[10]+r[14])/f,t},e.translate=function(r,e,t){t=t||new o(16);var n=e[0],a=e[1],u=e[2],f=r[0],c=r[1],i=r[2],v=r[3],b=r[4],l=r[5],E=r[6],y=r[7],p=r[8],s=r[9],_=r[10],A=r[11],T=r[12],R=r[13],P=r[14],x=r[15];r!==t&&(t[0]=f,t[1]=c,t[2]=i,t[3]=v,t[4]=b,t[5]=l,t[6]=E,t[7]=y,t[8]=p,t[9]=s,t[10]=_,t[11]=A);return t[12]=f*n+b*a+p*u+T,t[13]=c*n+l*a+s*u+R,t[14]=i*n+E*a+_*u+P,t[15]=v*n+y*a+A*u+x,t},e.translation=function(r,e){return(e=e||new o(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},e.transpose=function(r,e){if((e=e||new o(16))===r){var t;return t=r[1],r[1]=r[4],r[4]=t,t=r[2],r[2]=r[8],r[8]=t,t=r[3],r[3]=r[12],r[12]=t,t=r[6],r[6]=r[9],r[9]=t,t=r[7],r[7]=r[13],r[13]=t,t=r[11],r[11]=r[14],r[14]=t,e}var n=r[0],a=r[1],u=r[2],f=r[3],c=r[4],i=r[5],v=r[6],b=r[7],l=r[8],E=r[9],y=r[10],p=r[11],s=r[12],_=r[13],A=r[14],T=r[15];return e[0]=n,e[1]=c,e[2]=l,e[3]=s,e[4]=a,e[5]=i,e[6]=E,e[7]=_,e[8]=u,e[9]=v,e[10]=y,e[11]=A,e[12]=f,e[13]=b,e[14]=p,e[15]=T,e};var n=function(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}(t("./src/v3.js"));var o=Float32Array,a=n.create(),u=n.create(),f=n.create();function c(r,e){return(e=e||new o(16))[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function i(r){return(r=r||new o(16))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function v(r,e){e=e||new o(16);var t=r[0],n=r[1],a=r[2],u=r[3],f=r[4],c=r[5],i=r[6],v=r[7],b=r[8],l=r[9],E=r[10],y=r[11],p=r[12],s=r[13],_=r[14],A=r[15],T=E*A,R=_*y,P=i*A,x=_*v,d=i*y,F=E*v,m=a*A,O=_*u,B=a*y,U=E*u,I=a*v,M=i*u,S=b*s,C=p*l,j=f*s,L=p*c,w=f*l,N=b*c,D=t*s,G=p*n,X=t*l,k=b*n,Y=t*c,V=f*n,K=T*c+x*l+d*s-(R*c+P*l+F*s),h=R*n+m*l+U*s-(T*n+O*l+B*s),W=P*n+O*c+I*s-(x*n+m*c+M*s),q=F*n+B*c+M*l-(d*n+U*c+I*l),z=1/(t*K+f*h+b*W+p*q);return e[0]=z*K,e[1]=z*h,e[2]=z*W,e[3]=z*q,e[4]=z*(R*f+P*b+F*p-(T*f+x*b+d*p)),e[5]=z*(T*t+O*b+B*p-(R*t+m*b+U*p)),e[6]=z*(x*t+m*f+M*p-(P*t+O*f+I*p)),e[7]=z*(d*t+U*f+I*b-(F*t+B*f+M*b)),e[8]=z*(S*v+L*y+w*A-(C*v+j*y+N*A)),e[9]=z*(C*u+D*y+k*A-(S*u+G*y+X*A)),e[10]=z*(j*u+G*v+Y*A-(L*u+D*v+V*A)),e[11]=z*(N*u+X*v+V*y-(w*u+k*v+Y*y)),e[12]=z*(j*E+N*_+C*i-(w*_+S*i+L*E)),e[13]=z*(X*_+S*a+G*E-(D*E+k*_+C*a)),e[14]=z*(D*i+V*_+L*a-(Y*_+j*a+G*i)),e[15]=z*(Y*E+w*a+k*i-(X*i+V*E+N*a)),e}},"./src/primitives.js":function(r,e,t){e.__esModule=!0,e.create3DFVertices=B,e.createAugmentedTypedArray=l,e.createCubeVertices=F,e.createPlaneVertices=P,e.createSphereVertices=x,e.createTruncatedConeVertices=m,e.createXYQuadVertices=R,e.createCresentVertices=U,e.createCylinderVertices=I,e.createTorusVertices=M,e.createDiscVertices=S,e.deindexVertices=function(r){var e=r.indices,t={},n=e.length;return Object.keys(r).filter(E).forEach(function(o){for(var a=r[o],u=a.numComponents,f=l(u,n,a.constructor),c=0;c<n;++c)for(var i=e[c],v=i*u,b=0;b<u;++b)f.push(a[v+b]);t[o]=f}),t},e.flattenNormals=function(r){if(r.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var e=r.normal,t=e.length,n=0;n<t;n+=9){var o=e[n+0],a=e[n+1],u=e[n+2],f=e[n+3],c=e[n+4],i=e[n+5],v=e[n+6],b=e[n+7],l=e[n+8],E=o+f+v,y=a+c+b,p=u+i+l,s=Math.sqrt(E*E+y*y+p*p);E/=s,y/=s,p/=s,e[n+0]=E,e[n+1]=y,e[n+2]=p,e[n+3]=E,e[n+4]=y,e[n+5]=p,e[n+6]=E,e[n+7]=y,e[n+8]=p}return r},e.makeRandomVertexColors=function(r,e){e=e||{};var t=r.position.numElements,n=l(4,t,Uint8Array),o=e.rand||function(r,e){return e<3?(t=256,Math.random()*t|0):255;var t};if(r.color=n,r.indices)for(var a=0;a<t;++a)n.push(o(a,0),o(a,1),o(a,2),o(a,3));else for(var u=e.vertsPerColor||3,f=t/u,c=0;c<f;++c)for(var i=[o(c,0),o(c,1),o(c,2),o(c,3)],v=0;v<u;++v)n.push(i);return r},e.reorientDirections=s,e.reorientNormals=_,e.reorientPositions=A,e.reorientVertices=T,e.concatVertices=function(r){for(var e,t={},n=function(n){var o=r[n];Object.keys(o).forEach(function(r){t[r]||(t[r]=[]),e||"indices"===r||(e=r);var n=o[r],a=v(n,r),u=i(n),f=u.length/a;t[r].push(f)})},o=0;o<r.length;++o)n(o);var a=t[e],u={};return Object.keys(t).forEach(function(e){var t=function(e){for(var t,n=0,o=0;o<r.length;++o){var a=r[o],u=a[e],f=i(u);n+=f.length,t&&!u.data||(t=u)}return{length:n,spec:t}}(e),n=N(t.spec,t.length);!function(e,t,n){for(var o=0,a=0,u=0;u<r.length;++u){var f=r[u],c=f[e],v=i(c);"indices"===e?(w(v,n,a,o),o+=t[u]):w(v,n,a),a+=v.length}}(e,a,i(n)),u[e]=n}),u},e.duplicateVertices=function(r){var e={};return Object.keys(r).forEach(function(t){var n=r[t],o=i(n),a=N(n,o.length);w(o,i(a),0),e[t]=a}),e},e.createDiscBuffers=e.createDiscBufferInfo=e.createTorusBuffers=e.createTorusBufferInfo=e.createCylinderBuffers=e.createCylinderBufferInfo=e.createCresentBuffers=e.createCresentBufferInfo=e.createXYQuadBuffers=e.createXYQuadBufferInfo=e.createTruncatedConeBuffers=e.createTruncatedConeBufferInfo=e.createSphereBuffers=e.createSphereBufferInfo=e.createPlaneBuffers=e.createPlaneBufferInfo=e.createCubeBuffers=e.createCubeBufferInfo=e.create3DFBuffers=e.create3DFBufferInfo=void 0;var n=c(t("./src/attributes.js")),o=c(t("./src/helper.js")),a=c(t("./src/typedarrays.js")),u=c(t("./src/m4.js")),f=c(t("./src/v3.js"));function c(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}var i=n.getArray_,v=n.getNumComponents_;function b(r,e){var t=0;return r.push=function(){for(var e=0;e<arguments.length;++e){var n=arguments[e];if(n instanceof Array||a.isArrayBuffer(n))for(var o=0;o<n.length;++o)r[t++]=n[o];else r[t++]=n}},r.reset=function(r){t=r||0},r.numComponents=e,Object.defineProperty(r,"numElements",{get:function(){return this.length/this.numComponents|0}}),r}function l(r,e,t){return b(new(t||Float32Array)(r*e),r)}function E(r){return"indices"!==r}function y(r,e,t){for(var n=r.length,o=new Float32Array(3),a=0;a<n;a+=3)t(e,[r[a],r[a+1],r[a+2]],o),r[a]=o[0],r[a+1]=o[1],r[a+2]=o[2]}function p(r,e,t){t=t||f.create();var n=e[0],o=e[1],a=e[2];return t[0]=n*r[0]+o*r[1]+a*r[2],t[1]=n*r[4]+o*r[5]+a*r[6],t[2]=n*r[8]+o*r[9]+a*r[10],t}function s(r,e){return y(r,e,u.transformDirection),r}function _(r,e){return y(r,u.inverse(e),p),r}function A(r,e){return y(r,e,u.transformPoint),r}function T(r,e){return Object.keys(r).forEach(function(t){var n=r[t];t.indexOf("pos")>=0?A(n,e):t.indexOf("tan")>=0||t.indexOf("binorm")>=0?s(n,e):t.indexOf("norm")>=0&&_(n,e)}),r}function R(r,e,t){return r=r||2,{position:{numComponents:2,data:[(e=e||0)+-1*(r*=.5),(t=t||0)+-1*r,e+1*r,t+-1*r,e+-1*r,t+1*r,e+1*r,t+1*r]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function P(r,e,t,n,o){r=r||1,e=e||1,t=t||1,n=n||1,o=o||u.identity();for(var a=(t+1)*(n+1),f=l(3,a),c=l(3,a),i=l(2,a),v=0;v<=n;v++)for(var b=0;b<=t;b++){var E=b/t,y=v/n;f.push(r*E-.5*r,0,e*y-.5*e),c.push(0,1,0),i.push(E,y)}for(var p=t+1,s=l(3,t*n*2,Uint16Array),_=0;_<n;_++)for(var A=0;A<t;A++)s.push((_+0)*p+A,(_+1)*p+A,(_+0)*p+A+1),s.push((_+1)*p+A,(_+1)*p+A+1,(_+0)*p+A+1);return T({position:f,normal:c,texcoord:i,indices:s},o)}function x(r,e,t,n,o,a,u){if(e<=0||t<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||0;for(var f=(o=o||Math.PI)-n,c=(u=u||2*Math.PI)-a,i=(e+1)*(t+1),v=l(3,i),b=l(3,i),E=l(2,i),y=0;y<=t;y++)for(var p=0;p<=e;p++){var s=p/e,_=y/t,A=c*s+a,T=f*_+n,R=Math.sin(A),P=Math.cos(A),x=Math.sin(T),d=P*x,F=Math.cos(T),m=R*x;v.push(r*d,r*F,r*m),b.push(d,F,m),E.push(1-s,_)}for(var O=e+1,B=l(3,e*t*2,Uint16Array),U=0;U<e;U++)for(var I=0;I<t;I++)B.push((I+0)*O+U,(I+0)*O+U+1,(I+1)*O+U),B.push((I+1)*O+U,(I+0)*O+U+1,(I+1)*O+U+1);return{position:v,normal:b,texcoord:E,indices:B}}var d=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function F(r){for(var e=(r=r||1)/2,t=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=l(3,24),u=l(3,24),f=l(2,24),c=l(3,12,Uint16Array),i=0;i<6;++i){for(var v=d[i],b=0;b<4;++b){var E=t[v[b]],y=n[i],p=o[b];a.push(E),u.push(y),f.push(p)}var s=4*i;c.push(s+0,s+1,s+2),c.push(s+0,s+2,s+3)}return{position:a,normal:u,texcoord:f,indices:c}}function m(r,e,t,n,o,a,u){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(o<1)throw Error("verticalSubdivisions must be 1 or greater");for(var f=void 0===a||a,c=void 0===u||u,i=(f?2:0)+(c?2:0),v=(n+1)*(o+1+i),b=l(3,v),E=l(3,v),y=l(2,v),p=l(3,n*(o+i)*2,Uint16Array),s=n+1,_=Math.atan2(r-e,t),A=Math.cos(_),T=Math.sin(_),R=o+(c?2:0),P=f?-2:0;P<=R;++P){var x=P/o,d=t*x,F=void 0;P<0?(d=0,x=1,F=r):P>o?(d=t,x=1,F=e):F=r+P/o*(e-r),-2!==P&&P!==o+2||(F=0,x=0),d-=t/2;for(var m=0;m<s;++m){var O=Math.sin(m*Math.PI*2/n),B=Math.cos(m*Math.PI*2/n);b.push(O*F,d,B*F),E.push(P<0||P>o?0:O*A,P<0?-1:P>o?1:T,P<0||P>o?0:B*A),y.push(m/n,1-x)}}for(var U=0;U<o+i;++U)for(var I=0;I<n;++I)p.push(s*(U+0)+0+I,s*(U+0)+1+I,s*(U+1)+1+I),p.push(s*(U+0)+0+I,s*(U+1)+1+I,s*(U+1)+0+I);return{position:b,normal:E,texcoord:y,indices:p}}function O(r,e){e=e||[];for(var t=[],n=0;n<r.length;n+=4){var o=r[n],a=r.slice(n+1,n+4);a.push.apply(a,e);for(var u=0;u<o;++u)t.push.apply(t,a)}return t}function B(){var r=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=O([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),t=O([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=r.length/3,o={position:l(3,n),texcoord:l(2,n),normal:l(3,n),color:l(4,n,Uint8Array),indices:l(3,n/3,Uint16Array)};o.position.push(r),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(e),o.color.push(t);for(var a=0;a<n;++a)o.indices.push(a);return o}function U(r,e,t,n,o,a,u){if(o<=0)throw Error("subdivisionDown must be > 0");var c=2,i=(u=u||1)-(a=a||0),v=2*(o+1)*(2+c),b=l(3,v),E=l(3,v),y=l(2,v);function p(r,e,t){return r+(e-r)*t}function s(e,t,u,v,l,s){for(var _=0;_<=o;_++){var A=t/(c-1),T=_/o,R=2*(A-.5),P=(a+T*i)*Math.PI,x=Math.sin(P),d=Math.cos(P),F=p(r,e,x),m=R*n,O=d*r,B=x*F;b.push(m,O,B);var U=f.add(f.multiply([0,x,d],u),v);E.push(U),y.push(A*l+s,T)}}for(var _=0;_<c;_++){var A=2*(_/(c-1)-.5);s(e,_,[1,1,1],[0,0,0],1,0),s(e,_,[0,0,0],[A,0,0],0,0),s(t,_,[1,1,1],[0,0,0],1,0),s(t,_,[0,0,0],[A,0,0],0,1)}var T=l(3,2*o*(2+c),Uint16Array);function R(r,e){for(var t=0;t<o;++t)T.push(r+t+0,r+t+1,e+t+0),T.push(r+t+1,e+t+1,e+t+0)}var P=o+1;return R(0*P,4*P),R(5*P,7*P),R(6*P,2*P),R(3*P,1*P),{position:b,normal:E,texcoord:y,indices:T}}function I(r,e,t,n,o,a){return m(r,r,e,t,n,o,a)}function M(r,e,t,n,o,a){if(t<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");o=o||0;for(var u=(a=a||2*Math.PI)-o,f=t+1,c=n+1,i=f*c,v=l(3,i),b=l(3,i),E=l(2,i),y=l(3,t*n*2,Uint16Array),p=0;p<c;++p)for(var s=p/n,_=s*Math.PI*2,A=Math.sin(_),T=r+A*e,R=Math.cos(_),P=R*e,x=0;x<f;++x){var d=x/t,F=o+d*u,m=Math.sin(F),O=Math.cos(F),B=m*T,U=O*T,I=m*A,M=O*A;v.push(B,P,U),b.push(I,R,M),E.push(d,1-s)}for(var S=0;S<n;++S)for(var C=0;C<t;++C){var j=1+C,L=1+S;y.push(f*S+C,f*L+C,f*S+j),y.push(f*L+C,f*L+j,f*S+j)}return{position:v,normal:b,texcoord:E,indices:y}}function S(r,e,t,n,o){if(e<3)throw Error("divisions must be at least 3");o=o||1,n=n||0;for(var a=(e+1)*((t=t||1)+1),u=l(3,a),f=l(3,a),c=l(2,a),i=l(3,t*e*2,Uint16Array),v=0,b=r-n,E=e+1,y=0;y<=t;++y){for(var p=n+b*Math.pow(y/t,o),s=0;s<=e;++s){var _=2*Math.PI*s/e,A=p*Math.cos(_),T=p*Math.sin(_);if(u.push(A,0,T),f.push(0,1,0),c.push(1-s/e,y/t),y>0&&s!==e){var R=v+(s+1),P=v+s,x=v+s-E,d=v+(s+1)-E;i.push(R,P,x),i.push(R,x,d)}}v+=e+1}return{position:u,normal:f,texcoord:c,indices:i}}function C(r){return function(e){var t=r.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(e,t)}}function j(r){return function(e){var t=r.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(e,t)}}var L=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function w(r,e,t,n){n=n||0;for(var o=r.length,a=0;a<o;++a)e[t+a]=r[a]+n}function N(r,e){var t=i(r),n=new t.constructor(e),a=n;return t.numComponents&&t.numElements&&b(n,t.numComponents),r.data&&(a={data:n},o.copyNamedProperties(L,r,a)),a}var D=j(B);e.create3DFBufferInfo=D;var G=C(B);e.create3DFBuffers=G;var X=j(F);e.createCubeBufferInfo=X;var k=C(F);e.createCubeBuffers=k;var Y=j(P);e.createPlaneBufferInfo=Y;var V=C(P);e.createPlaneBuffers=V;var K=j(x);e.createSphereBufferInfo=K;var h=C(x);e.createSphereBuffers=h;var W=j(m);e.createTruncatedConeBufferInfo=W;var q=C(m);e.createTruncatedConeBuffers=q;var z=j(R);e.createXYQuadBufferInfo=z;var H=C(R);e.createXYQuadBuffers=H;var $=j(U);e.createCresentBufferInfo=$;var Z=C(U);e.createCresentBuffers=Z;var Q=j(I);e.createCylinderBufferInfo=Q;var J=C(I);e.createCylinderBuffers=J;var g=j(M);e.createTorusBufferInfo=g;var rr=C(M);e.createTorusBuffers=rr;var er=j(S);e.createDiscBufferInfo=er;var tr=C(S);e.createDiscBuffers=tr},"./src/programs.js":function(r,e,t){e.__esModule=!0,e.createAttributeSetters=k,e.createProgram=I,e.createProgramFromScripts=function(r,e,t,n,o){for(var a=m(t,n,o),u=[],f=0;f<e.length;++f){var c=M(r,e[f],r[O[f]],a.errorCallback);if(!c)return null;u.push(c)}return I(r,u,a)},e.createProgramFromSources=S,e.createProgramInfo=function(r,e,t,n,o){var a=m(t,n,o),u=!0;if(e=e.map(function(r){if(r.indexOf("\n")<0){var e=c(r);e?r=e.text:(a.errorCallback("no element with id: "+r),u=!1)}return r}),!u)return null;var f=S(r,e,a);if(!f)return null;return V(r,f)},e.createProgramInfoFromProgram=V,e.createUniformSetters=j,e.createUniformBlockSpecFromProgram=N,e.createUniformBlockInfoFromProgram=G,e.createUniformBlockInfo=function(r,e,t){return G(r,e.program,e.uniformBlockSpec,t)},e.createTransformFeedback=function(r,e,t){var n=r.createTransformFeedback();return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n),r.useProgram(e.program),w(r,e,t),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),function(r,e,t){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var o=e[n];o&&r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o.index,null)}}(r,e,t),n},e.createTransformFeedbackInfo=L,e.bindTransformFeedbackInfo=w,e.setAttributes=Y,e.setBuffersAndAttributes=function(r,e,t){t.vertexArrayObject?r.bindVertexArray(t.vertexArrayObject):(Y(e.attribSetters||e,t.attribs),t.indices&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indices))},e.setUniforms=function r(e,t){var n=e.uniformSetters||e;var o=arguments.length;for(var a=1;a<o;++a){var u=arguments[a];if(Array.isArray(u))for(var f=u.length,c=0;c<f;++c)r(n,u[c]);else for(var i in u){var v=n[i];v&&v(u[i])}}},e.setUniformBlock=function(r,e,t){X(r,e,t)&&r.bufferData(r.UNIFORM_BUFFER,t.array,r.DYNAMIC_DRAW)},e.setBlockUniforms=function(r,e){var t=r.uniforms;for(var n in e){var o=t[n];if(o){var a=e[n];a.length?o.set(a):o[0]=a}}},e.bindUniformBlock=X;var n=a(t("./src/utils.js")),o=a(t("./src/helper.js"));function a(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}var u=o.error,f=o.warn,c="undefined"!=typeof document&&document.getElementById?document.getElementById.bind(document):function(){return null},i={};function v(r,e){return i[e].bindPoint}function b(r,e){return function(t){r.uniform1i(e,t)}}function l(r,e){return function(t){r.uniform1iv(e,t)}}function E(r,e){return function(t){r.uniform2iv(e,t)}}function y(r,e){return function(t){r.uniform3iv(e,t)}}function p(r,e){return function(t){r.uniform4iv(e,t)}}function s(r,e,t,a){var u=v(0,e);return n.isWebGL2(r)?function(e){var n,f;o.isTexture(r,e)?(n=e,f=null):(n=e.texture,f=e.sampler),r.uniform1i(a,t),r.activeTexture(r.TEXTURE0+t),r.bindTexture(u,n),r.bindSampler(t,f)}:function(e){r.uniform1i(a,t),r.activeTexture(r.TEXTURE0+t),r.bindTexture(u,e)}}function _(r,e,t,a,u){for(var f=v(0,e),c=new Int32Array(u),i=0;i<u;++i)c[i]=t+i;return n.isWebGL2(r)?function(e){r.uniform1iv(a,c),e.forEach(function(e,n){var a,u;r.activeTexture(r.TEXTURE0+c[n]),o.isTexture(r,e)?(a=e,u=null):(a=e.texture,u=e.sampler),r.bindSampler(t,u),r.bindTexture(f,a)})}:function(e){r.uniform1iv(a,c),e.forEach(function(e,t){r.activeTexture(r.TEXTURE0+c[t]),r.bindTexture(f,e)})}}function A(r,e){return function(t){t.value?(r.disableVertexAttribArray(e),r.vertexAttrib4fv(e,t.value)):(r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribPointer(e,t.numComponents||t.size,t.type||r.FLOAT,t.normalize||!1,t.stride||0,t.offset||0),void 0!==t.divisor&&r.vertexAttribDivisor(e,t.divisor))}}function T(r,e){return function(t){t.value?(r.disableVertexAttribArray(e),r.vertexAttrib4iv(e,t.value)):(r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribIPointer(e,t.numComponents||t.size,t.type||r.INT,t.stride||0,t.offset||0),void 0!==t.divisor&&r.vertexAttribDivisor(e,t.divisor))}}function R(r,e){return function(t){t.value?(r.disableVertexAttribArray(e),r.vertexAttrib4uiv(e,t.value)):(r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.enableVertexAttribArray(e),r.vertexAttribIPointer(e,t.numComponents||t.size,t.type||r.UNSIGNED_INT,t.stride||0,t.offset||0),void 0!==t.divisor&&r.vertexAttribDivisor(e,t.divisor))}}function P(r,e,t){var n=t.size,o=t.count;return function(t){r.bindBuffer(r.ARRAY_BUFFER,t.buffer);for(var a=t.size||t.numComponents||n,u=a/o,f=t.type||r.FLOAT,c=i[f].size*a,v=t.normalize||!1,b=t.offset||0,l=c/o,E=0;E<o;++E)r.enableVertexAttribArray(e+E),r.vertexAttribPointer(e+E,u,f,v,c,b+l*E),void 0!==t.divisor&&r.vertexAttribDivisor(e+E,t.divisor)}}i[5126]={Type:Float32Array,size:4,setter:function(r,e){return function(t){r.uniform1f(e,t)}},arraySetter:function(r,e){return function(t){r.uniform1fv(e,t)}}},i[35664]={Type:Float32Array,size:8,setter:function(r,e){return function(t){r.uniform2fv(e,t)}}},i[35665]={Type:Float32Array,size:12,setter:function(r,e){return function(t){r.uniform3fv(e,t)}}},i[35666]={Type:Float32Array,size:16,setter:function(r,e){return function(t){r.uniform4fv(e,t)}}},i[5124]={Type:Int32Array,size:4,setter:b,arraySetter:l},i[35667]={Type:Int32Array,size:8,setter:E},i[35668]={Type:Int32Array,size:12,setter:y},i[35669]={Type:Int32Array,size:16,setter:p},i[5125]={Type:Uint32Array,size:4,setter:function(r,e){return function(t){r.uniform1ui(e,t)}},arraySetter:function(r,e){return function(t){r.uniform1uiv(e,t)}}},i[36294]={Type:Uint32Array,size:8,setter:function(r,e){return function(t){r.uniform2uiv(e,t)}}},i[36295]={Type:Uint32Array,size:12,setter:function(r,e){return function(t){r.uniform3uiv(e,t)}}},i[36296]={Type:Uint32Array,size:16,setter:function(r,e){return function(t){r.uniform4uiv(e,t)}}},i[35670]={Type:Uint32Array,size:4,setter:b,arraySetter:l},i[35671]={Type:Uint32Array,size:8,setter:E},i[35672]={Type:Uint32Array,size:12,setter:y},i[35673]={Type:Uint32Array,size:16,setter:p},i[35674]={Type:Float32Array,size:16,setter:function(r,e){return function(t){r.uniformMatrix2fv(e,!1,t)}}},i[35675]={Type:Float32Array,size:36,setter:function(r,e){return function(t){r.uniformMatrix3fv(e,!1,t)}}},i[35676]={Type:Float32Array,size:64,setter:function(r,e){return function(t){r.uniformMatrix4fv(e,!1,t)}}},i[35685]={Type:Float32Array,size:24,setter:function(r,e){return function(t){r.uniformMatrix2x3fv(e,!1,t)}}},i[35686]={Type:Float32Array,size:32,setter:function(r,e){return function(t){r.uniformMatrix2x4fv(e,!1,t)}}},i[35687]={Type:Float32Array,size:24,setter:function(r,e){return function(t){r.uniformMatrix3x2fv(e,!1,t)}}},i[35688]={Type:Float32Array,size:48,setter:function(r,e){return function(t){r.uniformMatrix3x4fv(e,!1,t)}}},i[35689]={Type:Float32Array,size:32,setter:function(r,e){return function(t){r.uniformMatrix4x2fv(e,!1,t)}}},i[35690]={Type:Float32Array,size:48,setter:function(r,e){return function(t){r.uniformMatrix4x3fv(e,!1,t)}}},i[35678]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:3553},i[35680]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:34067},i[35679]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:32879},i[35682]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:3553},i[36289]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:35866},i[36292]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:35866},i[36293]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:34067},i[36298]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:3553},i[36299]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:32879},i[36300]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:34067},i[36303]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:35866},i[36306]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:3553},i[36307]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:32879},i[36308]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:34067},i[36311]={Type:null,size:0,setter:s,arraySetter:_,bindPoint:35866};var x={};x[5126]={size:4,setter:A},x[35664]={size:8,setter:A},x[35665]={size:12,setter:A},x[35666]={size:16,setter:A},x[5124]={size:4,setter:T},x[35667]={size:8,setter:T},x[35668]={size:12,setter:T},x[35669]={size:16,setter:T},x[5125]={size:4,setter:R},x[36294]={size:8,setter:R},x[36295]={size:12,setter:R},x[36296]={size:16,setter:R},x[35670]={size:4,setter:T},x[35671]={size:8,setter:T},x[35672]={size:12,setter:T},x[35673]={size:16,setter:T},x[35674]={size:4,setter:P,count:2},x[35675]={size:9,setter:P,count:3},x[35676]={size:16,setter:P,count:4};var d=/^[ \t]*\n/;function F(r,e,t,n){var o=n||u,a=r.createShader(t),f=0;if(d.test(e)&&(f=1,e=e.replace(d,"")),r.shaderSource(a,e),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS)){var c=r.getShaderInfoLog(a);return o(function(r,e){return e=e||0,++e,r.split("\n").map(function(r,t){return t+e+": "+r}).join("\n")}(e,f)+"\n*** Error compiling shader: "+c),r.deleteShader(a),null}return a}function m(r,e,t){var n;if("function"==typeof e&&(t=e,e=void 0),"function"==typeof r)t=r,r=void 0;else if(r&&!Array.isArray(r)){if(r.errorCallback)return r;var o=r;t=o.errorCallback,r=o.attribLocations,n=o.transformFeedbackVaryings}var a={errorCallback:t||u,transformFeedbackVaryings:n};if(r){var f={};Array.isArray(r)?r.forEach(function(r,t){f[r]=e?e[t]:t}):f=r,a.attribLocations=f}return a}var O=["VERTEX_SHADER","FRAGMENT_SHADER"];function B(r,e){return e.indexOf("frag")>=0?r.FRAGMENT_SHADER:e.indexOf("vert")>=0?r.VERTEX_SHADER:void 0}function U(r,e){e.forEach(function(e){r.deleteShader(e)})}function I(r,e,t,n,a){for(var u=m(t,n,a),f=[],i=[],v=0;v<e.length;++v){var b=e[v];if("string"==typeof b){var l=c(b),E=l?l.text:b,y=r[O[v]];l&&l.type&&(y=B(r,l.type)||y),b=F(r,E,y,u.errorCallback),i.push(b)}o.isShader(r,b)&&f.push(b)}if(f.length!==e.length)return u.errorCallback("not enough shaders for program"),U(r,i),null;var p=r.createProgram();f.forEach(function(e){r.attachShader(p,e)}),u.attribLocations&&Object.keys(u.attribLocations).forEach(function(e){r.bindAttribLocation(p,u.attribLocations[e],e)});var s=u.transformFeedbackVaryings;if(s&&(s.attribs&&(s=s.attribs),Array.isArray(s)||(s=Object.keys(s)),r.transformFeedbackVaryings(p,s,u.transformFeedbackMode||r.SEPARATE_ATTRIBS)),r.linkProgram(p),!r.getProgramParameter(p,r.LINK_STATUS)){var _=r.getProgramInfoLog(p);return u.errorCallback("Error in program linking:"+_),r.deleteProgram(p),U(r,i),null}return p}function M(r,e,t,n){var o,a=c(e);if(!a)throw"*** Error: unknown script element"+e;o=a.text;var u=t||B(r,a.type);if(!u)throw"*** Error: unknown shader type";return F(r,o,u,n)}function S(r,e,t,n,o){for(var a=m(t,n,o),u=[],f=0;f<e.length;++f){var c=F(r,e[f],r[O[f]],a.errorCallback);if(!c)return null;u.push(c)}return I(r,u,a)}function C(r){var e=r.name;return e.startsWith("gl_")||e.startsWith("webgl_")}function j(r,e){var t=0;function n(e,n){var o,a=r.getUniformLocation(e,n.name),u=n.size>1&&"[0]"===n.name.substr(-3),f=n.type,c=i[f];if(!c)throw"unknown type: 0x"+f.toString(16);if(c.bindPoint){var v=t;t+=n.size,o=u?c.arraySetter(r,f,v,a,n.size):c.setter(r,f,v,a,n.size)}else o=c.arraySetter&&u?c.arraySetter(r,a):c.setter(r,a);return o.location=a,o}for(var o={},a=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),u=0;u<a;++u){var f=r.getActiveUniform(e,u);if(!C(f)){var c=f.name;"[0]"===c.substr(-3)&&(c=c.substr(0,c.length-3));var v=n(e,f);o[c]=v}}return o}function L(r,e){for(var t={},n=r.getProgramParameter(e,r.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var a=r.getTransformFeedbackVarying(e,o);t[a.name]={index:o,type:a.type,size:a.size}}return t}function w(r,e,t){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var o=e[n];if(o){var a=t[n];a.offset?r.bindBufferRange(r.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer,a.offset,a.size):r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer)}}}function N(r,e){for(var t=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),n=[],o=[],a=0;a<t;++a){o.push(a),n.push({});var u=r.getActiveUniform(e,a);if(C(u))break;n[a].name=u.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var a=t[0],u=t[1];r.getActiveUniforms(e,o,r[a]).forEach(function(r,e){n[e][u]=r})});for(var f={},c=r.getProgramParameter(e,r.ACTIVE_UNIFORM_BLOCKS),i=0;i<c;++i){var v=r.getActiveUniformBlockName(e,i),b={index:i,usedByVertexShader:r.getActiveUniformBlockParameter(e,i,r.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:r.getActiveUniformBlockParameter(e,i,r.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:r.getActiveUniformBlockParameter(e,i,r.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:r.getActiveUniformBlockParameter(e,i,r.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};b.used=b.usedByVertexSahder||b.usedByFragmentShader,f[v]=b}return{blockSpecs:f,uniformData:n}}var D=/\[\d+\]\.$/;function G(r,e,t,n){var o=t.blockSpecs,a=t.uniformData,u=o[n];if(!u)return f("no uniform block object named:",n),{name:n,uniforms:{}};var c=new ArrayBuffer(u.size),v=r.createBuffer(),b=u.index;r.bindBuffer(r.UNIFORM_BUFFER,v),r.uniformBlockBinding(e,u.index,b);var l=n+".";D.test(l)&&(l=l.replace(D,"."));var E={};return u.uniformIndices.forEach(function(r){var e=a[r],t=i[e.type],n=t.Type,o=e.size*t.size,u=e.name;u.substr(0,l.length)===l&&(u=u.substr(l.length)),E[u]=new n(c,e.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:c,asFloat:new Float32Array(c),buffer:v,uniforms:E}}function X(r,e,t){var n=(e.uniformBlockSpec||e).blockSpecs[t.name];if(n){var o=n.index;return r.bindBufferRange(r.UNIFORM_BUFFER,o,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function k(r,e){for(var t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var a=r.getActiveAttrib(e,o);if(!C(a)){var u=r.getAttribLocation(e,a.name),f=x[a.type],c=f.setter(r,u,f);c.location=u,t[a.name]=c}}return t}function Y(r,e){for(var t in e){var n=r[t];n&&n(e[t])}}function V(r,e){var t={program:e,uniformSetters:j(r,e),attribSetters:k(r,e)};return n.isWebGL2(r)&&(t.uniformBlockSpec=N(r,e),t.transformFeedbackInfo=L(r,e)),t}},"./src/textures.js":function(r,e,t){e.__esModule=!0,e.setTextureDefaults_=function(r){a.copyExistingProperties(r,f),r.textureColor&&d(r.textureColor)},e.createSampler=C,e.createSamplers=function(r,e){var t={};return Object.keys(e).forEach(function(n){t[n]=C(r,e[n])}),t},e.setSamplerParameters=S,e.createTexture=H,e.setEmptyTexture=z,e.setTextureFromArray=q,e.loadTextureFromUrl=K,e.setTextureFromElement=D,e.setTextureFilteringForSize=j,e.setTextureParameters=M,e.setDefaultTextureColor=d,e.createTextures=function(r,e,t){t=t||G;var n=0,o=[],a={},u={};function f(){0===n&&setTimeout(function(){t(o.length?o:void 0,a,u)},0)}return Object.keys(e).forEach(function(t){var c,i,v=e[t];("string"==typeof(i=v.src)||Array.isArray(i)&&"string"==typeof i[0])&&(c=function(r,e,a){u[t]=a,--n,r&&o.push(r),f()},++n),a[t]=H(r,v,c)}),f(),a},e.resizeTexture=function(r,e,t,n,o){n=n||t.width,o=o||t.height;var a=t.target||r.TEXTURE_2D;r.bindTexture(a,e);var u,f=t.level||0,i=t.internalFormat||t.format||r.RGBA,v=_(i),b=t.format||v.format,l=t.src;u=l&&(c(l)||Array.isArray(l)&&"number"==typeof l[0])?t.type||P(r,l,v.type):t.type||v.type;if(a===r.TEXTURE_CUBE_MAP)for(var E=0;E<6;++E)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+E,f,i,n,o,0,b,u,null);else r.texImage2D(a,f,i,n,o,0,b,u,null)},e.canGenerateMipmap=T,e.canFilter=R,e.getNumComponentsForFormat=function(r){var e=l[r];if(!e)throw"unknown format: "+r;return e.numColorComponents},e.getBytesPerElementForInternalFormat=s,e.getFormatAndTypeForInternalFormat=_;var n=u(t("./src/utils.js")),o=u(t("./src/typedarrays.js")),a=u(t("./src/helper.js"));function u(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}var f={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},c=o.isArrayBuffer,i="undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null,v=6407,b=33319,l={},E=l;E[6406]={numColorComponents:1},E[6409]={numColorComponents:1},E[6410]={numColorComponents:2},E[v]={numColorComponents:3},E[6408]={numColorComponents:4},E[6403]={numColorComponents:1},E[36244]={numColorComponents:1},E[b]={numColorComponents:2},E[33320]={numColorComponents:2},E[v]={numColorComponents:3},E[36248]={numColorComponents:3},E[6408]={numColorComponents:4},E[36249]={numColorComponents:4},E[6402]={numColorComponents:1},E[34041]={numColorComponents:2};var y={},p=y;function s(r,e){var t=y[r];if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function _(r){var e=y[r];if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function A(r){return 0==(r&r-1)}function T(r,e,t,o){if(!n.isWebGL2(r))return A(e)&&A(t);var a=y[o];if(!a)throw"unknown internal format";return a.colorRenderable&&a.textureFilterable}function R(r){var e=y[r];if(!e)throw"unknown internal format";return e.textureFilterable}function P(r,e,t){return c(e)?o.getGLTypeForTypedArray(e):t||r.UNSIGNED_BYTE}function x(r,e,t,n,o){if(o%1!=0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=o/n)%1)throw"can't guess dimensions"}else if((n=o/t)%1)throw"can't guess dimensions"}else{var a=Math.sqrt(o/(e===r.TEXTURE_CUBE_MAP?6:1));a%1==0?(t=a,n=a):(t=o,n=1)}return{width:t,height:n}}function d(r){f.textureColor=new Uint8Array([255*r[0],255*r[1],255*r[2],255*r[3]])}p[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},p[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},p[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},p[v]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},p[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},p[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},p[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},p[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},p[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},p[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},p[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},p[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},p[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},p[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},p[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},p[33323]={textureFormat:b,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},p[36757]={textureFormat:b,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},p[33327]={textureFormat:b,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},p[33328]={textureFormat:b,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},p[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},p[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},p[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},p[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},p[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},p[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},p[32849]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},p[35905]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},p[36194]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},p[36758]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},p[35898]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},p[35901]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},p[34843]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},p[34837]={textureFormat:v,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},p[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},p[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},p[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},p[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},p[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},p[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},p[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},p[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},p[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},p[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},p[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},p[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},p[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},p[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},p[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},p[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},p[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},p[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},p[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},p[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},p[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},p[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},p[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},p[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},p[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},p[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(p).forEach(function(r){var e=p[r];e.bytesPerElementMap={},e.bytesPerElement.forEach(function(r,t){var n=e.type[t];e.bytesPerElementMap[n]=r})});var F={};function m(r,e){void 0!==e.colorspaceConversion&&(F.colorspaceConversion=r.getParameter(r.UNPACK_COLORSPACE_CONVERSION_WEBGL),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(F.premultiplyAlpha=r.getParameter(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha)),void 0!==e.flipY&&(F.flipY=r.getParameter(r.UNPACK_FLIP_Y_WEBGL),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e.flipY))}function O(r,e){void 0!==e.colorspaceConversion&&r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,F.colorspaceConversion),void 0!==e.premultiplyAlpha&&r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),void 0!==e.flipY&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,F.flipY)}function B(r){F.unpackAlignment=r.getParameter(r.UNPACK_ALIGNMENT),n.isWebGL2(r)&&(F.unpackRowLength=r.getParameter(r.UNPACK_ROW_LENGTH),F.unpackImageHeight=r.getParameter(r.UNPACK_IMAGE_HEIGHT),F.unpackSkipPixels=r.getParameter(r.UNPACK_SKIP_PIXELS),F.unpackSkipRows=r.getParameter(r.UNPACK_SKIP_ROWS),F.unpackSkipImages=r.getParameter(r.UNPACK_SKIP_IMAGES))}function U(r){r.pixelStorei(r.UNPACK_ALIGNMENT,F.unpackAlignment),n.isWebGL2(r)&&(r.pixelStorei(r.UNPACK_ROW_LENGTH,F.unpackRowLength),r.pixelStorei(r.UNPACK_IMAGE_HEIGHT,F.unpackImageHeight),r.pixelStorei(r.UNPACK_SKIP_PIXELS,F.unpackSkipPixels),r.pixelStorei(r.UNPACK_SKIP_ROWS,F.unpackSkipRows),r.pixelStorei(r.UNPACK_SKIP_IMAGES,F.unpackSkipImages))}function I(r,e,t,n){n.minMag&&(t.call(r,e,r.TEXTURE_MIN_FILTER,n.minMag),t.call(r,e,r.TEXTURE_MAG_FILTER,n.minMag)),n.min&&t.call(r,e,r.TEXTURE_MIN_FILTER,n.min),n.mag&&t.call(r,e,r.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(t.call(r,e,r.TEXTURE_WRAP_S,n.wrap),t.call(r,e,r.TEXTURE_WRAP_T,n.wrap),(e===r.TEXTURE_3D||a.isSampler(r,e))&&t.call(r,e,r.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&t.call(r,e,r.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&t.call(r,e,r.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&t.call(r,e,r.TEXTURE_WRAP_T,n.wrapT),n.minLod&&t.call(r,e,r.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&t.call(r,e,r.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&t.call(r,e,r.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&t.call(r,e,r.TEXTURE_MAX_LEVEL,n.maxLevel)}function M(r,e,t){var n=t.target||r.TEXTURE_2D;r.bindTexture(n,e),I(r,n,r.texParameteri,t)}function S(r,e,t){I(r,e,r.samplerParameteri,t)}function C(r,e){var t=r.createSampler();return S(r,t,e),t}function j(r,e,t,n,o,a,u){t=t||f.textureOptions,a=a||r.RGBA,u=u||r.UNSIGNED_BYTE;var c=t.target||r.TEXTURE_2D;if(n=n||t.width,o=o||t.height,r.bindTexture(c,e),T(r,n,o,a))r.generateMipmap(c);else{var i=R(a)?r.LINEAR:r.NEAREST;r.texParameteri(c,r.TEXTURE_MIN_FILTER,i),r.texParameteri(c,r.TEXTURE_MAG_FILTER,i),r.texParameteri(c,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(c,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)}}function L(r){return!0===r.auto||void 0===r.auto&&void 0===r.level}function w(r,e){return(e=e||{}).cubeFaceOrder||[r.TEXTURE_CUBE_MAP_POSITIVE_X,r.TEXTURE_CUBE_MAP_NEGATIVE_X,r.TEXTURE_CUBE_MAP_POSITIVE_Y,r.TEXTURE_CUBE_MAP_NEGATIVE_Y,r.TEXTURE_CUBE_MAP_POSITIVE_Z,r.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function N(r,e){var t=w(r,e).map(function(r,e){return{face:r,ndx:e}});return t.sort(function(r,e){return r.face-e.face}),t}function D(r,e,t,n){var o=(n=n||f.textureOptions).target||r.TEXTURE_2D,a=n.level||0,u=t.width,c=t.height,v=n.internalFormat||n.format||r.RGBA,b=_(v),l=n.format||b.format,E=n.type||b.type;if(m(r,n),r.bindTexture(o,e),o===r.TEXTURE_CUBE_MAP){var y,p,s=t.width,A=t.height;if(s/6===A)y=A,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(A/6===s)y=s,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(s/3==A/2)y=s/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(s/2!=A/3)throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);y=s/2,p=[0,0,1,0,0,1,1,1,0,2,1,2]}i?(i.canvas.width=y,i.canvas.height=y,u=y,c=y,N(r,n).forEach(function(e){var n=p[2*e.ndx+0]*y,o=p[2*e.ndx+1]*y;i.drawImage(t,n,o,y,y,0,0,y,y),r.texImage2D(e.face,a,v,l,E,i.canvas)}),i.canvas.width=1,i.canvas.height=1):"undefined"!=typeof createImageBitmap&&(u=y,c=y,N(r,n).forEach(function(f){var i=p[2*f.ndx+0]*y,b=p[2*f.ndx+1]*y;r.texImage2D(f.face,a,v,y,y,0,l,E,null),createImageBitmap(t,i,b,y,y,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(t){m(r,n),r.bindTexture(o,e),r.texImage2D(f.face,a,v,l,E,t),O(r,n),L(n)&&j(r,e,n,u,c,v,E)})}))}else if(o===r.TEXTURE_3D||o===r.TEXTURE_2D_ARRAY){var T=Math.min(t.width,t.height),R=Math.max(t.width,t.height),P=R/T;if(P%1!=0)throw"can not compute 3D dimensions of element";var x=t.width===R?1:0,d=t.height===R?1:0;B(r),r.pixelStorei(r.UNPACK_ALIGNMENT,1),r.pixelStorei(r.UNPACK_ROW_LENGTH,t.width),r.pixelStorei(r.UNPACK_IMAGE_HEIGHT,0),r.pixelStorei(r.UNPACK_SKIP_IMAGES,0),r.texImage3D(o,a,v,T,T,T,0,l,E,null);for(var F=0;F<P;++F){var I=F*T*x,S=F*T*d;r.pixelStorei(r.UNPACK_SKIP_PIXELS,I),r.pixelStorei(r.UNPACK_SKIP_ROWS,S),r.texSubImage3D(o,a,0,0,F,T,T,1,l,E,t)}U(r)}else r.texImage2D(o,a,v,l,E,t);O(r,n),L(n)&&j(r,e,n,u,c,v,E),M(r,e,n)}function G(){}function X(r,e){return void 0!==e||function(r){if("undefined"!=typeof document){var e=document.createElement("a");return e.href=r,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}var t=new URL(location.href).origin;return new URL(r,location.href).origin===t}(r)?e:"anonymous"}function k(r){return"undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap||"undefined"!=typeof ImageData&&r instanceof ImageData||"undefined"!=typeof HTMLElement&&r instanceof HTMLElement}function Y(r,e,t){return k(r)?(setTimeout(function(){t(null,r)}),r):function(r,e,t){var n;if(t=t||G,e=void 0!==e?e:f.crossOrigin,e=X(r,e),"undefined"!=typeof Image){n=new Image,void 0!==e&&(n.crossOrigin=e);var o=function(){n.removeEventListener("error",u),n.removeEventListener("load",c),n=null},u=function(){var e="couldn't load image: "+r;a.error(e),t(e,n),o()},c=function(){t(null,n),o()};return n.addEventListener("error",u),n.addEventListener("load",c),n.src=r,n}if("undefined"!=typeof ImageBitmap){var i,v,b=function(){t(i,v)},l={};e&&(l.mode="cors"),fetch(r,l).then(function(r){if(!r.ok)throw r;return r.blob()}).then(function(r){return createImageBitmap(r,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(r){v=r,setTimeout(b)}).catch(function(r){i=r,setTimeout(b)}),n=null}return n}(r,e,t)}function V(r,e,t){var n=(t=t||f.textureOptions).target||r.TEXTURE_2D;if(r.bindTexture(n,e),!1!==t.color){var o=function(r){return r=r||f.textureColor,c(r)?r:new Uint8Array([255*r[0],255*r[1],255*r[2],255*r[3]])}(t.color);if(n===r.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,o);else n===r.TEXTURE_3D||n===r.TEXTURE_2D_ARRAY?r.texImage3D(n,0,r.RGBA,1,1,1,0,r.RGBA,r.UNSIGNED_BYTE,o):r.texImage2D(n,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,o)}}function K(r,e,t,n){return n=n||G,t=t||f.textureOptions,V(r,e,t),Y((t=Object.assign({},t)).src,t.crossOrigin,function(o,a){o?n(o,e,a):(D(r,e,a,t),n(null,e,a))})}function h(r,e,t,n){n=n||G;var o=t.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";var a=t.level||0,u=t.internalFormat||t.format||r.RGBA,f=_(u),c=t.format||f.format,i=t.type||r.UNSIGNED_BYTE,v=t.target||r.TEXTURE_2D;if(v!==r.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";V(r,e,t),t=Object.assign({},t);var b,l=6,E=[],y=w(r,t);b=o.map(function(o,f){return Y(o,t.crossOrigin,(p=y[f],function(o,f){--l,o?E.push(o):f.width!==f.height?E.push("cubemap face img is not a square: "+f.src):(m(r,t),r.bindTexture(v,e),5===l?w(r).forEach(function(e){r.texImage2D(e,a,u,c,i,f)}):r.texImage2D(p,a,u,c,i,f),O(r,t),L(t)&&r.generateMipmap(v)),0===l&&n(E.length?E:void 0,e,b)}));var p})}function W(r,e,t,n){n=n||G;var o=t.src,a=t.internalFormat||t.format||r.RGBA,u=_(a),f=t.format||u.format,c=t.type||r.UNSIGNED_BYTE,v=t.target||r.TEXTURE_2D_ARRAY;if(v!==r.TEXTURE_3D&&v!==r.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";V(r,e,t),t=Object.assign({},t);var b,l=o.length,E=[],y=t.level||0,p=t.width,s=t.height,A=o.length,T=!0;b=o.map(function(o,u){return Y(o,t.crossOrigin,(_=u,function(o,u){if(--l,o)E.push(o);else{if(m(r,t),r.bindTexture(v,e),T){T=!1,p=t.width||u.width,s=t.height||u.height,r.texImage3D(v,y,a,p,s,A,0,f,c,null);for(var R=0;R<A;++R)r.texSubImage3D(v,y,0,0,R,p,s,1,f,c,u)}else{var P=u;u.width===p&&u.height===s||(P=i.canvas,i.canvas.width=p,i.canvas.height=s,i.drawImage(u,0,0,p,s)),r.texSubImage3D(v,y,0,0,_,p,s,1,f,c,P),P===i.canvas&&(i.canvas.width=0,i.canvas.height=0)}O(r,t),L(t)&&r.generateMipmap(v)}0===l&&n(E.length?E:void 0,e,b)}));var _})}function q(r,e,t,a){var u=(a=a||f.textureOptions).target||r.TEXTURE_2D;r.bindTexture(u,e);var i=a.width,v=a.height,b=a.depth,l=a.level||0,E=a.internalFormat||a.format||r.RGBA,y=_(E),p=a.format||y.format,A=a.type||P(r,t,y.type);if(c(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{var T=o.getTypedArrayTypeForGLType(A);t=new T(t)}var R,d=s(E,A),F=t.byteLength/d;if(F%1)throw"length wrong size for format: "+n.glEnumToString(r,p);if(u===r.TEXTURE_3D){if(i||v||b)!i||v&&b?!v||i&&b?(R=x(r,u,i,v,F/b),i=R.width,v=R.height):(R=x(r,u,i,b,F/v),i=R.width,b=R.height):(R=x(r,u,v,b,F/i),v=R.width,b=R.height);else{var I=Math.cbrt(F);if(I%1!=0)throw"can't guess cube size of array of numElements: "+F;i=I,v=I,b=I}}else R=x(r,u,i,v,F),i=R.width,v=R.height;if(B(r),r.pixelStorei(r.UNPACK_ALIGNMENT,a.unpackAlignment||1),m(r,a),u===r.TEXTURE_CUBE_MAP){var M=F/6*(d/t.BYTES_PER_ELEMENT);N(r,a).forEach(function(e){var n=M*e.ndx,o=t.subarray(n,n+M);r.texImage2D(e.face,l,E,i,v,0,p,A,o)})}else u===r.TEXTURE_3D?r.texImage3D(u,l,E,i,v,b,0,p,A,t):r.texImage2D(u,l,E,i,v,0,p,A,t);return O(r,a),U(r),{width:i,height:v,depth:b,type:A}}function z(r,e,t){var n=t.target||r.TEXTURE_2D;r.bindTexture(n,e);var o=t.level||0,a=t.internalFormat||t.format||r.RGBA,u=_(a),f=t.format||u.format,c=t.type||u.type;if(m(r,t),n===r.TEXTURE_CUBE_MAP)for(var i=0;i<6;++i)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+i,o,a,t.width,t.height,0,f,c,null);else n===r.TEXTURE_3D?r.texImage3D(n,o,a,t.width,t.height,t.depth,0,f,c,null):r.texImage2D(n,o,a,t.width,t.height,0,f,c,null);O(r,t)}function H(r,e,t){t=t||G,e=e||f.textureOptions;var n=r.createTexture(),o=e.target||r.TEXTURE_2D,a=e.width||1,u=e.height||1,i=e.internalFormat||r.RGBA,v=_(i),b=e.type||v.type;r.bindTexture(o,n),o===r.TEXTURE_CUBE_MAP&&(r.texParameteri(o,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(o,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE));var l=e.src;if(l){if("function"==typeof l&&(l=l(r,e)),"string"==typeof l)K(r,n,e,t);else if(c(l)||Array.isArray(l)&&("number"==typeof l[0]||Array.isArray(l[0])||c(l[0]))){var E=q(r,n,l,e);a=E.width,u=E.height,b=E.type}else if(Array.isArray(l)&&("string"==typeof l[0]||k(l[0])))o===r.TEXTURE_CUBE_MAP?h(r,n,e,t):W(r,n,e,t);else{if(!k(l))throw"unsupported src type";D(r,n,l,e),a=l.width,u=l.height}}else z(r,n,e);return L(e)&&j(r,n,e,a,u,i,b),M(r,n,e),n}},"./src/twgl-full.js":function(r,e,t){e.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};e.primitives=e.v3=e.m4=void 0;var o=c(t("./src/m4.js"));e.m4=o;var a=c(t("./src/v3.js"));e.v3=a;var u=c(t("./src/primitives.js"));e.primitives=u;var f=t("./src/twgl.js");function c(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=f[r]))})},"./src/twgl.js":function(r,e,t){e.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};e.addExtensionsToContext=A,e.getContext=function(r,e){return function(r,e){for(var t=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=r.getContext(t[o],e)){y.addExtensionsToContext&&A(n);break}return n}(r,e)},e.getWebGLContext=function(r,e){return function(r,e){for(var t=["webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=r.getContext(t[o],e)){y.addExtensionsToContext&&A(n);break}return n}(r,e)},e.resizeCanvasToDisplaySize=function(r,e){e=e||1,e=Math.max(0,e);var t=r.clientWidth*e|0,n=r.clientHeight*e|0;if(r.width!==t||r.height!==n)return r.width=t,r.height=n,!0;return!1},e.setDefaults=function(r){u.copyExistingProperties(r,y),o.setAttributeDefaults_(r),a.setTextureDefaults_(r)};var o=E(t("./src/attributes.js"));Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=o[r]))});var a=E(t("./src/textures.js"));Object.keys(a).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=a[r]))});var u=E(t("./src/helper.js")),f=E(t("./src/utils.js"));Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=f[r]))});var c=t("./src/draw.js");Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=c[r]))});var i=t("./src/framebuffers.js");Object.keys(i).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=i[r]))});var v=t("./src/programs.js");Object.keys(v).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=v[r]))});var b=t("./src/typedarrays.js");Object.keys(b).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=b[r]))});var l=t("./src/vertex-arrays.js");function E(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(n,r)||(e[r]=l[r]))});var y={addExtensionsToContext:!0};var p=/^(.*?)_/;function s(r,e){f.glEnumToString(r,0);var t=r.getExtension(e);if(t){var n={},o=p.exec(e)[1],a="_"+o;for(var c in t){var i=t[c],v="function"==typeof i,b=v?o:a,l=c;c.endsWith(b)&&(l=c.substring(0,c.length-b.length)),void 0!==r[l]?v||r[l]===i||u.warn(l,r[l],i,c):v?r[l]=function(r){return function(){return r.apply(t,arguments)}}(i):(r[l]=i,n[l]=i)}n.constructor={name:t.constructor.name},f.glEnumToString(n,0)}return t}var _=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function A(r){for(var e=0;e<_.length;++e)s(r,_[e])}},"./src/typedarrays.js":function(r,e,t){e.__esModule=!0,e.getGLTypeForTypedArray=function(r){if(r instanceof Int8Array)return n;if(r instanceof Uint8Array)return o;if(r instanceof Uint8ClampedArray)return o;if(r instanceof Int16Array)return a;if(r instanceof Uint16Array)return u;if(r instanceof Int32Array)return f;if(r instanceof Uint32Array)return c;if(r instanceof Float32Array)return i;throw"unsupported typed array type"},e.getGLTypeForTypedArrayType=function(r){if(r===Int8Array)return n;if(r===Uint8Array)return o;if(r===Uint8ClampedArray)return o;if(r===Int16Array)return a;if(r===Uint16Array)return u;if(r===Int32Array)return f;if(r===Uint32Array)return c;if(r===Float32Array)return i;throw"unsupported typed array type"},e.getTypedArrayTypeForGLType=function(r){var e=v[r];if(!e)throw"unknown gl type";return e},e.isArrayBuffer=void 0;var n=5120,o=5121,a=5122,u=5123,f=5124,c=5125,i=5126,v={},b=v;b[n]=Int8Array,b[o]=Uint8Array,b[a]=Int16Array,b[u]=Uint16Array,b[f]=Int32Array,b[c]=Uint32Array,b[i]=Float32Array,b[32819]=Uint16Array,b[32820]=Uint16Array,b[33635]=Uint16Array,b[5131]=Uint16Array,b[33640]=Uint32Array,b[35899]=Uint32Array,b[35902]=Uint32Array,b[36269]=Uint32Array,b[34042]=Uint32Array;var l="undefined"!=typeof SharedArrayBuffer?function(r){return r&&r.buffer&&(r.buffer instanceof ArrayBuffer||r.buffer instanceof SharedArrayBuffer)}:function(r){return r&&r.buffer&&r.buffer instanceof ArrayBuffer};e.isArrayBuffer=l},"./src/utils.js":function(r,e,t){e.__esModule=!0,e.isWebGL1=function(r){return!r.texStorage2D},e.isWebGL2=function(r){return!!r.texStorage2D},e.glEnumToString=void 0;var n=function(){var r={},e={};return function(t,n){return function(t){var n=t.constructor.name;if(!r[n]){for(var o in t)if("number"==typeof t[o]){var a=e[t[o]];e[t[o]]=a?"".concat(a," | ").concat(o):o}r[n]=!0}}(t),e[n]||"0x"+n.toString(16)}}();e.glEnumToString=n},"./src/v3.js":function(r,e,t){e.__esModule=!0,e.add=function(r,e,t){return(t=t||new n(3))[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},e.copy=function(r,e){return(e=e||new n(3))[0]=r[0],e[1]=r[1],e[2]=r[2],e},e.create=function(r,e,t){var o=new n(3);r&&(o[0]=r);e&&(o[1]=e);t&&(o[2]=t);return o},e.cross=function(r,e,t){t=t||new n(3);var o=r[2]*e[0]-r[0]*e[2],a=r[0]*e[1]-r[1]*e[0];return t[0]=r[1]*e[2]-r[2]*e[1],t[1]=o,t[2]=a,t},e.distance=function(r,e){var t=r[0]-e[0],n=r[1]-e[1],o=r[2]-e[2];return Math.sqrt(t*t+n*n+o*o)},e.distanceSq=function(r,e){var t=r[0]-e[0],n=r[1]-e[1],o=r[2]-e[2];return t*t+n*n+o*o},e.divide=function(r,e,t){return(t=t||new n(3))[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t},e.divScalar=function(r,e,t){return(t=t||new n(3))[0]=r[0]/e,t[1]=r[1]/e,t[2]=r[2]/e,t},e.dot=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]},e.lerp=function(r,e,t,o){return(o=o||new n(3))[0]=r[0]+t*(e[0]-r[0]),o[1]=r[1]+t*(e[1]-r[1]),o[2]=r[2]+t*(e[2]-r[2]),o},e.lerpV=function(r,e,t,o){return(o=o||new n(3))[0]=r[0]+t[0]*(e[0]-r[0]),o[1]=r[1]+t[1]*(e[1]-r[1]),o[2]=r[2]+t[2]*(e[2]-r[2]),o},e.length=function(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])},e.lengthSq=function(r){return r[0]*r[0]+r[1]*r[1]+r[2]*r[2]},e.max=function(r,e,t){return(t=t||new n(3))[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t},e.min=function(r,e,t){return(t=t||new n(3))[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t},e.mulScalar=function(r,e,t){return(t=t||new n(3))[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t},e.multiply=function(r,e,t){return(t=t||new n(3))[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t},e.negate=function(r,e){return(e=e||new n(3))[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e},e.normalize=function(r,e){e=e||new n(3);var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],o=Math.sqrt(t);o>1e-5?(e[0]=r[0]/o,e[1]=r[1]/o,e[2]=r[2]/o):(e[0]=0,e[1]=0,e[2]=0);return e},e.setDefaultType=function(r){var e=n;return n=r,e},e.subtract=function(r,e,t){return(t=t||new n(3))[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t};var n=Float32Array},"./src/vertex-arrays.js":function(r,e,t){e.__esModule=!0,e.createVertexArrayInfo=function(r,e,t){var o=r.createVertexArray();r.bindVertexArray(o),e.length||(e=[e]);return e.forEach(function(e){n.setBuffersAndAttributes(r,e,t)}),r.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:o}},e.createVAOAndSetAttributes=o,e.createVAOFromBufferInfo=function(r,e,t){return o(r,e.attribSetters||e,t.attribs,t.indices)};var n=function(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}return e.default=r,e}(t("./src/programs.js"));function o(r,e,t,o){var a=r.createVertexArray();return r.bindVertexArray(a),n.setAttributes(e,t),o&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bindVertexArray(null),a}}})});var be={};function Wd(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var r=!0;document.body.appendChild(e)}var t=e.getBoundingClientRect(),a=getComputedStyle(e),n=(0|t.height)+Ca(a.getPropertyValue("margin-top"))+Ca(a.getPropertyValue("margin-bottom")),o=(0|t.width)+Ca(a.getPropertyValue("margin-left"))+Ca(a.getPropertyValue("margin-right"));return r&&document.body.removeChild(e),[o,n]}function Ca(e){return parseFloat(e)||0}be=Wd;var Td={};Td=Sd;var Jb=new Float32Array(2);function Sd(t,r,e){var a="SVG"===t.nodeName.toUpperCase();return t.style.position=t.style.position||"absolute",t.style.top=0,t.style.left=0,$.scale=parseFloat(e||1),$.parent=r,$();function $(){var r=$.parent||t.parentNode;if("function"==typeof r)var e=r(Jb)||Jb,n=e[0],o=e[1];else if(r&&r!==document.body){var i=be(r);n=0|i[0],o=0|i[1]}else n=window.innerWidth,o=window.innerHeight;return a?(t.setAttribute("width",n*$.scale+"px"),t.setAttribute("height",o*$.scale+"px")):(t.width=n*$.scale,t.height=o*$.scale),t.style.width=n+"px",t.style.height=o+"px",$}}const Rd=($,{init:a,update:e,release:s},t)=>{let n,r,o=0,p=0;return{init(s,c,...v){Od(n=s,n.width,n.height),r=n.getContext($,t),p=Date.now(),a&&a(n,r,c,...v),e&&e(n,r,c,p,o++,...v)},render:($,...a)=>(r&&e&&e(n,r,$,Date.now()-p,o++,...a),["canvas",a[0]]),release($,...a){s&&s(n,r,$,...a)}}},Qd=($,a)=>Rd("webgl",$,a);const Od=($,a,e)=>{const s=window.devicePixelRatio||1;return 1!=s&&($.style.width=`${a}px`,$.style.height=`${e}px`),$.width=a*s,$.height=e*s,s};class Id{set params(p){}init(p){this.gl=p}render(p,t){}}const Ch=Object.freeze([-1/0,-1/0]);const Dh=Object.freeze([1/0,1/0]);const Eh=Object.freeze([1,1]);const Cd=Object.freeze([0,0]);const Fh=Object.freeze([1,0]);const Gh=Object.freeze([0,1]);const vd=Object.freeze([-1/0,-1/0,-1/0]);const ud=Object.freeze([1/0,1/0,1/0]);const Xb=Object.freeze([1,1,1]);const Pa=Object.freeze([0,0,0]);const td=Object.freeze([1,0,0]);const sd=Object.freeze([0,1,0]);const rd=Object.freeze([0,0,1]);const qd=Object.freeze([-1/0,-1/0,-1/0,-1/0]);const od=Object.freeze([1/0,1/0,1/0,1/0]);const md=Object.freeze([1,1,1,1]);const ld=Object.freeze([0,0,0,0]);const jd=Object.freeze([1,0,0,0]);const id=Object.freeze([0,1,0,0]);const gd=Object.freeze([0,0,1,0]);const cd=Object.freeze([0,0,0,1]);const ad=(e,t,r,s=!0,n=!0)=>{const o=s?function(){return this.buf[this.offset+r*this.stride]}:function(){return this.buf[this.offset+r]},i=s?function(e){this.buf[this.offset+r*this.stride]=e}:function(e){this.buf[this.offset+r]=e};n&&Object.defineProperty(e,r,{get:o,set:i,enumerable:!0}),Object.defineProperty(e,t,{get:o,set:i,enumerable:!0})};const jc=(e,t,r,s)=>t.forEach((t,n)=>ad(e,t,n,r,s));class kc{constructor(t,s=0,$=1){this.buf=t,this.offset=s,this.stride=$}}function*Aa($,e){const r=$(sc()),f=r[1],t=r[2];for(let d of e){const $=t([],d);if(s($))return void(yield*F(f($.deref())));$.length&&(yield*$)}yield*F(f([]))}function*mc($,e){const r=$([null,null,($,e)=>e])[2];for(let f of e){let $=r(T,f);if(s($))return void(($=F($.deref()))!==T&&(yield $));$!==T&&(yield $)}}class H{constructor(e){this.value=e}deref(){return this.value}}const _c=e=>new H(e);const s=e=>e instanceof H;const Ya=e=>e instanceof H?e:new H(e);const F=e=>e instanceof H?e.deref():e;function sc($){return $?[...$]:M(()=>[],($,r)=>($.push(r),$))}function $a(...e){let r,$;switch(e.length){case 3:$=e[2],r=e[1];break;case 2:$=e[1];break;default:R(e.length);}const t=e[0],o=t[0],l=t[1],p=t[2];if(r=null==r?o():r,z($,"$reduce"))r=$.$reduce(p,r);else if(Be($)){for(let u=0,L=$.length;u<L;u++)if(r=p(r,$[u]),s(r)){r=r.deref();break}}else for(let u of $)if(r=p(r,u),s(r)){r=r.deref();break}return F(l(r))}const M=(e,r)=>[e,e=>e,r];const vc=($,e,r=mc)=>{const f=e.length-1;return Ce(e[f])?e.length>1?r($.apply(null,e.slice(0,f)),e[f]):r($(),e[0]):void 0};function L(...e){let r,a;switch(e.length){case 4:a=e[3],r=e[2];break;case 3:a=e[2];break;case 2:return D(r=>L(e[0],e[1],r));default:R(e.length);}return $a(e[0](e[1]),r,a)}function D(t,r){return r?mc(D(t),r):r=>{const $=r[2];return W(r,(r,e)=>$(r,t(e)))}}const W=($,c)=>[$[0],$[1],c];function zc($){return $?$a(zc(),$):M(()=>new Object,($,[e,r])=>($[e]=r,$))}function Ac(...e){let[r,$,t,o,c,p,i,n,s,a]=e;switch(e.length){case 0:R(0);case 1:return r;case 2:return(...e)=>r($(...e));case 3:return(...e)=>r($(t(...e)));case 4:return(...e)=>r($(t(o(...e))));case 5:return(...e)=>r($(t(o(c(...e)))));case 6:return(...e)=>r($(t(o(c(p(...e))))));case 7:return(...e)=>r($(t(o(c(p(i(...e)))))));case 8:return(...e)=>r($(t(o(c(p(i(n(...e))))))));case 9:return(...e)=>r($(t(o(c(p(i(n(s(...e)))))))));case 10:default:const u=(...e)=>r($(t(o(c(p(i(n(s(a(...e))))))))));return 10===e.length?u:Ac(u,...e.slice(10));}}function Bc(r){return r?$a(Bc(),r):M(()=>void 0,(r,$)=>$)}function Zc(r,$){r=r||"";let e=!0;return $?[...$].join(r):M(()=>"",($,s)=>($=e?$+s:$+r+s,e=!1,$))}const Uc=()=>r=>{const $=r[2];return W(r,(r,e)=>{if(e)for(let a of F(e))if(r=$(r,a),s(r))break;return s(e)?Ya(r):r})};function ga(e,t,$){return new Sc(e,t,$)}class Sc{constructor(e,t,$){void 0===e?(e=0,t=1/0):void 0===t&&(t=e,e=0),$=void 0===$?e<t?1:-1:$,this.from=e,this.to=t,this.step=$}*[Symbol.iterator](){const e=this.step,t=this.to;let $=this.from;if(e>0)for(;$<t;)yield $,$+=e;else if(e<0)for(;$>t;)yield $,$+=e}$reduce(e,t){const $=this.step;if($>0)for(let r=this.from,o=this.to;r<o&&!s(t);r+=$)t=e(t,r);else for(let r=this.from,o=this.to;r>o&&!s(t);r+=$)t=e(t,r);return t}}function*lf(...e){const t=e.map(e=>e[Symbol.iterator]());for(;;){const e=[];for(let $ of t){let t=$.next();if(t.done)return;e.push(t.value)}yield e}}function Hc(r,t){return t?Aa(Hc(r),t):t=>{const e=t[2],$=(t,o)=>{const i=r(o);if(i){for(let r of i)if(t=$(t,r),s(t))break;return t}return e(t,o)};return W(t,$)}}function Mc(t){return Hc(t=>null!=t&&t[Symbol.iterator]&&"string"!=typeof t?t:void 0,t)}function Jc(...e){return vc(Jc,e)||($=>{const r=$[2],n=e[0];let p=e[1]||0;return W($,(e,$)=>r(e,n(p++,$)))})}function ba(p,$){return $?Aa(ba(p),$):Lc(D(p),Uc())}function Lc(...$){return Ac.apply(null,$)}function Ic(e,r){return r?Aa(Ic(e),r):r=>{const $=r[2];let o=e;return W(r,(e,r)=>--o>0?$(e,r):0===o?Ya($(e,r)):_c(e))}}function Gc(...e){return e.length>2&&vc(Gc,e,Aa)||(([$,r,t])=>{const[a,n,o]=e[0];let q=e.length>1&&null!=e[1]?e[1]:a();return[$,e=>{let $=n(q);return $!==q&&(e=F(t(e,$))),q=$,r(e)},(e,$)=>(q=o(q,$),s(q)?Ya(t(e,q.deref())):t(e,q))]})}function*Oc(e,$=1/0){for(;$-->0;)yield e}function*Pc(r){for(let $ in r)r.hasOwnProperty($)&&(yield[$,r[$]])}const Qc=$=>([o,t,p])=>`${o}=${t}${$}${p};`;const Rc=$=>([o,t])=>`${o}=${t}${$}n;`;const Fc=([$,o])=>`${$}*${o}`;const Tc=([$,o])=>`s+=${$}*${o};`;const eb=([$,o])=>`${$}=${o};`;const Vc=([$])=>`${$}=n;`;const Wc=([$,o,t,p])=>`${$}=${o}+${t}*${p};`;const Xc=([$,o,t])=>`${$}=${o}+${t}*n;`;const Yc=([$,o,t])=>`${$}=${o}+(${t}-${o})*n;`;const v=(e=0)=>{const r=new Array(5);let p;const t=(...t)=>{const o=r[t[e].length]||p;return o?o(...t):Pb(`no impl for vec size ${t[e].length}`)};return t.add=(e,p)=>r[e]=p,t.default=e=>p=e,t};const $c="o,a,b,c";const oc="o,a,b,n";const ic="io=0,ia=0,so=1,sa=1";const bd="io=0,ia=0,ib=0,so=1,sa=1,sb=1";const hc="!o&&(o=[]);";const dd=$=>o=>o>1?`${$}[i${$}+${o}*s${$}]`:1==o?`${$}[i${$}+s${$}]`:`${$}[i${$}]`,ed=$=>D(dd($),ga()),fd=$=>D(o=>`${$}[${o}]`,ga()),gc=($,o,e,t="a",p="",S="",r="",W=!1)=>[S,L(Lc(Ic($),Jc(($,e)=>o(e,$))),Zc(p),lf.apply(null,e.split(",").map(W?ed:fd))),r,null!==t?`return ${t};`:""],hd=($,o,e="a",t,p,S=!1)=>[t,"for(let i=a.length;--i>=0;) {",$(o.split(",").map(S?$=>`${$}[i${$}+i*s${$}]`:$=>`${$}[i]`)),"}",p,null!==e?`return ${e};`:""],fc=($,o)=>`!${$} && (${$}=${o.split(",")[1]});`;const y=($,o,e,t=e,p="a",S,r,W,a=!1)=>new Function(e,gc($,o,t,p,S,r,W,a).join(""));const kd=($,o,e,t,p,S=p,r="a",W="",a,s,i=!1)=>new Function(t,`return (${p})=>{${gc($,e,S,r,W,a,s,i).join("")}}`)(...o);const ea=($,o,e=o,t="a",p,S,r=!1)=>new Function(o,hd($,e,t,p,S,r).join(""));const t=($,o="o,a,b",e,t="o",p=1,S)=>{e=e||o,S=null!=S?S:fc(t,o);const r=v(p),W=p=>r.add(p,y(p,$,o,e,t,"",S));return r.default(ea($,o,e,t,S)),[r,W(2),W(3),W(4)]};const nd=($,o=`o,a,b,${bd}`,e="o,a,b",t="o",p,S=[2,3,4])=>S.map(S=>y(S,$,o,e,t,"",null!=p?p:fc(t,o),"",!0));const Ra=$=>t(Qc($));const pd=$=>t(Rc($),"o,a,n");const ac=(e,r,$,t,o,P)=>{const f=[];for(;--$>=0;)f.push(new e(r,t,o)),t+=P;return f};const _b=(e,r,$,t,o,P)=>{for(let f of $)e(r,f,t,0,o,1),t+=P;return r};function*ec(e,r,$,t,o,P){for(;$-->0;)yield new e(r,t,o),t+=P}function*Zb(e,r,$,t){for(;r-->0;)yield e[$],$+=t}const Wb=Math.PI;const la=2*Wb;const wd=Wb/180;const Jh=(1+Math.sqrt(5))/2;const Ih=Math.SQRT2;const Hh=Math.sqrt(3);let x=1e-6;const Ma=($,t=1)=>[Math.cos($)*t,Math.sin($)*t];const La=Math.abs,Dd=Math.max,Rb=($,a,e=x)=>La($-a)<=e*Dd(1,La($),La(a));const Fd=$=>$<0?0:$>1?1:$;const Qb=($,r,t)=>r+(t-r)*Fd($);const Ka=$=>pa.add($,kd($,[Rb,x],([$,e])=>`eq(${$},${e},eps)`,"eq,_eps","a,b,eps=_eps","a,b",null,"&&","return a.length === b.length && ",";")),pa=v();pa.default(($,e,t=x)=>z($,"eqDelta")?$.eqDelta(e,t):z(e,"eqDelta")?e.eqDelta($,t):Md($,e,$.length,t));const Bh=Ka(2);const Kd=Ka(3);const Ld=Ka(4);const Md=($,e,t,r=x,g=0,f=0,o=1,v=1)=>{for(;t>0;t--,g+=o,f+=v)if(!Rb($[g],e[f],r))return!1;return!0};const[Ah,qa,Pd]=nd(eb,`o,a,${ic}`,"o,a","o",hc);class a extends kc{constructor(r,$=0,e=1){super(r||[0,0,0],$,e)}static mapBuffer(r,$=r.length/3|0,e=0,t=1,o=3){return ac($K9zr$export$Vec3,r,$,e,t,o)}static intoBuffer(r,$,e=0,t=1,o=3){return _b(qa,r,$,e,t,o)}static iterator(r,$,e=0,t=1,o=3){return ec($K9zr$export$Vec3,r,$,e,t,o)}[Symbol.iterator](){return Zb(this.buf,3,this.offset,this.stride)}get length(){return 3}copy(){return new $K9zr$export$Vec3([this.x,this.y,this.z])}copyView(){return new $K9zr$export$Vec3(this.buf,this.offset,this.stride)}empty(){return new $K9zr$export$Vec3}eqDelta(r,$=x){return Kd(this,r,$)}toJSON(){return[this.x,this.y,this.z]}toString(){return`[${this.x}, ${this.y}, ${this.z}]`}}a.X_AXIS=new a(td),a.Y_AXIS=new a(sd),a.Z_AXIS=new a(rd),a.MIN=new a(vd),a.MAX=new a(ud),a.ZERO=new a(Pa),a.ONE=new a(Xb),jc(a.prototype,["x","y","z"]);class d extends kc{constructor($,e=0,t=1){super($||[0,0,0,0],e,t)}static mapBuffer($,e=$.length>>2,t=0,r=1,l=4){return ac($Lylz$export$Vec4,$,e,t,r,l)}static intoBuffer($,e,t=0,r=1,l=4){return _b(Pd,$,e,t,r,l)}static*iterator($,e,t=0,r=1,l=4){return ec($Lylz$export$Vec4,$,e,t,r,l)}[Symbol.iterator](){return Zb(this.buf,4,this.offset,this.stride)}get length(){return 4}copy(){return new $Lylz$export$Vec4([this.x,this.y,this.z,this.w])}copyView(){return new $Lylz$export$Vec4(this.buf,this.offset,this.stride)}empty(){return new $Lylz$export$Vec4}eqDelta($,e=x){return Ld(this,$,e)}toJSON(){return[this.x,this.y,this.z,this.w]}toString(){return`[${this.x}, ${this.y}, ${this.z}, ${this.w}]`}}d.X_AXIS=new d(jd),d.Y_AXIS=new d(id),d.Z_AXIS=new d(gd),d.MIN=new d(qd),d.MAX=new d(od),d.ZERO=new d(ld),d.ONE=new d(md),jc(d.prototype,["x","y","z","w"]);const[_,Ib,zh,yh]=t(Xc,oc);const[Ea,xh,wh,vh]=pd("*");const $d=($,d,i,u,c,r,o)=>_($,_($,Ea($,d,c),i,r),u,o);const _d=($,d,i,u,c,r,o,t,m)=>_($,_($,_($,Ea($,d,r),i,o),u,t),c,m);const[ae,Ta,ce,uh]=Ra("+");const Cb=($,t,e,p)=>(!$&&($=[]),$[0]=t,$[1]=e,$[2]=p,$);const zb=($,t,e,p,s)=>(!$&&($=[]),$[0]=t,$[1]=e,$[2]=p,$[3]=s,$);const xb=($,t,e,p,s,o,r)=>(!$&&($=[]),$[0]=t,$[1]=e,$[2]=p,$[3]=s,$[4]=o,$[5]=r,$);const B=($,...t)=>{!$&&($=[]);for(let e=0,p=t.length;e<p;e++)$[e]=t[e];return $};const qb=($,s,r)=>Cb($||s,s[1]*r[2]-s[2]*r[1],s[2]*r[0]-s[0]*r[2],s[0]*r[1]-s[1]*r[0]);const Ha=$=>Ia.add($,y($,Fc,"a,b",void 0,null,"+","return ",";")),Ia=v();Ia.default(ea(Tc,"a,b",void 0,"s","let s=0;"));const th=Ha(2);const Ja=Ha(3);const sh=Ha(4);const Na=$=>na.add($,y($,([$])=>`${$}*${$}`,"a","a",null,"+","return ",";")),na=v();na.default(ea(([$])=>`sum+=${$}*${$};`,"a",void 0,"sum","let sum=0;"));const rh=Na(2);const qh=Na(3);const ph=Na(4);const te=$=>Math.sqrt(na($));const Kc=Math.cos,Ec=Math.sin,Dc=v(1);const xe=Dc.add(2,($,r,a=Cd)=>Ib($||r,a,Ma(r[1]),r[0]));const oh=Dc.add(3,($,r,a=Pa)=>{const e=r[0],t=r[1],s=r[2],g=Kc(t);return Cb($||r,e*g*Kc(s)+a[0],e*g*Ec(s)+a[1],e*Ec(t)+a[2])});const[b,Ae,nh,mh]=t(eb,"o,a",void 0,"o",1,hc);const Oa=$=>z($,"copy")?$.copy():b([],$);const l=$=>$.map(Oa);const ja=($,r,e=1)=>{!$&&($=r);const n=te(r);return n>=x?Ea($,r,e/n):$!==r?b($,r):$};const[Qa,lh,Ie,kh]=Ra("-");const tc=([$,y])=>`t=${$}-${y};s+=t*t;`,Sa=$=>O.add($,y($,tc,"a,b",void 0,"s","","let t,s=0;")),O=v();O.default(ea(tc,"a,b",void 0,"s","let t,s=0;"));const jh=Sa(2);const ih=Sa(3);const ah=Sa(4);const nc=($,t)=>Math.sqrt(O($,t));const lc=($,o,t,C)=>$*o+t*C;const dc=($,o,t,C,r,e)=>$*o+t*C+r*e;const gb=$=>y($,Fc,`o,a,${ic}`,"o,a",null,"+","return ",";",!0),p=gb(2);const r=gb(3);const e=gb(4);const[Sg,Rg,Qg,Pg]=t(Vc,"a,n","a","a",0,"");const Vb=e=>new Array(e).fill(0);const af=e=>z(e,"empty")?e.empty():Vb(e.length);const[Og,cf,Ng,Mg]=t(Wc,$c);const ff=($,r,e,i,t,o)=>{const x=1-o,c=x*x,h=o*o;return _d($,r,e,i,t,c*x,3*c*o,3*h*x,h*o)};const gf=($,r,c,t,u)=>{const a=1-u;return $d($,r,c,t,a*a,2*a*u,u*u)};const[Ua,Lg,Kg,Kh]=t(Yc,oc);const[Jg,nf,Ig,Hg]=Ra("*");const Va=(t,$)=>(r,e,o)=>{r?r!==e&&b(r,e):r=e;const a=Math.sin(o),X=Math.cos(o),Y=e[t],V=e[$];return r[t]=Y*X-V*a,r[$]=Y*a+V*X,r},Gg=Va(1,2);const Fg=Va(2,0);const tf=Va(0,1);const uf=Object.freeze([1,0,0,1]);const vf=Object.freeze([1,0,0,1,0,0]);const wf=Object.freeze([1,0,0,0,1,0,0,0,1]);const xf=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);const C=v(1);const Eg=C.add(4,($,t,o)=>zb($||t,p(t,o,0,0,2),p(t,o,1,0,2),p(t,o,0,2,2),p(t,o,1,2,2)));const Dg=C.add(6,($,t,o)=>xb($||t,p(t,o,0,0,2),p(t,o,1,0,2),p(t,o,0,2,2),p(t,o,1,2,2),p(t,o,0,4,2)+t[4],p(t,o,1,4,2)+t[5]));const Cg=C.add(9,($,t,o)=>B($||t,r(t,o,0,0,3),r(t,o,1,0,3),r(t,o,2,0,3),r(t,o,0,3,3),r(t,o,1,3,3),r(t,o,2,3,3),r(t,o,0,6,3),r(t,o,1,6,3),r(t,o,2,6,3)));const Bg=C.add(16,($,t,o)=>B($||t,e(t,o,0,0,4),e(t,o,1,0,4),e(t,o,2,0,4),e(t,o,3,0,4),e(t,o,0,4,4),e(t,o,1,4,4),e(t,o,2,4,4),e(t,o,3,4,4),e(t,o,0,8,4),e(t,o,1,8,4),e(t,o,2,8,4),e(t,o,3,8,4),e(t,o,0,12,4),e(t,o,1,12,4),e(t,o,2,12,4),e(t,o,3,12,4)));const g=lc,Nb=dc;const Ff=$=>{const[t,r,e,o,p,y,L,S,T,d,s,a,v,x,f,n]=$;return[g(t,y,-r,p),g(t,L,-e,p),g(t,S,-o,p),g(r,L,-e,y),g(r,S,-o,y),g(e,S,-o,L),g(T,x,-d,v),g(T,f,-s,v),g(T,n,-a,v),g(d,f,-s,x),g(d,n,-a,x),g(s,n,-a,f)]};const Gf=$=>Nb($[0],$[11],-$[1],$[10],$[2],$[9])+Nb($[3],$[8],-$[4],$[7],$[5],$[6]);const Hf=(t,o,r,$,C,e,u)=>{const s=1/(r-o),n=1/(C-$),p=1/(u-e);return B(t||[],2*e*s,0,0,0,0,2*e*n,0,0,(r+o)*s,(C+$)*n,-(u+e)*p,-1,0,0,-u*e*2*p,0)};const If=(t,o,r,$)=>{const C=r*Math.tan(t*wd/2),e=C*o;return{left:-e,right:e,bottom:-C,top:C,near:r,far:$}};const Wa=$=>b.add($,y($,eb,"o,a")),oa=b;const Ag=Wa(6);const zg=Wa(9);const yg=Wa(16);const ma=v();const xg=ma.add(4,$=>oa($,uf));const vg=ma.add(6,$=>oa($,vf));const Rf=ma.add(9,$=>oa($,wf));const Z=ma.add(16,$=>oa($,xf));const f=lc,A=dc,$=v(1);const sg=$.add(4,($,e)=>{const[p,r,t,C]=e;let O=f(p,C,-r,t);if(0!==O)return O=1/O,zb($||e,C*O,-r*O,-t*O,p*O)});const _g=$.add(6,($,e)=>{const[p,r,t,C,O,v]=e;let o=f(p,C,-r,t);if(0!==o)return o=1/o,xb($||e,C*o,-r*o,-t*o,p*o,f(t,v,-C,O)*o,f(r,O,-p,v)*o)});const Yf=$.add(9,($,e)=>{const[p,r,t,C,O,v,o,d,n]=e,a=f(n,O,-v,d),i=f(v,o,-n,C),s=f(d,C,-O,o);let x=A(p,a,r,i,t,s);if(0!==x)return x=1/x,B($||e,a*x,f(-n,r,t,d)*x,f(v,r,-t,O)*x,i*x,f(n,p,-t,o)*x,f(-v,p,t,C)*x,s*x,f(-d,p,r,o)*x,f(O,p,-r,C)*x)});const rg=$.add(16,($,e)=>{const p=Ff(e);let r=Gf(p);if(0===r)return;r=1/r;const[t,C,O,v,o,d,n,a,i,s,x,c,m,f,u,l]=e,[q,Q,g,h,F,S,b,j,k,w,y,z]=p;return B($||e,A(d,z,-n,y,a,w)*r,A(-C,z,O,y,-v,w)*r,A(f,S,-u,F,l,h)*r,A(-s,S,x,F,-c,h)*r,A(-o,z,n,k,-a,j)*r,A(t,z,-O,k,v,j)*r,A(-m,S,u,g,-l,Q)*r,A(i,S,-x,g,c,Q)*r,A(o,y,-d,k,a,b)*r,A(-t,y,C,k,-v,b)*r,A(m,F,-f,g,l,q)*r,A(-i,F,s,g,-c,q)*r,A(-o,w,d,j,-n,b)*r,A(t,w,-C,j,O,b)*r,A(-m,h,f,Q,-u,q)*r,A(i,h,-s,Q,x,q)*r)});const $f=($,r,o,i)=>{const t=ja(null,Ie([],r,o)),p=ja(null,qb([],i,t)),O=ja(null,qb([],t,p));return B($||[],p[0],O[0],t[0],0,p[1],O[1],t[1],0,p[2],O[2],t[2],0,-Ja(r,p),-Ja(r,O),-Ja(r,t),1)};const _f=($,r)=>(!$&&($=[]),qa($,r),qa($,r,3,4),qa($,r,6,8));const ag=(t,$)=>B(t||[],$[0],$[3],$[6],$[1],$[4],$[7],$[2],$[5],$[8]);const bg=($,r)=>ag(null,Yf(null,_f($,r)));const cg=(r,$,o,t,e,h,v)=>{const p=1/(o-$),s=1/(e-t),A=1/(v-h);return B(r||[],2*p,0,0,0,0,2*s,0,0,0,0,-2*A,0,-($+o)*p,-(e+t)*s,-(v+h)*A,1)};const dg=(r,t,e,$,p)=>{const f=If(t,e,$,p);return Hf(r,f.left,f.right,f.bottom,f.top,f.near,f.far)};const eg=(t,$,D=Pa)=>{const[r,o,e,T]=$,a=r+r,p=o+o,P=e+e,s=r*a,u=r*p,c=r*P,i=o*p,n=o*P,q=e*P,x=T*a,M=T*p,m=T*P;return B(t||[],1-i-q,u+m,c-M,0,u-m,1-s-q,n+x,0,c+M,n-x,1-s-i,0,D[0],D[1],D[2],1)};const fg=($,e)=>(e=u(e)?[e,e,e]:e,B($||[],e[0],0,0,0,0,e[1],0,0,0,0,e[2],0,0,0,0,void 0!==e[3]?e[3]:1));class Xa{constructor(){this._position=new a,this._rotation=new d(Oa(cd)),this._scale=new a(Oa(Xb)),this._model=[],this._modelDirty=!0,this._rt=[],this.modelView=[],this.normal=[],this.children=[],Z(this.modelView),Rf(this.normal),Z(this._model),Z(this._rt)}set position(t){b(this._position,t),this._modelDirty=!0}get position(){return this._position}set rotation(t){this._rotation=t,this._modelDirty=!0}get rotation(){return this._rotation}set scale(t){b(this._scale,t),this._modelDirty=!0}get scale(){return this._scale}get model(){return this._modelDirty&&(C(this._model,eg(this._rt,this.rotation,this.position),fg(this._model,this.scale)),this._modelDirty=!1),this._model}updateMatrices(t){C(this.modelView,t,this.model),bg(this.normal,this.modelView)}add(t){t.parent=this,this.children.push(t)}}class hg extends Xa{}class ig extends Xa{constructor(e,t,$=4){super(),this.attribPool=e,this.material=t,this.type=$,this.attribs=L(D(([t,{size:$}])=>[t,{numComponents:$,data:[...Mc(e.attribValues(t))]}]),zc(),Pc(e.specs))}}var jg={},vb="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(vb){var rb=new Uint8Array(16);jg=function(){return vb(rb),rb}}else{var mb=new Array(16);jg=function(){for(var r,t=0;t<16;t++)0==(3&t)&&(r=4294967296*Math.random()),mb[t]=r>>>((3&t)<<3)&255;return mb}}for(var ng={},jb=[],Ba=0;Ba<256;++Ba)jb[Ba]=(Ba+256).toString(16).substr(1);function Zf($,r){var x=r||0,c=jb;return[c[$[x++]],c[$[x++]],c[$[x++]],c[$[x++]],"-",c[$[x++]],c[$[x++]],"-",c[$[x++]],c[$[x++]],"-",c[$[x++]],c[$[x++]],"-",c[$[x++]],c[$[x++]],c[$[x++]],c[$[x++]],c[$[x++]],c[$[x++]]].join("")}ng=Zf;var Xf={};function Wf(r,$,v){var a=$&&v||0;"string"==typeof r&&($="binary"===r?new Array(16):null,r=null);var e=(r=r||{}).random||(r.rng||jg)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,$)for(var n=0;n<16;++n)$[a+n]=e[n];return $||ng(e)}Xf=Wf;class Vf{constructor(r,t,$={}){var $A0Zv$$interop$default=aa(Xf);this.vert=r,this.frag=t,this.uniforms=$,this.id=$A0Zv$$interop$default.d()}}class Sf{constructor(r,t){this.gl=r,this.programInfos={},this.objects=[],t.children.forEach(t=>{const o=t,e=this.getProgram(o.material),a=h.createBufferInfoFromArrays(r,o.attribs),s=h.createVertexArrayInfo(r,e,a);this.objects.push({programInfo:e,vertexArrayInfo:s,mesh:o,type:o.type,uniforms:{}})})}draw(r,t=null){const o=this.gl;o.viewport(0,0,r.width,r.height),h.bindFramebufferInfo(o,t),this.objects.forEach(t=>{const{mesh:o}=t;o.updateMatrices(r.view),t.uniforms=Object.assign({},o.material.uniforms,{matModel:o.model,matView:r.view,matProj:r.projection,matModelView:o.modelView,matNormal:o.normal})}),h.drawObjectList(o,this.objects)}getProgram({id:r,vert:t,frag:o}){return this.programInfos[r]||(this.programInfos[r]=h.createProgramInfo(this.gl,[t,o])),this.programInfos[r]}}class yc extends Xa{constructor(t,e){super(),this._view=[],this._projection=[],this.width=t,this.height=e,Z(this._view),Z(this._projection)}set width(t){this._width=t}get width(){return this._width}set height(t){this._height=t}get height(){return this._height}get projection(){return this._projection}get view(){return this._view}}class wg extends yc{constructor(){super(...arguments),this._fov=30,this._near=.01,this._far=1e3,this._projectionCached=!1,this._target=new a,this._up=new a([0,1,0]),this._viewCached=!1}set width(t){this._width=t,this._projectionCached=!1}get width(){return this._width}set height(t){this._height=t,this._projectionCached=!1}get height(){return this._height}set fov(t){this._fov=t,this._projectionCached=!1}get fov(){return this._fov}get aspect(){return this.width/this.height}set near(t){this._near=t,this._projectionCached=!1}get near(){return this._near}set far(t){this._far=t,this._projectionCached=!1}get far(){return this._far}set position(t){t.eqDelta(this._position)||(b(this._position,t),this._viewCached=!1,this._modelDirty=!0)}get position(){return this._position}set target(t){t.eqDelta(this._target)||(b(this._target,t),this._viewCached=!1)}get target(){return this._target}set up(t){t.eqDelta(this._up)||(b(this._up,t),this._viewCached=!1)}get up(){return this._up}get pivotDistance(){return nc(this.target,this.position)}get projection(){return this._projectionCached||(dg(this._projection,this.fov,this.aspect,this.near,this.far),this._projectionCached=!0),this._projection}get view(){return this._viewCached||($f(this._view,this.position,this.target,this.up),this._viewCached=!0),this._view}}class Pf extends yc{constructor(){super(...arguments),this.left=-1,this.right=1,this.top=1,this.bottom=-1,this.near=0,this.far=1e3,this._projectionCached=!1}get projection(){return this._projectionCached||(cg(this._projection,this.left,this.right,this.bottom,this.top,this.near,this.far),this._projectionCached=!0),this._projection}}var Nf,Mf;(function($){$[$.U8=0]="U8",$[$.U8C=1]="U8C",$[$.I8=2]="I8",$[$.U16=3]="U16",$[$.I16=4]="I16",$[$.U32=5]="U32",$[$.I32=6]="I32",$[$.F32=7]="F32",$[$.F64=8]="F64"})(Mf||(Nf=Mf={},Nf));const S={0:1,1:1,2:1,3:2,4:2,5:4,6:4,7:4,8:8};const E=($,d)=>(d--,$+d&~d);const Bf={0:(r,a,n)=>new Uint8Array(r,a,n),1:(r,a,n)=>new Uint8ClampedArray(r,a,n),2:(r,a,n)=>new Int8Array(r,a,n),3:(r,a,n)=>new Uint16Array(r,a,n),4:(r,a,n)=>new Int16Array(r,a,n),5:(r,a,n)=>new Uint32Array(r,a,n),6:(r,a,n)=>new Int32Array(r,a,n),7:(r,a,n)=>new Float32Array(r,a,n),8:(r,a,n)=>new Float64Array(r,a,n)},ka=(r,a,n,$)=>Bf[r](a,n,$);class qc{constructor(t={}){this.buf=t.buf?t.buf:new ArrayBuffer(t.size),this.u8=new Uint8Array(this.buf),this.start=null!=t.start?E(Math.max(t.start,8),8):8,this.end=null!=t.end?Math.min(t.end,this.buf.byteLength):this.buf.byteLength,this.start>=this.end&&ca(`invalid address range (0x${this.start.toString(16)} - 0x${this.end.toString(16)})`),this.top=this.start,this.doCompact=!1!==t.compact,this.doSplit=!1!==t.split,this.minSplit=t.minSplit||16,this._free=null,this._used=null}stats(){const t=t=>{let e=0,i=0;for(;t;)e++,i+=t.size,t=t.next;return{count:e,size:i}},e=t(this._free);return{free:e,used:t(this._used),top:this.top,available:this.end-this.top+e.size,total:this.buf.byteLength}}callocAs(t,e){const i=this.mallocAs(t,e);return i&&i.fill(0),i}mallocAs(t,e){const i=this.malloc(e*S[t]);return i?ka(t,this.buf,i,e):null}calloc(t){const e=this.malloc(t);return e&&this.u8.fill(0,e,E(e+t,8)),e}malloc(t){if(t<=0)return 0;t=E(t,8);let e=this.top;const i=this.end;let r=this._free,s=null;for(;r;){const n=r.addr+r.size>=e;if(n||r.size>=t){if(n&&r.addr+t>i)return 0;if(s?s.next=r.next:this._free=r.next,r.next=this._used,this._used=r,n)r.size=t,this.top=r.addr+t;else if(this.doSplit){const e=r.size-t;e>=this.minSplit&&(r.size=t,this.insert({addr:r.addr+t,size:e,next:null}),this.doCompact&&this.compact())}return r.addr}s=r,r=r.next}const n=E(e,8);return(e=n+t)<=i?(r={addr:n,size:t,next:this._used},this._used=r,this.top=e,n):0}realloc(t,e){if(e<=0)return 0;e=E(e,8);let i,r=this._used,s=0;for(;r;){if(r.addr===t){const n=(i=t+r.size)>=this.top;if(e<=r.size){if(this.doSplit){const i=r.size-e;i>=this.minSplit?(r.size=e,this.insert({addr:r.addr+e,size:i,next:null}),this.doCompact&&this.compact()):n&&(this.top=t+e)}else n&&(this.top=t+e);s=t;break}if(n&&t+e<this.end){r.size=e,this.top=t+e,s=t;break}this.free(t),s=this.malloc(e);break}r=r.next}return s&&s!==t&&this.u8.copyWithin(s,t,i),s}reallocArray(t,e){if(t.buffer!==this.buf)return null;const i=this.realloc(t.byteOffset,e*t.BYTES_PER_ELEMENT);return i?new t.constructor(this.buf,i,e):null}free(t){let e;if(u(t))e=t;else{if(t.buffer!==this.buf)return!1;e=t.byteOffset}let i=this._used,r=null;for(;i;){if(i.addr===e)return r?r.next=i.next:this._used=i.next,this.insert(i),this.doCompact&&this.compact(),!0;r=i,i=i.next}return!1}freeAll(){this._free=null,this._used=null,this.top=this.start}release(){return delete this._free,delete this._used,delete this.u8,delete this.buf,delete this.top,delete this.start,delete this.end,!0}compact(){let t,e,i,r=this._free,s=!1;for(;r;){for(i=r,e=r.next;e&&i.addr+i.size===e.addr;)i=e,e=e.next;if(i!==r){const t=i.addr-r.addr+i.size;r.size=t;const e=i.next;let n=r.next;for(;n!==i.next;){const t=n.next;n.next=null,n=t}r.next=e,s=!0}r.addr+r.size>=this.top&&(this.top=r.addr,t?t.next=r.next:this._free=r.next),t=r,r=r.next}return s}insert(t){let e=this._free,i=null;for(;e&&!(t.addr<=e.addr);)i=e,e=e.next;i?i.next=t:this._free=t,t.next=e}}var sf,rf;(function($){$[$.I8=5120]="I8",$[$.U8=5121]="U8",$[$.I16=5122]="I16",$[$.U16=5123]="U16",$[$.I32=5124]="I32",$[$.U32=5125]="U32",$[$.F32=5126]="F32"})(rf||(sf=rf={},sf));const pc={5120:2,5121:0,5122:4,5123:3,5124:6,5124:6,5125:5,5126:7};const Q=$=>{const e=pc[$];return void 0!==e?e:$};class mf{constructor(t){t=Object.assign({resizable:!0},t),this.pool=t.mem instanceof qc?t.mem:new qc(t.mem),this.capacity=t.num,this.resizable=t.resizable,this.specs={},this.attribs={},this.order=[],this.byteStride=1,this.maxAttribSize=1,t.attribs&&this.addAttribs(t.attribs,!0)}bytes(){return new Uint8Array(this.pool.buf,this.addr,this.capacity*this.byteStride)}release(t=!0){return t&&this.pool&&this.pool.release(),delete this.pool,delete this.attribs,delete this.specs,!0}addAttribs(t,e=!1){const[s,i]=this.computeStride(t);if(this.maxAttribSize=i,s!=this.byteStride&&this.realign(s),this.validateSpecs(t,s),this.byteStride=s,e){const t=this.pool.malloc(this.capacity*this.byteStride);c(t>0,"out of memory"),this.addr=t}this.initDefaults(t)}attribValue(t,e){const s=this.specs[t];if(c(!!s,`invalid attrib: ${t}`),!(e>=this.capacity))return e*=s.stride,s.size>1?this.attribs[t].subarray(e,e+s.size):this.attribs[t][e]}*attribValues(t){const e=this.attribs[t];c(!!e,`invalid attrib: ${t}`);const s=this.specs[t],i=s.stride,r=s.size;if(r>1)for(let a=0,o=0,p=this.capacity;a<p;a++,o+=i)yield e.subarray(o,o+r);else for(let a=0,o=this.capacity;a<o;a++)yield e[a*i]}setAttribValue(t,e,s){const i=this.specs[t];c(!!i,`invalid attrib: ${t}`),this.ensure(e+1);const r=this.attribs[t];e*=i.stride;const a="number"==typeof s;return c(()=>!a&&i.size>1||a&&1===i.size,`incompatible value for attrib: ${t}`),a?r[e]=s:(c(s.length<=i.size,`wrong attrib val size, expected ${i.size}, got ${s.length}`),r.set(s,e)),this}setAttribValues(t,e){const s=this.specs[t];c(!!s,`invalid attrib: ${t}`);const i=e.length,r=e[0],a=s.stride;this.ensure(i);const o=this.attribs[t],p="number"==typeof r;if(c(()=>!p&&s.size>1||p&&1===s.size,`incompatible value(s) for attrib: ${t}`),p)for(let h=0;h<i;h++)o[h*a]=e[h];else{c(r.length<=s.size,`wrong attrib val size, expected ${s.size}, got ${r.length}`);for(let t=0;t<i;t++)o.set(e[t],t*a)}}removeAttrib(t){if(!this.attribs[t])return!1;delete this.attribs[t],delete this.specs[t],this.updateOrder();const[e,s]=this.computeStride(this.specs,!1);this.maxAttribSize=s,this.realign(e)}ensure(t,e=!1){if(t<=this.capacity)return;c(this.resizable,"pool resizing disabled");const s=this.pool.realloc(this.addr,t*this.byteStride);c(s>0,"out of memory");for(let i in this.specs){const e=this.specs[i],r=ka(Q(e.type),this.pool.buf,s+(e.byteOffset||0),(t-1)*e.stride+e.size);r.set(this.attribs[i]),this.attribs[i]=r}e&&this.setDefaults(this.specs,this.capacity,t),this.addr=s,this.capacity=t}computeStride(t,e=!0){let s=e?this.byteStride:1,i=e?this.maxAttribSize:1;for(let r in t){const e=t[r],a=S[Q(e.type)];i=Math.max(i,a),s=Math.max(s,e.byteOffset+e.size*a)}return[E(s,i),i]}validateSpecs(t,e=this.byteStride){for(let s in t){c(!this.attribs[s],`attrib: ${s} already exists`);const i=t[s];c(i.size>0,`attrib ${s}: illegal or missing size`);const r=S[Q(i.type)];null==i.default&&(i.default=i.size>1?Vb(i.size):0);const a="number"==typeof i.default;c(()=>!a&&i.size===i.default.length||a&&1===i.size,`attrib ${s}: incompatible default value, expected size ${i.size}`),c(i.byteOffset%r==0,`attrib ${s}: invalid offset, expected multiple of ${r}`),i.stride=e/r,this.specs[s]=i}this.updateOrder()}updateOrder(){this.order=Object.keys(this.specs).sort((t,e)=>this.specs[t].byteOffset-this.specs[e].byteOffset)}initDefaults(t,e=0,s=this.capacity){for(let i in t){const e=t[i];this.attribs[i]=ka(Q(e.type),this.pool.buf,this.addr+(e.byteOffset||0),(this.capacity-1)*e.stride+e.size)}this.setDefaults(t,e,s)}setDefaults(t,e=0,s=this.capacity){for(let i in t){const r=t[i];if(null==r.default)continue;const a=this.attribs[i],o=r.stride,p=r.default;if("number"==typeof p)for(let t=e;t<s;t++)a[t*o]=p;else for(let t=e;t<s;t++)a.set(p,t*o)}}realign(t){if(0===this.order.length||t===this.byteStride)return;console.warn(`realigning ${this.byteStride} -> ${t}...`);const e=t>this.byteStride;let s=this.addr;if(e)c(this.resizable,"pool resizing disabled"),s=this.pool.realloc(this.addr,this.capacity*t),c(s>0,"out of memory");else if(!this.resizable)return;const i=s===this.addr,r=this.capacity-1,a=this.attribs,o={},p=this.specs,h=e?[...this.order].reverse():this.order;for(let $ in p){const e=p[$],i=Q(e.type),a=t/S[i];o[$]=[ka(i,this.pool.buf,s+e.byteOffset,r*a+e.size),a]}for(let $ of t<this.byteStride?ga(r+1):ga(r,-1,-1))for(let t of h){const s=p[t],r=s.stride,h=a[t],[l,c]=o[t];if("number"==typeof s.default)l[$*c]=h[$*r];else{const t=$*r;i?(e?l:h).copyWithin($*c,t,t+s.size):l.set(h.subarray(t,t+s.size),$*c)}}this.addr=s,this.byteStride=t;for(let $ in o){const t=o[$];a[$]=t[0],p[$].stride=t[1]}}}const kf=(t,$,o,p,r,e,i=[])=>Za(t,$,o,Qb(e,p,r),i);const Za=(t,$,o,p,r=[])=>Ta(null,tf(null,nf(r,Ma(p),$),o),t);let q=20;const Yb=(t,$,o)=>{const e=Qa([],o,$),s=na(e);return s>1e-6?Ia(Qa([],t,$),e)/s:void 0};const Tb=(t,$,o,e,s=!1,r=0)=>{const g=Yb(t,$,o);if(void 0!==g&&(!s||g>=r&&g<=1-r))return e=e||af(t),g<=0?b(e,$):g>=1?b(e,o):Ua(e,$,o,g)};class ua{constructor(t,i=!1){i?(this.points=t.slice(),this.points.push(t[0])):this.points=t,this.buildIndex()}totalLength(){return this.index[this.index.length-1]}pointAt(t){const i=this.points,s=i.length-1;if(s<0)return;if(0===s||t<=0)return i[0];if(t>=1)return i[s];const e=this.index,n=t*e[s];for(let r=1;r<=s;r++)if(e[r]>=n)return Ua([],i[r-1],i[r],(n-e[r-1])/(e[r]-e[r-1]))}closestPoint(t){const i=this.points,s=[],e=[];let n=1/0;for(let r=0,o=i.length-1;r<o;r++)if(Tb(t,i[r],i[r+1],s)){const i=O(t,s);i<n&&(n=i,b(e,s))}return e}closestT(t){const i=this.points,s=this.index,e=[],n=[];let r,o=1/0;for(let $=0,h=s.length-1;$<h;$++)if(Tb(t,i[$],i[$+1],e)){const i=O(t,e);i<o&&(o=i,r=$,b(n,e))}return Qb(Yb(t,i[r],i[r+1]),s[r],s[r+1])/this.totalLength()}segmentAt(t){let i=this.indexAt(t);if(void 0!==i)return i=Math.max(1,i),[this.points[i-1],this.points[i]]}tangentAt(t,i=1){const s=this.segmentAt(t);return s?ja(null,Qa([],s[1],s[0]),i):void 0}splitAt(t){if(t<=0||t>=1)return[this.points];const i=this.pointAt(t),s=Math.max(1,this.indexAt(t)),e=this.points.slice(0,s),n=this.points.slice(s);return pa(e[s-1],i)||e.push(i),pa(n[0],i)||n.unshift(i),[e,n]}splitNear(t){return this.splitAt(this.closestT(t))}indexAt(t){const i=this.points.length-1;if(i<0)return;if(0===i||t<=0)return 0;if(t>=1)return i;const s=this.index,e=t*s[i];for(let n=1;n<=i;n++)if(s[n]>=e)return n}sampleUniform(t,i=!1,s=[]){const e=this.index,n=this.points,r=this.totalLength(),o=t/r,$=e.length;for(let h=0,p=1;h<1;h+=o){const t=h*r;for(;t>=e[p]&&p<$;)p++;if(p>=$)break;const i=e[p-1];s.push(Ua([],n[p-1],n[p],(t-i)/(e[p]-i)))}return i&&s.push(b([],n[n.length-1])),s}sampleFixedNum(t,i=!1,s){return this.sampleUniform(this.totalLength()/t,i,s)}buildIndex(){const t=[0],i=this.points,s=i.length;for(let e=0,n=1;n<s;e=n,n++)t[n]=t[e]+nc(i[e],i[n]);this.index=t}}const Lb=(e,r,$=!1,t=!1)=>{if(void 0!==r){const t=new ua(e,$);return I(r)?$?r.dist?t.sampleUniform(r.dist,r.last):t.sampleFixedNum(r.num,r.last):r.dist?t.sampleUniform(r.dist,!1!==r.last):t.sampleFixedNum(r.num,!1!==r.last):t.sampleFixedNum(r||q,!$)}return t?l(e):e};const Kb=(e,$,t,r,i,p)=>{if(I(p)&&void 0!==p.dist)return new ua(Kb(e,$,t,r,i,p.num||q)).sampleUniform(p.dist,!1!==p.last);let a=i-r,h=(p=u(p)?{num:p,last:!0}:Object.assign({num:q},p)).theta?Math.round(a/p.theta):p.num;a/=h,!1!==p.last&&h++;const m=new Array(h);for(let o=0;o<h;o++)m[o]=Za(e,$,t,r+o*a);return m};class m{constructor(t,s){this.points=t,this.attribs=s}*[Symbol.iterator](){yield*this.points}}class Tg{constructor(t=[0,0,0],s=[1,1,1],r){this.pos=t,this.size=s,this.attribs=r}get type(){return 1}copy(){return new $uYqO$export$AABB(b([],this.pos),b([],this.size),Object.assign({},this.attribs))}max(){return ce([],this.pos,this.size)}}class Ug{constructor(t,s,r,i,e,$=!1,o=!1,p){this.pos=t,this.r=s,this.axis=r,this.start=i,this.end=e,this.xl=$,this.cw=o,this.attribs=p}get type(){return 2}copy(){return new $uYqO$export$Arc(b([],this.pos),b([],this.r),this.axis,this.start,this.end,this.xl,this.cw,Object.assign({},this.attribs))}equiv(t){return t instanceof $uYqO$export$Arc&&j(this.pos,t.pos)&&j(this.r,t.r)&&this.start===t.start&&this.end===t.end&&this.axis===t.axis&&this.xl===t.xl&&this.cw&&t.cw}pointAt(t,s=[]){return kf(this.pos,this.r,this.axis,this.start,this.end,t,s)}pointAtTheta(t,s=[]){return Za(this.pos,this.r,this.axis,t,s)}toHiccup(){return["path",this.attribs,[["M",this.pointAt(0)],...this.toHiccupPathSegments()]]}toHiccupPathSegments(){return[["A",this.r[0],this.r[1],this.axis,this.xl,this.cw,this.pointAt(1)]]}}class Vg{constructor(t=[0,0],s=1,r){this.pos=t,this.r=s,this.attribs=r}get type(){return 3}copy(){return new $uYqO$export$Circle(b([],this.pos),this.r,Object.assign({},this.attribs))}toHiccup(){return["circle",this.attribs,this.pos,this.r]}}class Wg extends m{get type(){return 4}copy(){return new $uYqO$export$Cubic(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["path",this.attribs,[["M",this.points[0]],...this.toHiccupPathSegments()]]}toHiccupPathSegments(){const t=this.points;return[["C",t[1],t[2],t[3]]]}}class Xg{constructor(t=[0,0],s=[1,1],r){this.pos=t,this.r=u(s)?[s,s]:s,this.attribs=r}get type(){return 6}copy(){return new $uYqO$export$Ellipse(b([],this.pos),b([],this.r),Object.assign({},this.attribs))}toHiccup(){return["ellipse",this.attribs,this.pos,this.r]}}class Yg{constructor(t,s){this.attribs=t,this.children=s||[]}get type(){return 7}*[Symbol.iterator](){yield*this.children}copy(){return new $uYqO$export$Group(Object.assign({},this.attribs),this.children.map(t=>t.copy()))}equiv(t){return t instanceof $uYqO$export$Group&&j(this.children,t.children)}toHiccup(){return["g",this.attribs,...this.children.map(t=>t.toHiccup())]}}class Zg extends m{get type(){return 8}copy(){return new $uYqO$export$Line(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["line",this.attribs,this.points[0],this.points[1]]}toHiccupPathSegments(){const[t,s]=this.points;return[t[0]===s[0]?["V",s[1]]:t[1]===s[1]?["H",s[0]]:["L",s]]}}class $g{constructor(t,s){this.segments=t||[],this.attribs=s,this.closed=!1}get type(){return 10}*[Symbol.iterator](){yield*this.segments}copy(){const t=new $uYqO$export$Path([...this.segments],Object.assign({},this.attribs));return t.closed=this.closed,t}equiv(t){return t instanceof $uYqO$export$Path&&j(this.segments,t.segments)}add(t){this.closed&&Ab("path already closed"),this.segments.push(t)}toHiccup(){let t=[];const s=this.segments,r=s.length;if(r>1){t.push(["M",s[0].point]);for(let i=1;i<r;i++)t=t.concat(s[i].geo.toHiccupPathSegments());this.closed&&t.push(["Z"])}return["path",this.attribs||{},t]}}class qg extends m{get type(){return 11}copy(){return new $uYqO$export$Points(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["points",this.attribs,this.points]}}class Pe extends m{get type(){return 13}copy(){return new $uYqO$export$Polygon(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["polygon",this.attribs,this.points]}}class bh extends m{get type(){return 15}copy(){return new $uYqO$export$Polyline(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["polyline",Object.assign({},this.attribs,{fill:"none"}),this.points]}toHiccupPathSegments(){const t=[];for(let s=this.points,r=s.length,i=1;i<r;i++)t.push(["L",s[i]]);return t}}class ch extends m{get type(){return 17}copy(){return new $uYqO$export$Quad(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["polygon",this.attribs,this.points]}}class dh extends m{get type(){return 19}copy(){return new $uYqO$export$Quadratic(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["path",this.attribs,[["M",this.points[0]],...this.toHiccupPathSegments()]]}toHiccupPathSegments(){const t=this.points;return[["Q",t[1],t[2]]]}}class eh{constructor(t,s,r){this.pos=t,this.dir=s,this.attribs=r}get type(){return 25}copy(){return new $uYqO$export$Ray(b([],this.pos),b([],this.dir),Object.assign({},this.attribs))}toHiccup(){return["line",this.attribs,this.pos,Ib([],this.pos,this.dir,1e6)]}}class fh{constructor(t=[0,0],s=[1,1],r){this.pos=t,this.size=u(s)?[s,s]:s,this.attribs=r}get type(){return 21}copy(){return new $uYqO$export$Rect(b([],this.pos),b([],this.size),Object.assign({},this.attribs))}max(){return Ta([],this.pos,this.size)}toHiccup(){return["rect",this.attribs,this.pos,this.size[0],this.size[1]]}}class gh{constructor(t=[0,0,0],s=1,r){this.pos=t,this.r=s,this.attribs=r}get type(){return 22}copy(){return new $uYqO$export$Sphere(b([],this.pos),this.r,Object.assign({},this.attribs))}toHiccup(){return["sphere",this.attribs,this.pos,this.r]}}class hh extends m{get type(){return 23}copy(){return new $uYqO$export$Triangle(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["polygon",this.attribs,this.points]}}const wc=($,e)=>{if(I(e)&&void 0!==e.dist)return new ua(wc($,e.num||q)).sampleUniform(e.dist,!1!==e.last);e=u(e)?{num:e,last:!0}:Object.assign({num:q},e);const o=[],[r,n,i,t]=$,p=1/e.num;for(let m=0;m<e.num;m++)o.push(ff([],r,n,i,t,m*p));return e.last&&o.push(b([],t)),o};const uc=($,r)=>{if(I(r)&&void 0!==r.dist)return new ua(uc($,r.num||q)).sampleUniform(r.dist,!1!==r.last);const e=[],i=1/(r=u(r)?{num:r,last:!0}:Object.assign({num:q},r)).num,[t,a,p]=$;for(let m=0;m<r.num;m++)e.push(gf([],t,a,p,m*i));return r.last&&e.push(b([],p)),e};const P=Symbol();function J(p,e){const t={},$=e?ye(e):{},r=(...e)=>{const r=p(...e),f=t[r]||va(t,$,r)||t[P];return f?f(...e):Pb(`missing implementation for: "${r.toString()}"`)};return r.add=(p,e)=>!t[p]&&(t[p]=e,!0),r.addAll=p=>{let e=!0;for(let t in p)e=r.add(t,p[t])&&e;return e},r.remove=p=>!!t[p]&&(delete t[p],!0),r.callable=(...e)=>{const r=p(...e);return!!(t[r]||va(t,$,r)||t[P])},r.isa=(p,e)=>{let t=$[p];!t&&($[p]=t=new Set),t.add(e)},r.impls=()=>{const p=new Set(Object.keys(t));for(let e in $)va(t,$,e)&&p.add(e);return t[P]&&p.add(P),p},r.rels=()=>$,r.parents=p=>$[p],r.ancestors=p=>new Set(wb([],$,p)),r}const va=(p,e,t)=>{const $=e[t];if($)for(let r of $){let t=p[r]||va(p,e,r);if(t)return t}},wb=(p,e,t)=>{const $=e[t];if($)for(let r of $)p.push(r),wb(p,e,r);return p},ye=p=>{const e={};for(let t in p){const $=p[t];e[t]=$ instanceof Set?$:new Set($)}return e};const X=i=>i.type;const k=J(X);k.addAll({2:($,r)=>Kb($.pos,$.r,$.axis,$.start,$.end,r),3:($,r=q)=>{const e=$.pos,t=$.r;let[i,o]=Mb(r,t);const s=la/i;o&&i++;const p=new Array(i);for(let c=0;c<i;c++)p[c]=xe(null,[t,c*s],e);return p},4:($,r)=>wc($.points,r),6:($,r=q)=>{const e=[],t=$.pos,i=$.r;let[o,s]=Mb(r,Math.max($.r[0],$.r[1]));const p=la/o;s&&o++;for(let c=0;c<o;c++)e[c]=cf([],t,Ma(c*p),i);return e},7:({children:$})=>$.reduce(($,r)=>$.concat(k(r)),[]),10:($,r)=>{const e=u(r)?{num:r}:r;let t=[];for(let i=$.segments,o=i.length-1,s=0;s<=o;s++){const r=i[s];r.geo&&(t=t.concat(k(r.geo,Object.assign({},e,{last:s===o&&!$.closed}))))}return t},11:$=>$.points,13:($,r)=>Lb($.points,r,!0),15:($,r)=>Lb($.points,r),19:($,r)=>uc($.points,r),21:($,r)=>{const e=$.pos,t=Ta([],e,$.size),i=[Ae([],e),[t[0],e[1]],t,[e[0],t[1]]];return null!=r?k(new Pe(i),r):i}}),k.isa(8,15),k.isa(17,13),k.isa(23,13);const Mb=($,r)=>u($)?[$,!1]:[$.theta?Math.floor(la/$.theta):$.dist?Math.floor(la/($.dist/r)):$.num||q,!0===$.last];function lb(...e){return L(Gc(M(()=>[e[0]],(e,$)=>L(ba($),sc(),e))),Bc(),da(e[1])?Oc(e[1],e[2]||1):e[1])}const fb=J(X);fb.add(P,(t,e)=>lb(k(t),e));const de=o=>3==o.length?[[o[0],o[1],o[2]]]:4==o.length?[[o[0],o[1],o[2]],[o[0],o[2],o[3]]]:void 0;class Zd extends m{constructor(o,s,t){super(o,t),this.faces=s}get type(){return 14}copy(){return new $I1os$export$Polygon3(l(this.points),this.faces,Object.assign({},this.attribs))}toHiccup(){return["polygon3",this.attribs,this.points]}}const Yd=[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]];class Xd extends m{constructor(o=Yd,s){super(o,s)}get type(){return 18}copy(){return new $I1os$export$Quad3(l(this.points),Object.assign({},this.attribs))}toHiccup(){return["polygon",this.attribs,this.points]}}const $b=J(X);$b.addAll({1:(o,s)=>{const[t,$,e,r,i,p,a,n]=k(o,s);return[[e,r,n,a],[t,$,p,i],[i,p,a,n],[t,r,e,$],[$,e,a,p],[t,i,n,r]]},18:(o,s)=>[o.points]}),k.addAll({1:(o,s)=>{const t=o.pos,$=ae([],t,o.size);return[t,[t[0],t[1],$[2]],[$[0],t[1],$[2]],[$[0],t[1],t[2]],[t[0],$[1],t[2]],[t[0],$[1],$[2]],$,[$[0],$[1],t[2]]]},18:(o,s)=>o.points});const ha=J(X);ha.add(12,(o,s)=>new Zd(k(o,s),$b(o,s),Object.assign({},o.attribs))),ha.isa(1,12),ha.isa(18,12),fb.add(14,(o,s)=>[...ba(o=>lb(o,s),o.faces)]);const rc=J(X);rc.addAll({18:(o,s=[de])=>{const t=fb(ha(o),s),$=new mf({num:3*t.length,mem:{size:512},attribs:{position:{type:5126,size:3,byteOffset:0},texcoord:{type:5126,size:2,byteOffset:3*S[pc[5126]]}}});return $.setAttribValues("position",[...ba(o=>o,t)]),$.setAttribValues("texcoord",[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]),$}});var Jd={};Jd="#define GLSLIFY 1\nuniform mat4 matModelView;\nuniform mat4 matProj;\n\nattribute vec3 position;\nattribute vec2 texcoord;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = texcoord;\n\n  gl_Position = matProj * matModelView * vec4(position, 1.0);\n}";var Hd={};Hd="#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\nuniform vec2 scale;\nuniform float freq;\nuniform float iter;\nuniform float time;\nuniform sampler2D permutation;\nuniform sampler2D grads;\n\nvarying vec2 vUv;\n\nconst float PI = 3.14159265359;\nconst vec3 HARU = vec3(0.14,0.37,0.03);\n\nfloat fade(float t)\n{\n  return t*t*t*(t*(t*6.-15.)+10.);// new curve\n}\nfloat perm(float x)\n{\n  return texture2D(permutation,vec2(x/256.,0)).r*256.;\n}\nfloat grad(float x,vec3 p)\n{\n  return dot(texture2D(grads,vec2(x,0)).rgb,p);\n}\nfloat lerp(float a,float b,float c)\n{\n  return mix(a,b,c);\n}\nfloat snoise(vec3 p)\n{\n  vec3 P=mod(floor(p),256.);\n  p-=floor(p);\n  vec3 f=vec3(fade(p.x),fade(p.y),fade(p.z));\n  float A=perm(P.x)+P.y;\n  float AA=perm(A)+P.z;\n  float AB=perm(A+1.)+P.z;\n  float B=perm(P.x+1.)+P.y;\n  float BA=perm(B)+P.z;\n  float BB=perm(B+1.)+P.z;\n\n  return lerp(\n    lerp(lerp(grad(perm(AA),p),\n    grad(perm(BA),p+vec3(-1.,0.,0.)),f.x),\n    lerp(grad(perm(AB),p+vec3(0.,-1.,0.)),\n    grad(perm(BB),p+vec3(-1.,-1.,0.)),f.x),f.y),\n    lerp(lerp(grad(perm(AA+1.),p+vec3(0.,0.,-1.)),\n    grad(perm(BA+1.),p+vec3(-1.,0.,-1.)),f.x),\n    lerp(grad(perm(AB+1.),p+vec3(0.,-1.,-1.)),\n    grad(perm(BB+1.),p+vec3(-1.,-1.,-1.)),f.x),f.y),\n  f.z);\n}\n\nvec2 disp(vec2 uv,float f){\n  float r=.10;\n  float v=snoise(vec3(uv/scale*100.,time));\n\n  v*=f;\n  return uv+vec2(r*cos(v),r*sin(v));\n}\n\nvoid main(){\n  vec2 uv=vUv;\n\n  float freqStep=freq/iter;\n\n  if(iter>=1.){uv=disp(uv,freqStep);}\n  if(iter>=2.){uv=disp(uv,freqStep);}\n  if(iter>=3.){uv=disp(uv,freqStep);}\n  if(iter>=4.){uv=disp(uv,freqStep);}\n  if(iter>=5.){uv=disp(uv,freqStep);}\n\n  vec3 color=vec3(uv,.8);\n\n  float bri = (color.r + color.g + color.b) / 3.0;\n  // color = vec3(bri + .9) * HARU;\n  color = vec3(bri + 0.1);\n\n  gl_FragColor=vec4(color,1.);\n}";const Gd=new Uint8Array([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]),Ed=new Uint8Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1,1,1,0,0,-1,1,-1,1,0,0,-1,-1]);class Bd extends Id{set params(e){let r=this.mat.uniforms;r.scale=e.scale,r.freq=e.freq,r.iter=e.iter,this.speed=e.speed}init(e){super.init(e);const r=e.canvas.clientWidth,t=e.canvas.clientHeight;this.camera=new Pf(r,t),this.texPerm=h.createTexture(e,{src:Gd,format:e.LUMINANCE,width:256,height:1,wrap:e.REPEAT,minMag:e.LINEAR}),this.texGrad=h.createTexture(e,{src:Ed,format:e.RGB,width:16,height:1,wrap:e.REPEAT,minMag:e.LINEAR});const $=new hg;var $KcNV$$interop$default=aa(Jd);var $ZDta$$interop$default=aa(Hd);this.mat=new Vf($KcNV$$interop$default.d,$ZDta$$interop$default.d),$.add(new ig(rc(new Xd),this.mat)),this.cmd=new Sf(e,$),this.mat.uniforms.permutation=this.texPerm,this.mat.uniforms.grads=this.texGrad}render(e){const r=this.gl;r.disable(r.DEPTH_TEST),r.enable(r.CULL_FACE),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this.mat.uniforms.time=e/1e4*this.speed,this.cmd.draw(this.camera)}}const Ad=({ui:$,bus:e})=>{const r=new Bd,p=ee(r,{init(){e.dispatch([G.BG_ACTIVE,!0])},release(){e.dispatch([G.BG_ACTIVE,!1])}});return()=>[p,$.bg,{scale:[32,32],freq:50,iter:5,speed:1.5}]};class zd{constructor(t){this.config=t,this.state=new K(t.initialState||{}),this.ctx={bus:new he(this.state,t.events,t.effects),views:{},ui:t.ui},this.addViews(this.config.views),this.router=new fe(t.router),this.router.addListener(Y,t=>this.ctx.bus.dispatch([Y,t.value])),this.ctx.bus.addHandlers({[Y]:ub("route"),[G.ROUTE_TO]:(t,[e,r])=>({[ya.ROUTE_TO]:r})}),this.ctx.bus.addEffect(ya.ROUTE_TO,([t,e])=>this.router.routeTo(this.router.format(t,e))),this.addViews({route:"route",routeComponent:["route.id",t=>(this.config.components[t]||(()=>["div",`missing component for route: ${t}`]))(this.ctx)]})}addViews(t){const e=this.ctx.views;for(let r in t){const i=t[r];o(i)?e[r]=this.state.addView(i[0],i[1]):e[r]=this.state.addView(i)}}start(){this.router.start();const t=this.rootComponent();Fe(({views:{bgActive:e}})=>{if(this.ctx.bus.processQueue()||e.deref())return t},{root:this.config.domRoot,ctx:this.ctx})}rootComponent(){const t=this.ctx.ui,e=Ad(this.ctx);return["div",t.root,e,this.ctx.views.routeComponent]}}function yd({ui:$}){return["div",$.title,"pngupngu"]}const Da={id:"home",match:["home"]};const Nc={router:{useFragment:!0,defaultRouteID:Da.id,routes:[Da]},events:{[G.BG_ACTIVE]:ub("bgActive")},effects:{},components:{[Da.id]:yd},domRoot:"app",initialState:{bgActive:!1},views:{bgActive:"bgActive"},ui:{title:{class:"red center-child absolute"},root:{class:"w-100 h-100 pa0 sans-serif f6 fw2 barlow bg-white98 relative"},bg:{class:""}}};new zd(Nc).start();return{"9B6d":{}};});